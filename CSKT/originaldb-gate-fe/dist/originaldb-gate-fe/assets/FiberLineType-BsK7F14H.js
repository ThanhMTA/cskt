import{t as p,x as S,r as i,y as l,j as e,k as A,q as D,F as h,cy as v,ax as C,bo as V,bp as E,I as j,b4 as K,H as I,bu as L,w as _,cz as M,E as O,B as w,W as P,G as $}from"./index-DXrCg2vr.js";import{c as B,u as G,r as R,g as U,a as F,m as q}from"./FiberLineType.action--k-1Z-uG.js";import{O as T,M as z}from"./OperationCategories.constant-Cc0MMSFx.js";import{S as H}from"./StationType.enum-Bp_r4zJ2.js";import{I as X}from"./IsEnabled-BlCRppZ-.js";import{P as W}from"./index-B0_H1u92.js";import{I as Y}from"./index-Bb5KQ1O1.js";const J={required:"Vui lòng không bỏ trống trường này",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},Q=({modalType:t,idRecord:d,closeModal:f})=>{var a,s;const[o]=p.useForm(),{openMessage:r}=S(),[c,u]=i.useState(t),[y,b]=i.useState([]),m=async()=>{try{const n=await F({},{});b(n)}catch{}},g=i.useCallback(async()=>{try{c===l.Create?await B(o==null?void 0:o.getFieldsValue()):await G(d,o==null?void 0:o.getFieldsValue()),r({type:"success",content:`${c===l.Create?"Thêm mới":"Chỉnh sửa"} ${T.FiberLineType} thành công`}),f(!0)}catch(n){r({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"})}},[c]),x=i.useMemo(()=>c===l.View?"borderless":"outlined",[c]),N=i.useCallback(async()=>{try{await R(d),r({type:"success",content:`Xóa ${T.FiberLineType} thành công`}),f(!0)}catch(n){r({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"})}},[d]),k=i.useCallback(async()=>{try{const n=await U(d,{});o.setFieldsValue(n)}catch(n){r({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"})}},[d]);return i.useEffect(()=>{u(t)},[t]),i.useEffect(()=>{m(),t!==l.Create&&k()},[]),e.jsxDEV(A,{...D,className:"flex",size:20,children:[e.jsxDEV(h,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:[e.jsxDEV("p",{className:"modal-title",children:`${(s=(a=v)==null?void 0:a.find(n=>(n==null?void 0:n.key)===c))==null?void 0:s.title} ${T.FiberLineType}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:131,columnNumber:9},void 0),c===l.View?e.jsxDEV(C,{htmlType:"submit",type:"primary",onClick:()=>{u(l.Update)},children:"Sửa thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:137,columnNumber:11},void 0):e.jsxDEV(h,{gap:10,children:[c===l.Update&&e.jsxDEV(W,{title:V.DELETE,onConfirm:N,okText:E.CORRECT,cancelText:E.NO,children:e.jsxDEV(C,{htmlType:"button",className:"text-red border-red",children:"Xóa tất cả"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:158,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:152,columnNumber:17},void 0),e.jsxDEV(C,{htmlType:"submit",type:"primary",onClick:o.submit,children:"Lưu thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:168,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:147,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:126,columnNumber:7},void 0),e.jsxDEV(p,{form:o,preserve:!1,className:"bg-secondary p-3 rounded-primary mt-10",validateMessages:J,onFinish:g,disabled:c===l.View,autoComplete:"off",variant:x,children:[e.jsxDEV(h,{gap:16,className:"p-3 bg-tertiary rounded-[inherit]",align:"center",children:[e.jsxDEV("div",{className:"w-8 center rounded-full bg-white aspect-square",children:e.jsxDEV(z,{className:"text-lg"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:194,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:193,columnNumber:11},void 0),e.jsxDEV("span",{className:"font-bold",children:["Danh mục ",T.FiberLineType]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:196,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:188,columnNumber:9},void 0),e.jsxDEV(p.Item,{label:"Tên loại tuyến cáp",name:"name",labelCol:{span:24},rules:[{required:!0},{max:H.Name}],children:e.jsxDEV(j,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:207,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:198,columnNumber:9},void 0),e.jsxDEV(p.Item,{label:"Mã loại tuyến cáp trực thuộc",name:"parent_id",labelCol:{span:24},children:e.jsxDEV(K,{options:I(y,"name","id")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:214,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:209,columnNumber:9},void 0),e.jsxDEV(p.Item,{label:"Trạng thái",name:"is_enable",labelCol:{span:24},labelAlign:"left",rules:[{required:!0}],children:c===l.View?e.jsxDEV(X,{is_enable:o.getFieldValue("is_enable")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:235,columnNumber:15},void 0):e.jsxDEV(L.Group,{children:[e.jsxDEV(L,{value:!0,children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:238,columnNumber:17},void 0),e.jsxDEV(L,{value:!1,children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:239,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:237,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:224,columnNumber:9},void 0),e.jsxDEV(p.Item,{label:"Số thứ tự",name:"order_number",labelCol:{span:24},children:e.jsxDEV(Y,{className:"w-full",controls:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:249,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:244,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:178,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/FiberLineTypeAction.tsx",lineNumber:121,columnNumber:5},void 0)},Z=[{title:"Tên loại tuyến cáp",dataIndex:"name",fixed:"left",width:200,key:w.Name},{title:"Mã loại tuyến cáp trực thuộc",dataIndex:"parent_id",width:300,render:t=>t||"---"},{title:"Trạng thái",dataIndex:"is_enable",width:150,render:t=>t?e.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/FiberLineType.tsx",lineNumber:34,columnNumber:39},void 0):e.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/FiberLineType.tsx",lineNumber:34,columnNumber:91},void 0)}].map(t=>({...t,key:(t==null?void 0:t.key)||P()})),ee=[{key:l.View,icon:e.jsxDEV($,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/FiberLineType.tsx",lineNumber:47,columnNumber:11},void 0),tooltip:"Chi tiết"}];function ce(){const{openModal:t,closeModal:d}=_(),[f,o]=i.useState([]),[r,c]=i.useState({count:0}),u=i.useRef(l.Create),[y,b]=i.useState(!1),m=i.useRef({...M}),g=async(a,s)=>{try{b(!0);const n=await Promise.all([await F({limit:s,page:a},{}),await q({})]);o(n[0]),c(n[1]),b(!1)}catch{b(!1)}},x=async a=>{N(a)},N=a=>{t(e.jsxDEV(Q,{modalType:u==null?void 0:u.current,idRecord:a,closeModal:s=>{d(!0),s&&k()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/FiberLineType.tsx",lineNumber:90,columnNumber:7},this))},k=()=>{g(m.current.current,m.current.pageSize)};return i.useEffect(()=>{g(m.current.current,m.current.pageSize)},[]),e.jsxDEV("div",{className:"w-[900px]",children:e.jsxDEV(O,{total:(r==null?void 0:r.count)||0,className:"mt-5",isReloadButton:!1,dataSource:f,columns:Z,actionList:ee,isAction:!0,loading:y,paginationCustom:{...m.current,total:r==null?void 0:r.count},onChange:({current:a,pageSize:s})=>{m.current={current:a,pageSize:s},g(a,s)},actionClick:(a,s)=>{u.current=a,x(s==null?void 0:s.id)},filterColumns:[w.Name],btnCreate:!0,handleCreate:()=>{u.current=l.Create,N()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/FiberLineType.tsx",lineNumber:120,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/FiberLineType.tsx",lineNumber:119,columnNumber:5},this)}export{ee as ACTION_TABLE,ce as default};
