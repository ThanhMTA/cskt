import{t as A,v as y,w as V,x as M,r as d,j as o,k as j,q as K,F,y as i,z as U,B as E,aU as L,W as P,E as O,G as H}from"./index-DXrCg2vr.js";import{c as R,u as q,r as z,g as B,m as X}from"./SpeciesCategories.action-v1syKdr3.js";import{M as Y}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as _}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";var g=(n=>(n.XE_TT="XE_TT",n.TAU_THUYEN="TAU_THUYEN",n.VSAT="VSAT",n))(g||{});const D=[{label:g.XE_TT,value:g.XE_TT},{label:g.TAU_THUYEN,value:g.TAU_THUYEN},{label:g.VSAT,value:g.VSAT}],p={NAME:"Tên chủng loại",DESC:"Mô tả",SHORT_NAME:"Tên tắt chủng loại",IS_ENABLE:"Trạng thái",CODE:"Mã chủng loại",SCOPE:"Phạm vi"},G=({action:n,detail:s})=>{const[f]=A.useForm(),c=y(),N=V(),{openMessage:m}=M(),u=d.useMemo(()=>[{title:p.NAME,content:(s==null?void 0:s.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:p.SHORT_NAME,content:(s==null?void 0:s.short_name)||null,dataIndex:"short_name"},{title:p.SCOPE,content:(s==null?void 0:s.scope)||null,dataIndex:"scope"},{title:"Số thứ tự",content:(s==null?void 0:s.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]),r=async()=>{try{c.show();const e=f.getFieldsValue();switch(n){case i.Update:await q(s==null?void 0:s.id,e),m({type:"success",content:"Cập nhật thành công"});break;case i.Create:await R(e),m({type:"success",content:"Thêm mới thành công"}),f.resetFields();break;case i.View:break}h()}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),c.hide()}},S=async()=>{try{await z(s==null?void 0:s.id),m({type:"success",content:"Xóa thành công"}),c.hide(),N.closeModal({})}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},b=()=>{if(n===i.View){h();return}else f.submit()},h=()=>{c.hide(),N.closeModal({success:!0})};return o.jsxDEV(j,{...K,className:"flex",size:20,children:[o.jsxDEV(F,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:o.jsxDEV(Y,{name:"chủng loại TBKT",action:n,hanldeFinish:b,handleDelete:S},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:136,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:131,columnNumber:7},void 0),o.jsxDEV(A,{form:f,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:r,disabled:n===i.View,children:n===i.Update||n===i.Create?o.jsxDEV(o.Fragment,{children:u.map((e,l)=>o.jsxDEV(_,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:e.dataIndex==="order_number",selectField:{isSelect:(e==null?void 0:e.dataIndex)==="scope",dataSelect:D},isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:148,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:145,columnNumber:11},void 0):o.jsxDEV(o.Fragment,{children:u.map((e,l)=>o.jsxDEV("div",{className:"flex flex-col pb-4",children:o.jsxDEV(_,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:174,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:173,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:170,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:138,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/SpeciesCategoriesAction.tsx",lineNumber:126,columnNumber:5},void 0)},T=G,W=[{key:i.View,icon:o.jsxDEV(H,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:22,columnNumber:11},void 0),tooltip:"Chi tiết"}];function te(){const{openModal:n}=V(),[s,f]=d.useState([]),[c,N]=d.useState({count:0}),[m,u]=d.useState(!1),[r,S]=d.useState({page:1,pageSize:U}),[b,h]=d.useState({}),e=[{title:p.NAME,dataIndex:"name",fixed:"left",key:E.Name,render:(t,a)=>o.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>k(i.View,a),children:t??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:46,columnNumber:11},this)},{title:p.SHORT_NAME,dataIndex:"short_name",key:E.ShortName},{title:p.SCOPE,dataIndex:"scope",render:t=>o.jsxDEV(o.Fragment,{children:L(t,D)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:64,columnNumber:16},this)},{title:p.IS_ENABLE,dataIndex:"is_enable",render:t=>t?o.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:70,columnNumber:41},this):o.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:70,columnNumber:93},this)}].map(t=>({...t,key:(t==null?void 0:t.key)||P()})),l=async(t,a,w)=>{try{u(!0);const C=await Promise.all([await B({limit:a,page:t},w),await X(w)]);f(C[0]),N(C[1]),u(!1)}catch{u(!1)}},k=(t,a)=>{t===i.View&&I(a)},I=t=>{n(o.jsxDEV(T,{detail:t,action:i.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:109,columnNumber:7},this),{width:"40vw",onModalClose(a){a!=null&&a.success?n(o.jsxDEV(T,{detail:t,action:i.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:115,columnNumber:15},this),{width:"40vw",onModalClose(){x()}}):x()}})},x=()=>{l(r.page,r.pageSize,b)};return d.useEffect(()=>{l(r.page,r.pageSize,b)},[r,b]),o.jsxDEV(o.Fragment,{children:o.jsxDEV(O,{total:(c==null?void 0:c.count)||0,className:"mt-5",isReloadButton:!1,dataSource:s,setFilter:h,setPagination:S,columns:e,actionList:W,isAction:!1,loading:m,paginationCustom:{current:r.page,pageSize:r.pageSize,total:c==null?void 0:c.count},onChange:({current:t,pageSize:a})=>{S({page:t,pageSize:a}),l(t,a,b)},actionClick:k,filterColumns:[E.Name],btnCreate:!0,handleCreate:()=>{n(o.jsxDEV(T,{action:i.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:168,columnNumber:13},this),{width:"40vw",onModalClose(t){t!=null&&t.success&&x()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:141,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/SpeciesCategories.tsx",lineNumber:140,columnNumber:5},this)}export{W as ACTION_TABLE,te as default};
