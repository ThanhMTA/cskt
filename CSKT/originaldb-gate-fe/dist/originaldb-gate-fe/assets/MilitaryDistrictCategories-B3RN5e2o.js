import{t as w,v as E,w as S,x as V,r as g,j as s,k as j,q as I,F as K,y as n,z as A,B as k,E as _,G as F}from"./index-DXrCg2vr.js";import{M as q}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{c as z,u as L,r as P,g as U,m as R}from"./MilitaryDistrict.action-DAlwc088.js";import{I as M}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";function y({detail:t,action:o}){const[c]=w.useForm(),d=E(),b=S(),{openMessage:a}=V(),x=async()=>{try{d.show();const e=c.getFieldsValue();switch(o){case n.Update:await L(t==null?void 0:t.id,e),a({type:"success",content:"Cập nhật thành công"});break;case n.Create:await z(e),a({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case n.View:break}l()}catch(e){console.log(e),a({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),d.hide()}},D=async()=>{try{await P(t==null?void 0:t.id),a({type:"success",content:"Xóa thành công"}),d.hide(),b.closeModal({})}catch(e){console.log(e),a({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},p=()=>{if(o===n.View){l();return}else c.submit()},l=()=>{d.hide(),b.closeModal({success:!0})},h=g.useMemo(()=>[{title:"Tên quân khu",content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Hãy nhập thông tin cho trường tên quân khu"}]},{title:"Tên viết tắt",content:(t==null?void 0:t.short_name)||null,dataIndex:"short_name"},{title:"Mã",content:(t==null?void 0:t.code)||null,dataIndex:"code"},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]);return s.jsxDEV(j,{...I,className:"flex",size:20,children:[s.jsxDEV(K,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:s.jsxDEV(q,{name:"quân khu",action:o,hanldeFinish:p,handleDelete:D},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:132,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:127,columnNumber:13},this),s.jsxDEV(w,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:o===n.View,onFinish:x,children:o===n.Update||o===n.Create?s.jsxDEV(s.Fragment,{children:h.map((e,m)=>s.jsxDEV(M,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},m,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:189,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:186,columnNumber:21},this):s.jsxDEV(s.Fragment,{children:h.map((e,m)=>s.jsxDEV("div",{className:"flex flex-col pb-4",children:s.jsxDEV(M,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},m,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:210,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:209,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:206,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:134,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/MilitaryDistrictAction.tsx",lineNumber:122,columnNumber:9},this)}const B=[{key:n.View,icon:s.jsxDEV(F,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:20,columnNumber:15},void 0),tooltip:"Chi tiết"}];function W(){const{openModal:t}=S(),[o,c]=g.useState({page:1,pageSize:A}),[d,b]=g.useState([]),[a,x]=g.useState({count:0}),[D,p]=g.useState(!1),[l,h]=g.useState({}),e=[{title:"Tên quân khu",dataIndex:"name",fixed:"left",key:k.Name,render:(i,r)=>s.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>C(n.View,r),children:i??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:39,columnNumber:21},this)},{title:"Tên viết tắt",dataIndex:"short_name",key:k.ShortName},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:i=>i?s.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:57,columnNumber:47},this):s.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:57,columnNumber:99},this)}],m=async(i,r,u)=>{try{p(!0);const f=await Promise.all([U({limit:r,page:i},u),R(u)]);f[1]&&x({count:f[1].count}),b(f[0]),p(!1)}catch(f){p(!1),console.log(f)}},T=i=>{t(s.jsxDEV(y,{detail:i,action:n.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:78,columnNumber:13},this),{width:"40vw",onModalClose(r){r!=null&&r.success?t(s.jsxDEV(y,{detail:i,action:n.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:84,columnNumber:29},this),{width:"40vw",onModalClose(u){u!=null&&u.success,N()}}):N()}})},C=(i,r)=>{console.log(i),i===n.View&&T(r)},N=()=>{m(o.page,o.pageSize,l)};return g.useEffect(()=>{m(1,o.pageSize,l)},[l]),s.jsxDEV("div",{className:"w-[900px]",children:s.jsxDEV(_,{className:"mt-5",isReloadButton:!0,setFilter:h,setPagination:c,dataSource:[...d],columns:e,paginationCustom:{current:o.page,pageSize:o.pageSize,total:a==null?void 0:a.count},onChange:({current:i,pageSize:r})=>{c({page:i,pageSize:r}),m(o.page,o.pageSize,l)},actionList:B,actionClick:C,isAction:!1,loading:D,rowKey:"id",filterColumns:[k.Name],btnCreate:!0,handleCreate:()=>{t(s.jsxDEV(y,{action:n.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:146,columnNumber:21},this),{width:"40vw",onModalClose(i){i!=null&&i.success&&N()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:118,columnNumber:9},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/MilitaryDistrictCategories.tsx",lineNumber:117,columnNumber:12},this)}export{W as default};
