import{t as T,v as Z,w as A,x as K,r as m,j as a,k as j,q as L,F as M,y as c,z as F,B as I,W as _,E as B,G}from"./index-DXrCg2vr.js";import{a as O,c as P,u as R,r as U,g as q,m as z}from"./ZoneCategory.action-C9oUMmN9.js";import{M as H}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as V}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";var l=(o=>(o.ĐL="ĐL",o.BGĐL="BGĐL",o.ĐBG="ĐBG",o.DK1="DK1",o.TSa="T.Sa",o))(l||{});const p={NAME:"Tên",CODE:"Tên viết tắt",DESCRIPTION:"Ghi chú",IS_ENABLE:"Trạng thái"};l.BGĐL,l.BGĐL,l.DK1,l.DK1,l.TSa,l.TSa,l.ĐBG,l.ĐBG,l.ĐL,l.ĐL;const W=({action:o,id:h})=>{const[b]=T.useForm(),r=Z(),C=A(),{openMessage:u}=K(),[t,d]=m.useState(null),x=async()=>{try{const e=await O(h,{});d(e)}catch(e){console.log("error: ",e)}},f=m.useMemo(()=>[{title:p.NAME,content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:p.CODE,content:(t==null?void 0:t.code)||null,dataIndex:"code"},{title:p.DESCRIPTION,content:(t==null?void 0:t.desc)||null,dataIndex:"desc"},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]),S=()=>{if(o===c.View){k();return}else b.submit()},k=()=>{r.hide(),C.closeModal({success:!0})},N=async()=>{var e,g;try{r.show();const n=b.getFieldsValue(),s=(e=n==null?void 0:n.code)!=null&&e.value?(g=n==null?void 0:n.code)==null?void 0:g.value:n==null?void 0:n.code;switch(o){case c.Update:await R(t==null?void 0:t.id,{...n,code:s}),u({type:"success",content:"Cập nhật thành công"});break;case c.Create:await P(n),u({type:"success",content:"Thêm mới thành công"}),b.resetFields();break;case c.View:break}k()}catch(n){console.log(n),u({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"}),r.hide()}},w=async()=>{try{await U(t==null?void 0:t.id),u({type:"success",content:"Xóa thành công"}),r.hide(),C.closeModal({})}catch(e){console.log(e),u({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}};return m.useEffect(()=>{h&&x()},[h]),a.jsxDEV(j,{...L,className:"flex",size:20,children:[a.jsxDEV(M,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:a.jsxDEV(H,{name:"khu vực",action:o,hanldeFinish:S,handleDelete:w},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:160,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:155,columnNumber:7},void 0),a.jsxDEV(T,{form:b,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:N,disabled:o===c.View,children:o===c.Update||o===c.Create?a.jsxDEV(a.Fragment,{children:f.map((e,g)=>a.jsxDEV(V,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:172,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:169,columnNumber:11},void 0):a.jsxDEV(a.Fragment,{children:f.map((e,g)=>a.jsxDEV("div",{className:"flex flex-col pb-4",children:a.jsxDEV(V,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:193,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:192,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:189,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:162,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/components/ZoneCategoryAction.tsx",lineNumber:150,columnNumber:5},void 0)},E=W,X=[{key:c.View,icon:a.jsxDEV(G,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:22,columnNumber:11},void 0),tooltip:"Chi tiết"}];function se(){const{openModal:o}=A(),[h,b]=m.useState([]),[r,C]=m.useState({count:0}),[u,t]=m.useState(!1),[d,x]=m.useState({page:1,pageSize:F}),[f,S]=m.useState({}),k=[{title:p.NAME,dataIndex:"name",fixed:"left",key:I.Name,render:(s,i)=>a.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>w(c.View,i),children:s??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:44,columnNumber:11},this)},{title:p.CODE,dataIndex:"code"},{title:p.DESCRIPTION,dataIndex:"desc"},{title:p.IS_ENABLE,dataIndex:"is_enable",render:s=>s?a.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:64,columnNumber:41},this):a.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:64,columnNumber:93},this)}].map(s=>({...s,key:(s==null?void 0:s.key)||_()})),N=async(s,i,D)=>{try{t(!0);const y=await Promise.all([await q({limit:i,page:s},D),await z(D)]);b(y[0]),C(y[1]),t(!1)}catch{t(!1)}},w=(s,i)=>{switch(s){case c.View:g(i);break;case c.Create:e(i.id);break}},e=s=>{o(a.jsxDEV(E,{id:s,action:c.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:108,columnNumber:7},this),{width:"40vw",onModalClose(i){i!=null&&i.success&&n()}})},g=s=>{o(a.jsxDEV(E,{id:s.id,action:c.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:123,columnNumber:7},this),{width:"40vw",onModalClose(i){i!=null&&i.success?o(a.jsxDEV(E,{id:s.id,action:c.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:129,columnNumber:15},this),{width:"40vw",onModalClose(){n()}}):n()}})},n=()=>{N(d.page,d.pageSize,f)};return m.useEffect(()=>{N(d.page,d.pageSize,f)},[d,f]),a.jsxDEV(a.Fragment,{children:a.jsxDEV(B,{total:(r==null?void 0:r.count)||0,className:"mt-5",isReloadButton:!1,setFilter:S,setPagination:x,dataSource:h,columns:k,actionList:X,rowClassName:"hover:bg-secondary",isAction:!1,loading:u,actionWidth:120,paginationCustom:{current:d.page,pageSize:d.pageSize,total:r==null?void 0:r.count},onChange:({current:s,pageSize:i})=>{x({page:s,pageSize:i}),N(s,i,f)},actionClick:w,filterColumns:[I.Name],btnCreate:!0,handleCreate:()=>{o(a.jsxDEV(E,{action:c.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:184,columnNumber:13},this),{width:"40vw",onModalClose(s){s!=null&&s.success&&n()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:155,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/technical-categories/pages/ZoneCategories.tsx",lineNumber:154,columnNumber:5},this)}export{X as ACTION_TABLE,se as default};
