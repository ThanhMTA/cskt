import{t as S,v as y,w as D,x as _,r as d,j as t,k as I,q as F,F as j,y as n,z as K,B as R,aU as L,W as M,E as O,G as P}from"./index-DXrCg2vr.js";import{R as g,a as A}from"./ReasonCategories.constant-BL3abCC_.js";import{c as U,u as q,r as z,g as B,m as G}from"./ReasonCategories.action-GFK03OFQ.js";import{F as Y}from"./ForceCategories.constant-D9uazZoj.js";import{M as H}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as T}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const $=({action:i,detail:s})=>{const[f]=S.useForm(),r=y(),b=D(),{openMessage:m}=_(),u=d.useMemo(()=>[{title:g.NAME,content:(s==null?void 0:s.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:g.CODE,content:(s==null?void 0:s.code)||null,dataIndex:"code"},{title:g.TYPE_FOR,content:(s==null?void 0:s.type_for)||null,dataIndex:"type_for"},{title:"Số thứ tự",content:(s==null?void 0:s.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]),p=()=>{if(i===n.View){N();return}else f.submit()},N=()=>{r.hide(),b.closeModal({success:!0})},c=async()=>{try{r.show();const e=f.getFieldsValue();switch(i){case n.Update:await q(s==null?void 0:s.id,e),m({type:"success",content:"Cập nhật thành công"});break;case n.Create:await U({...e}),m({type:"success",content:"Thêm mới thành công"}),f.resetFields();break;case n.View:break}N()}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),r.hide()}},x=async()=>{try{await z(s==null?void 0:s.id),m({type:"success",content:`Xóa ${Y.REASON} thành công`}),r.hide(),b.closeModal({})}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}};return t.jsxDEV(I,{...F,className:"flex",size:20,children:[t.jsxDEV(j,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:t.jsxDEV(H,{name:"Lý do tăng giảm",action:i,hanldeFinish:p,handleDelete:x},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:140,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:135,columnNumber:7},void 0),t.jsxDEV(S,{form:f,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:c,disabled:i===n.View,children:i===n.Update||i===n.Create?t.jsxDEV(t.Fragment,{children:u.map((e,l)=>t.jsxDEV(T,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,selectField:{isSelect:(e==null?void 0:e.dataIndex)==="type_for",dataSelect:A},isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:152,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:149,columnNumber:11},void 0):t.jsxDEV(t.Fragment,{children:u.map((e,l)=>t.jsxDEV("div",{className:"flex flex-col pb-4",children:t.jsxDEV(T,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:177,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:176,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:173,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:142,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ReasonCategoriesAction.tsx",lineNumber:130,columnNumber:5},void 0)},k=$,W=[{key:n.View,icon:t.jsxDEV(P,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:20,columnNumber:11},void 0),tooltip:"Chi tiết"}];function ne(){const{openModal:i}=D(),[s,f]=d.useState([]),[r,b]=d.useState({count:0}),[m,u]=d.useState(!1),[p,N]=d.useState({}),[c,x]=d.useState({page:1,pageSize:K}),e=[{title:g.NAME,dataIndex:"name",fixed:"left",key:R.Name,render:(o,a)=>t.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>E(n.View,a),children:o??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:43,columnNumber:11},this)},{title:g.CODE,dataIndex:"code",width:300},{title:g.TYPE_FOR,dataIndex:"type_for",render:o=>t.jsxDEV(t.Fragment,{children:L(o,A)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:61,columnNumber:16},this)},{title:g.IS_ENABLE,dataIndex:"is_enable",key:"is_enable",render:o=>o?t.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:68,columnNumber:41},this):t.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:68,columnNumber:93},this)}].map(o=>({...o,key:(o==null?void 0:o.key)||M()})),l=async(o,a,w)=>{try{u(!0);const h=await Promise.all([await B({limit:a,page:o},w),await G(w)]);f(h[0]),b(h[1]),u(!1)}catch{u(!1)}},E=(o,a)=>{o===n.View&&V(a)},V=o=>{i(t.jsxDEV(k,{detail:o,action:n.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:106,columnNumber:7},this),{width:"40vw",onModalClose(a){a!=null&&a.success?i(t.jsxDEV(k,{detail:o,action:n.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:112,columnNumber:15},this),{width:"40vw",onModalClose(){C()}}):C()}})},C=()=>{l(c.page,c.pageSize,p)};return d.useEffect(()=>{l(c.page,c.pageSize,p)},[c,p]),t.jsxDEV(t.Fragment,{children:t.jsxDEV(O,{total:(r==null?void 0:r.count)||0,setFilter:N,setPagination:x,className:"mt-5",isReloadButton:!1,dataSource:s,columns:e,actionList:W,isAction:!1,loading:m,paginationCustom:{current:c.page,pageSize:c.pageSize,total:r==null?void 0:r.count},onChange:({current:o,pageSize:a})=>{x({page:o,pageSize:a}),l(o,a,p)},actionClick:E,filterColumns:[R.Name],btnCreate:!0,handleCreate:()=>{i(t.jsxDEV(k,{action:n.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:166,columnNumber:13},this),{width:"40vw",onModalClose(o){o!=null&&o.success&&C()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:138,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ReasonCategories.tsx",lineNumber:137,columnNumber:5},this)}export{W as ACTION_TABLE,ne as default};
