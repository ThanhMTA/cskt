import{t as S,v as D,w as U,x as V,r as d,j as s,k as y,q as j,F as K,y as n,z as I,B as C,E as _,G as F}from"./index-DXrCg2vr.js";import{M}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{c as v,u as L,r as P,g as q,m as z}from"./AdministrativeUnit.action-B2dXwrla.js";import{I as T}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";function A({detail:t,action:o}){const[c]=S.useForm(),g=D(),f=U(),{openMessage:r}=V(),x=async()=>{try{g.show();const e=c.getFieldsValue();switch(o){case n.Update:await L(t==null?void 0:t.id,e),r({type:"success",content:"Cập nhật thành công"});break;case n.Create:await v(e),r({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case n.View:break}m()}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),g.hide()}},k=async()=>{try{await P(t==null?void 0:t.id),r({type:"success",content:"Xóa thành công"}),g.hide(),f.closeModal({})}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},h=()=>{if(o===n.View){m();return}else c.submit()},m=()=>{g.hide(),f.closeModal({success:!0})},b=d.useMemo(()=>[{title:"Tên đơn vị hành chính",content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Hãy nhập thông tin cho trường tên đơn vị hành chính"}]},{title:"Tên viết tắt",content:(t==null?void 0:t.short_name)||null,dataIndex:"short_name"},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]);return s.jsxDEV(y,{...j,className:"flex",size:20,children:[s.jsxDEV(K,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:s.jsxDEV(M,{name:"đơn vị hành chính",action:o,hanldeFinish:h,handleDelete:k},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:128,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:123,columnNumber:13},this),s.jsxDEV(S,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:o===n.View,onFinish:x,children:o===n.Update||o===n.Create?s.jsxDEV(s.Fragment,{children:b.map((e,l)=>s.jsxDEV(T,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:178,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:175,columnNumber:21},this):s.jsxDEV(s.Fragment,{children:b.map((e,l)=>s.jsxDEV("div",{className:"flex flex-col pb-4",children:s.jsxDEV(T,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:198,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:197,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:194,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/AdministrativeUnitAction.tsx",lineNumber:118,columnNumber:9},this)}const R=[{key:n.View,icon:s.jsxDEV(F,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:20,columnNumber:15},void 0),tooltip:"Chi tiết"}];function Q(){const{openModal:t}=U(),[o,c]=d.useState({page:1,pageSize:I}),[g,f]=d.useState([]),[r,x]=d.useState({count:0}),[k,h]=d.useState(!1),[m,b]=d.useState({}),e=[{title:"Tên đơn vị hành chính",dataIndex:"name",fixed:"left",key:C.Name,render:(i,a)=>s.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>w(n.View,a),children:i??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:40,columnNumber:21},this)},{title:"Tên viết tắt",dataIndex:"short_name",key:C.ShortName},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:i=>i?s.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:58,columnNumber:40},this):s.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:58,columnNumber:92},this)}],l=async(i,a,u)=>{try{h(!0);const p=await Promise.all([q({limit:a,page:i},u),z(u)]);p[1]&&x({count:p[1].count}),f(p[0]),h(!1)}catch(p){h(!1),console.log(p)}},E=i=>{t(s.jsxDEV(A,{detail:i,action:n.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:79,columnNumber:13},this),{width:"40vw",onModalClose(a){a!=null&&a.success?t(s.jsxDEV(A,{detail:i,action:n.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:85,columnNumber:29},this),{width:"40vw",onModalClose(u){u!=null&&u.success,N()}}):N()}})},w=(i,a)=>{i===n.View&&E(a)},N=()=>{l(o.page,o.pageSize,m)};return d.useEffect(()=>{l(1,o.pageSize,m)},[m]),s.jsxDEV("div",{className:"w-[900px]",children:s.jsxDEV(_,{setFilter:b,setPagination:c,className:"mt-5",isReloadButton:!0,dataSource:[...g],columns:e,paginationCustom:{current:o.page,pageSize:o.pageSize,total:r==null?void 0:r.count},onChange:({current:i,pageSize:a})=>{c({page:i,pageSize:a}),l(i,a,m)},actionList:R,actionClick:w,isAction:!1,loading:k,rowKey:"id",filterColumns:[C.Name],btnCreate:!0,handleCreate:()=>{t(s.jsxDEV(A,{action:n.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:143,columnNumber:21},this),{width:"40vw",onModalClose(i){i!=null&&i.success&&N()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:116,columnNumber:9},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/AdministrativeUnitCategories.tsx",lineNumber:115,columnNumber:12},this)}export{Q as default};
