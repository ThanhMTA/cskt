import{r as l,b4 as _,al as ne,ai as re,C as oe,bq as ie,ap as te,c as ae,br as le,e as G,j as e,I as F,bs as J,b8 as Q,t as ce,bt as Y,ae as de,bu as K,V as me,bv as ue,bw as fe,bx as pe}from"./index-DXrCg2vr.js";import{T as X,D as Ne}from"./index-CfEarsVi.js";import{I as be}from"./index-Bb5KQ1O1.js";const{Option:R}=_;function Z(r){return r&&r.type&&(r.type.isSelectOption||r.type.isSelectOptGroup)}const ge=(r,s)=>{var D;const{prefixCls:a,className:b,popupClassName:g,dropdownClassName:c,children:k,dataSource:h}=r,p=ne(k);let N;p.length===1&&l.isValidElement(p[0])&&!Z(p[0])&&([N]=p);const w=N?()=>N:void 0;let t;p.length&&Z(p[0])?t=k:t=h?h.map(d=>{if(l.isValidElement(d))return d;switch(typeof d){case"string":return l.createElement(R,{key:d,value:d},d);case"object":{const{value:C}=d;return l.createElement(R,{key:C,value:C},d.text)}default:return}}):[];{const d=re("AutoComplete");d.deprecated(!("dataSource"in r),"dataSource","options"),d(!N||!("size"in r),"usage","You need to control style self instead of setting `size` when using customize input."),d.deprecated(!c,"dropdownClassName","popupClassName")}const{getPrefixCls:x}=l.useContext(oe),S=x("select",a),[u]=ie("SelectLike",(D=r.dropdownStyle)===null||D===void 0?void 0:D.zIndex);return l.createElement(_,Object.assign({ref:s,suffixIcon:null},te(r,["dataSource","dropdownClassName"]),{prefixCls:S,popupClassName:g||c,dropdownStyle:Object.assign(Object.assign({},r.dropdownStyle),{zIndex:u}),className:ae(`${S}-auto-complete`,b),mode:_.SECRET_COMBOBOX_MODE_DO_NOT_USE,getInputElement:w}),t)},P=l.forwardRef(ge),xe=le(P);P.Option=R;P._InternalPanelDoNotUseOrYouWillBeFired=xe;P.displayName="AutoComplete";const we=P,Ce=r=>G("province_categories",{...r,fields:["*"],filter:{}}),ee=r=>G("district_categories",{fields:["*"],filter:{province_id:{_eq:r}}}),se=r=>G("ward_categories",{fields:["*"],filter:{district_id:{_eq:r}}});var q=(r=>(r.Province="province",r.District="district",r.Ward="ward",r))(q||{});const ke=()=>{const[r,s]=l.useState([]),[D,a]=l.useState([]),[b,g]=l.useState([]),[c,k]=l.useState(null),[h,p]=l.useState(null),[N,w]=l.useState(null),[t,x]=l.useState("province"),[S,u]=l.useState(!1),d=l.useCallback(async()=>{const m=await Ce();s(m)},[]);return l.useEffect(()=>{d()},[d]),{provinces:r,districts:D,wards:b,selectedProvince:c,selectedDistrict:h,selectedWard:N,currentLevel:t,setCurrentLevel:x,showDropdown:S,setSelectedProvince:async m=>{if(k(m),p(null),w(null),x("district"),m!==null){const j=await ee(m);a(j),g([])}else a([]),g([]);u(!0)},setSelectedDistrict:async m=>{if(p(m),w(null),x("ward"),m!==null){const j=await se(m);g(j)}else g([]);u(!0)},setSelectedWard:m=>{w(m),u(!1)},goBack:()=>{t==="district"?(x("province"),p(null),a([]),u(!0)):t==="ward"&&(x("district"),p(null),w(null),g([]),u(!0))},setShowDropdown:m=>{u(m)}}},{Option:Se}=_,{Search:he}=F,ve=({value:r={province:"",district:"",ward:""},onChange:s,placeholder:D="Tỉnh/TP, Quận/huyện, Phường/xã"})=>{const a=l.useRef(null),{Province:b,District:g,Ward:c}=q,{provinces:k,districts:h,wards:p,selectedProvince:N,selectedDistrict:w,selectedWard:t,setSelectedProvince:x,setSelectedDistrict:S,setSelectedWard:u,setCurrentLevel:d,currentLevel:C,goBack:L,showDropdown:I,setShowDropdown:T}=ke(),[y,m]=l.useState("");l.useEffect(()=>{r?r.province&&r.province!==N&&(x(r.province),ee(r.province).then(()=>{r.district&&(S(r.district),se(r.district).then(()=>{r.ward&&u(r.ward)}))})):(x(null),S(null),u(null))},[r,x,S,u,N,d,c]);const j=o=>{switch(C){case b:x(o),s&&s({province:o,district:null,ward:null}),T(!0);break;case g:S(o),T(!0),s&&s({...r,district:o,ward:null});break;case c:u(o),T(!1),s&&s({...r,ward:o});break}m("")},z=o=>{o?(setTimeout(()=>{a.current&&a.current.focus()},100),T(!0)):T(!1)},V=o=>o.normalize("NFD").replace(/[\u0300-\u036f]/g,""),O=()=>{const o=V(y.toLowerCase());switch(C){case b:return k.filter(i=>V(i.name.toLowerCase()).includes(o));case g:return h.filter(i=>V(i.name.toLowerCase()).includes(o));case c:return p.filter(i=>V(i.name.toLowerCase()).includes(o));default:return[]}},A=()=>{var o,i,n;return C===g?e.jsxDEV("div",{className:"flex items-center cursor-pointer p-2 bg-[#E6F7FF]",onClick:L,children:[e.jsxDEV(J,{className:"mr-2"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:162,columnNumber:21},void 0),e.jsxDEV("span",{children:(o=k.find(f=>f.id===N))==null?void 0:o.name},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:163,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:158,columnNumber:17},void 0):C===c?e.jsxDEV("div",{children:e.jsxDEV("div",{className:"flex items-center cursor-pointer p-2 bg-[#E6F7FF]",onClick:()=>{L()},children:[e.jsxDEV(J,{className:"mr-2"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:178,columnNumber:25},void 0),e.jsxDEV("span",{children:[(i=h.find(f=>f.id===w))==null?void 0:i.name,","," ",(n=k.find(f=>f.id===N))==null?void 0:n.name]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:179,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:172,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:171,columnNumber:17},void 0):null},W=()=>{var o,i,n;if(N&&w&&t){const f=(o=k.find(E=>E.id===N))==null?void 0:o.name,v=(i=h.find(E=>E.id===w))==null?void 0:i.name;return`${(n=p.find(E=>E.id===t))==null?void 0:n.name}, ${v}, ${f}`}};return e.jsxDEV("div",{className:"max-w-md mx-auto w-full",children:e.jsxDEV(_,{className:"w-full",style:{width:"100%"},allowClear:!0,onClear:()=>{d(q.Province)},value:W(),onChange:j,placeholder:D,open:I,onDropdownVisibleChange:z,popupClassName:"rounded-md shadow-lg max-h-60 overflow-auto",dropdownRender:o=>e.jsxDEV(e.Fragment,{children:[A(),e.jsxDEV("div",{className:"p-2",children:e.jsxDEV(he,{placeholder:`Tìm kiếm ${C===b?"tỉnh/TP":C===g?"quận/huyện":"phường/xã"}`,ref:a,onChange:i=>m(i.target.value),value:y,suffix:null},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:230,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:229,columnNumber:25},void 0),o]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:227,columnNumber:21},void 0),children:O().map(o=>e.jsxDEV(Se,{value:o.id,children:o.name},o.id,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:248,columnNumber:21},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:213,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/AddressComponent/index.tsx",lineNumber:212,columnNumber:9},void 0)},De=({title:r,content:s=null,statusUpdate:D=!1,dataIndex:a,selectField:b,addressField:g,autoCompleteField:c,isDateField:k,hidden:h,isNumberField:p,placeholder:N,isRadioField:w,treeField:t,suffix:x,isTextArea:S=!1,disable:u=!1,rules:d})=>{var O,A,W;const[C,L]=l.useState(!0),[I,T]=l.useState(!1),[y,m]=l.useState([]),j=o=>{var i;return o?((i=c==null?void 0:c.dataSelect)==null?void 0:i.filter(n=>{var f;return(f=n==null?void 0:n.name)==null?void 0:f.includes(o)}).map(n=>({value:n.name,key:n==null?void 0:n.id})))||[]:[]},z=(o,i)=>{var f,v,$,E,M,H,U;const n=c==null?void 0:c.dataSelect.find(B=>(B==null?void 0:B.id)===i.key);c==null||c.formData.setFieldsValue({technical_id:i.key,code:n.code,org_manage_id:(f=n.org_manage_id)==null?void 0:f.id,ward_id:{province:(E=($=(v=n==null?void 0:n.ward_id)==null?void 0:v.district_id)==null?void 0:$.province_id)==null?void 0:E.id,district:(H=(M=n==null?void 0:n.ward_id)==null?void 0:M.district_id)==null?void 0:H.id,ward:(U=n==null?void 0:n.ward_id)==null?void 0:U.id},address:n.address,description:n.description,is_offical:n.is_offical})},V=()=>{const o=(s??[]).slice(0,2),i=(s??[]).length>2?s.slice(2,s.length):[];return e.jsxDEV("div",{className:"flex flex-row items-center w-full",children:[o.map((n,f)=>{var v;return e.jsxDEV("div",{children:e.jsxDEV("div",{className:"mr-2 flex py-[2px] px-2 items-center justify-center rounded-[52px] bg-[#F0F0F0] border border-grayColor",children:((v=n==null?void 0:n.major_categories_id)==null?void 0:v.name)??""},f,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:109,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:108,columnNumber:13},void 0)}),i.length?e.jsxDEV("div",{className:"flex flex-row cursor-pointer",children:[" ",e.jsxDEV(pe,{placement:"right",rootClassName:"border rounded-[12px]",arrow:!1,content:e.jsxDEV("div",{className:"min-w-40",children:i.map((n,f)=>{var v;return e.jsxDEV("div",{className:"flex flex-row",children:e.jsxDEV("div",{className:"mr-2 my-1 flex py-[2px] px-2 items-center justify-center rounded-[52px] bg-[#F5F5F5] border border-[#F0F0F0]",children:((v=n==null?void 0:n.major_categories_id)==null?void 0:v.name)??""},f,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:130,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:129,columnNumber:23},void 0)})},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:126,columnNumber:17},void 0),children:e.jsxDEV("div",{className:"flex items-center justify-center py-[2px] px-2 rounded-[20px] border border-[#F0F0F0] bg-[#F5F5F6] text-xs font-normal",children:"..."},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:142,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:121,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:119,columnNumber:11},void 0):e.jsxDEV(e.Fragment,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:148,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:105,columnNumber:7},void 0)};if(D){let o=null;return a==="ward_id"?s?o={province:(A=(O=s==null?void 0:s.district_id)==null?void 0:O.province_id)==null?void 0:A.id,district:(W=s==null?void 0:s.district_id)==null?void 0:W.id,ward:s==null?void 0:s.id}:o={province:null,district:null,ward:null}:a==="used_at"||a==="repair_at"?s&&(o=Q(s)):a==="major_categories"?o=s==null?void 0:s.map(i=>{var n;return(n=i==null?void 0:i.major_categories_id)==null?void 0:n.id}):o=s!=null&&s.name?{value:s==null?void 0:s.id,label:s==null?void 0:s.name}:s,e.jsxDEV(ce.Item,{className:`m-0 ${h?"hidden":""}`,label:e.jsxDEV("span",{className:"font-extrabold",children:r},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:182,columnNumber:16},void 0),name:a,labelCol:{span:24},rules:d,initialValue:o,children:b!=null&&b.isSelect?e.jsxDEV(_,{optionFilterProp:"label",disabled:u,showSearch:!0,allowClear:!0,options:b==null?void 0:b.dataSelect},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:189,columnNumber:11},void 0):t!=null&&t.isSelect?t!=null&&t.isMultiple?e.jsxDEV(X,{treeLine:C&&{showLeafIcon:I},multiple:!0,showSearch:!0,filterTreeNode:(i,n)=>n.title.toLowerCase().indexOf(i.toLowerCase())>=0,style:{width:"100%"},placeholder:"Chọn chuyên ngành",allowClear:!0,treeDefaultExpandAll:!0,treeData:t==null?void 0:t.dataSelect},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:198,columnNumber:13},void 0):e.jsxDEV(X,{treeLine:C&&{showLeafIcon:I},disabled:u,showCheckedStrategy:"SHOW_ALL",showSearch:!0,filterTreeNode:(i,n)=>n.title.toLowerCase().indexOf(i.toLowerCase())>=0,style:{width:"100%"},placeholder:t.placeholder||"Chọn đơn vị",allowClear:!0,treeDefaultExpandAll:!0,treeData:t==null?void 0:t.dataSelect},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:214,columnNumber:13},void 0):k?e.jsxDEV(Ne,{className:"w-full",format:Y.DayJSStandard},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:232,columnNumber:11},void 0):p?e.jsxDEV(be,{className:"w-full",min:0,suffix:x},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:234,columnNumber:11},void 0):g?e.jsxDEV(ve,{placeholder:"Tỉnh/TP, Quận/huyện, Phường/xã"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:236,columnNumber:11},void 0):c?e.jsxDEV(we,{onSelect:z,onSearch:i=>m(j(i)),options:y},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:238,columnNumber:11},void 0):S?e.jsxDEV(de,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:244,columnNumber:11},void 0):w?e.jsxDEV(e.Fragment,{children:a==="is_enable"?e.jsxDEV(K.Group,{children:[e.jsxDEV(K,{value:!0,children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:249,columnNumber:17},void 0),e.jsxDEV(K,{value:!1,children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:250,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:248,columnNumber:15},void 0):e.jsxDEV(K.Group,{children:[e.jsxDEV(K,{value:!0,children:"Có"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:254,columnNumber:17},void 0),e.jsxDEV(K,{value:!1,children:"Không"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:255,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:253,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:246,columnNumber:11},void 0):e.jsxDEV(F,{placeholder:N,disabled:u},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:260,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:180,columnNumber:7},void 0)}return e.jsxDEV("div",{className:"flex flex-col gap-[10px]",children:[e.jsxDEV("p",{className:"font-bold text-sm",children:r},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:267,columnNumber:7},void 0),w?e.jsxDEV(e.Fragment,{children:a==="is_enable"?s?e.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:275,columnNumber:15},void 0):e.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:277,columnNumber:15},void 0):s?e.jsxDEV("span",{className:"text-green-600",children:"Có"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:280,columnNumber:13},void 0):e.jsxDEV("span",{className:"text-red",children:"Không"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:282,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:272,columnNumber:9},void 0):e.jsxDEV(e.Fragment,{children:a==="ward_id"?me(s):a==="used_at"||a==="repair_at"?Q(s).format(Y.DayJSStandard):a==="is_offical"?ue[s]:a==="level"?fe[s]:a==="major_categories"?V():e.jsxDEV("p",{className:"text-sm font-normal",children:s!=null&&s.name?s.name:(s==null?void 0:s.name)===null?"":s},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:300,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:287,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/components/ItemsComponent.tsx",lineNumber:266,columnNumber:5},void 0)},Ve=De;export{Ve as I};
