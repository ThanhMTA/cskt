import{t as h,v as k,w as y,x as C,r as u,j as s,k as P,q as S,F as E,y as i,cz as A,E as D,B as w,W as V,G as I}from"./index-DXrCg2vr.js";import{c as j,u as K,r as F,g as M,m as _}from"./PoleType.action-pQFvgwE5.js";import{M as L}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as T}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const U=({action:n,detail:o})=>{const[d]=h.useForm(),r=k(),b=y(),{openMessage:l}=C(),p=u.useMemo(()=>[{title:"Tên loại cột",content:(o==null?void 0:o.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:"Mô tả",content:(o==null?void 0:o.desc)||null,dataIndex:"desc"},{title:"Số thứ tự",content:(o==null?void 0:o.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(o==null?void 0:o.is_enable)===void 0?!0:o==null?void 0:o.is_enable,dataIndex:"is_enable"}],[o]),c=async()=>{try{r.show();const e=d.getFieldsValue();switch(n){case i.Update:await K(o==null?void 0:o.id,e),l({type:"success",content:"Cập nhật thành công"});break;case i.Create:await j(e),l({type:"success",content:"Thêm mới thành công"}),d.resetFields();break;case i.View:break}f()}catch(e){console.log(e),l({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),r.hide()}},g=()=>{if(n===i.View){f();return}else d.submit()},f=()=>{r.hide(),b.closeModal({success:!0})},N=async()=>{try{await F(o==null?void 0:o.id),l({type:"success",content:"Xóa thành công"}),f()}catch(e){console.log(e),l({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}};return s.jsxDEV(P,{...S,className:"flex",size:20,children:[s.jsxDEV(E,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:s.jsxDEV(L,{name:"loại cột",action:n,hanldeFinish:g,handleDelete:N},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:129,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:124,columnNumber:7},void 0),s.jsxDEV(h,{form:d,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:c,disabled:n===i.View,children:n===i.Update||n===i.Create?s.jsxDEV(s.Fragment,{children:p.map((e,t)=>s.jsxDEV(T,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:e.dataIndex==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},t,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:170,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:167,columnNumber:11},void 0):s.jsxDEV(s.Fragment,{children:p.map((e,t)=>s.jsxDEV("div",{className:"flex flex-col pb-4",children:s.jsxDEV(T,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},t,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:193,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:192,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:189,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:131,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/PoleTypeAction.tsx",lineNumber:119,columnNumber:5},void 0)},x=U,q=[{title:"Tên loại cột",dataIndex:"name",fixed:"left",width:300,key:w.Name},{title:"Mô tả",dataIndex:"desc",width:200}].map(n=>({...n,key:(n==null?void 0:n.key)||V()})),R=[{key:i.View,icon:s.jsxDEV(I,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/PoleType.tsx",lineNumber:39,columnNumber:11},void 0),tooltip:"Chi tiết"}];function $(){const{openModal:n}=y(),[o,d]=u.useState([]),[r,b]=u.useState({count:0}),[l,p]=u.useState(!1),c=u.useRef({...A}),g=async(t,a)=>{try{p(!0);const m=await Promise.all([await M({limit:a,page:t},{}),await _({})]);d(m[0]),b(m[1]),p(!1)}catch{p(!1)}},f=(t,a)=>{console.log(t),t===i.View&&N(a)},N=t=>{n(s.jsxDEV(x,{detail:t,action:i.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/PoleType.tsx",lineNumber:82,columnNumber:7},this),{width:"40vw",onModalClose(a){a!=null&&a.success&&n(s.jsxDEV(x,{detail:t,action:i.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/PoleType.tsx",lineNumber:88,columnNumber:15},this),{width:"40vw",onModalClose(m){m!=null&&m.success&&e()}})}})},e=()=>{g(c.current.current,c.current.pageSize)};return u.useEffect(()=>{g(c.current.current,c.current.pageSize)},[]),s.jsxDEV("div",{className:"w-[900px]",children:s.jsxDEV(D,{total:(r==null?void 0:r.count)||0,className:"mt-5",isReloadButton:!1,dataSource:o,columns:q,actionList:R,isAction:!0,loading:l,paginationCustom:{...c.current,total:r==null?void 0:r.count},onChange:({current:t,pageSize:a})=>{c.current={current:t,pageSize:a},g(t,a)},actionClick:f,filterColumns:[w.Name],btnCreate:!0,handleCreate:()=>{n(s.jsxDEV(x,{action:i.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/PoleType.tsx",lineNumber:145,columnNumber:13},this),{width:"40vw",onModalClose(t){t!=null&&t.success&&e()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/PoleType.tsx",lineNumber:120,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/PoleType.tsx",lineNumber:119,columnNumber:5},this)}export{R as ACTION_TABLE,$ as default};
