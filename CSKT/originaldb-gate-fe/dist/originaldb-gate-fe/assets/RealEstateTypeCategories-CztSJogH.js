import{e as R,J as _,O as V,Q as j,R as K,t as C,v as A,w as S,x as I,r as g,j as t,k as F,q as M,F as L,y as i,z as q,B as k,E as P,G as z}from"./index-DXrCg2vr.js";import{M as U}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as w}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const B=(s,o)=>R("real_estate_type_categories",{...s,fields:["*"],filter:o,sort:["order_number"]}),O=async s=>{var r;return{count:(r=(await _("real_estate_type_categories",{aggregate:{countDistinct:"id"},query:{filter:s}}))[0].countDistinct)==null?void 0:r.id}},G=s=>V("real_estate_type_categories",{...s}),H=(s,o)=>j("real_estate_type_categories",s,{...o}),J=s=>K("real_estate_type_categories",s);function T({detail:s,action:o}){const[r]=C.useForm(),n=A(),p=S(),{openMessage:l}=I(),h=async()=>{try{n.show();const e=r.getFieldsValue();switch(o){case i.Update:await H(s==null?void 0:s.id,e),l({type:"success",content:"Cập nhật thành công"});break;case i.Create:await G(e),l({type:"success",content:"Thêm mới thành công"}),r.resetFields();break;case i.View:break}b()}catch(e){console.log(e),l({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),n.hide()}},u=async()=>{try{await J(s==null?void 0:s.id),l({type:"success",content:"Xóa thành công"}),n.hide(),p.closeModal({})}catch(e){console.log(e),l({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},N=()=>{if(o===i.View){b();return}else r.submit()},b=()=>{n.hide(),p.closeModal({success:!0})},d=g.useMemo(()=>[{title:"Tên loại nhà",content:(s==null?void 0:s.name)||null,require:!0,dataIndex:"name",fixed:"left",rules:[{required:!0,message:"Thông tin không được để trống."}]},{title:"Số thứ tự",content:(s==null?void 0:s.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]);return t.jsxDEV(F,{...M,className:"flex",size:20,children:[t.jsxDEV(L,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:t.jsxDEV(U,{name:"loại nhà",action:o,hanldeFinish:N,handleDelete:u},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:128,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:123,columnNumber:13},this),t.jsxDEV(C,{form:r,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:o===i.View,onFinish:h,children:o===i.Update||o===i.Create?t.jsxDEV(t.Fragment,{children:d.map((e,m)=>t.jsxDEV(w,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable",dataIndex:e.dataIndex},m,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:140,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:137,columnNumber:21},this):t.jsxDEV(t.Fragment,{children:d.map((e,m)=>t.jsxDEV("div",{className:"flex flex-col pb-4",children:t.jsxDEV(w,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},m,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:159,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:158,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:155,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:130,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/RealEstateTypeAction.tsx",lineNumber:118,columnNumber:9},this)}const Q=[{key:i.View,icon:t.jsxDEV(z,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:20,columnNumber:15},void 0),tooltip:"Chi tiết"}];function ee(){const{openModal:s}=S(),[o,r]=g.useState({}),[n,p]=g.useState({page:1,pageSize:q}),[l,h]=g.useState([]),[u,N]=g.useState({count:0}),[b,d]=g.useState(!1),e=[{title:"Tên",dataIndex:"name",fixed:"left",key:k.Name,render:(a,c)=>t.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>E(i.View,c),children:a??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:40,columnNumber:21},this)},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:a=>a?t.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:54,columnNumber:31},this):t.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:54,columnNumber:83},this)}],m=async(a,c,y)=>{try{d(!0);const f=await Promise.all([B({limit:c,page:a},y),O(y)]);f[1]&&N({count:f[1].count}),h(f[0]),d(!1)}catch(f){d(!1),console.log(f)}},D=a=>{s(t.jsxDEV(T,{detail:a,action:i.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:76,columnNumber:13},this),{width:"40vw",onModalClose(c){c!=null&&c.success?s(t.jsxDEV(T,{detail:a,action:i.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:82,columnNumber:29},this),{width:"40vw",onModalClose(){x()}}):x()}})},E=(a,c)=>{console.log(a),a===i.View&&D(c)},x=()=>{m(n.page,n.pageSize,o)};return g.useEffect(()=>{m(n.page,n.pageSize,o)},[n,o]),t.jsxDEV("div",{className:"w-[900px]",children:t.jsxDEV(P,{className:"mt-5",setFilter:r,setPagination:p,isReloadButton:!0,dataSource:[...l],columns:e,paginationCustom:{current:n.page,pageSize:n.pageSize,total:u==null?void 0:u.count},onChange:({current:a,pageSize:c})=>{p({page:a,pageSize:c}),m(a,c,o)},actionList:Q,actionClick:E,isAction:!1,loading:b,rowKey:"id",filterColumns:[k.Name],btnCreate:!0,handleCreate:()=>{s(t.jsxDEV(T,{action:i.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:138,columnNumber:21},this),{width:"40vw",onModalClose(a){a!=null&&a.success&&x()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:111,columnNumber:9},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/RealEstateTypeCategories.tsx",lineNumber:110,columnNumber:12},this)}export{ee as default};
