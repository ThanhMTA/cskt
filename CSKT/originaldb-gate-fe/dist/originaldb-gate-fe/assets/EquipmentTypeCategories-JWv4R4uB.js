import{e as D,J as V,O as _,Q as j,R as K,t as C,v as A,w as q,x as I,r as g,j as s,k as F,q as M,F as L,y as n,z as P,B as k,E as z,G as U}from"./index-DXrCg2vr.js";import{M as R}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as w}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const B=(t,o)=>D("equipment_type_categories",{...t,fields:["*"],filter:o,sort:["order_number"]}),O=async t=>{var c;return{count:(c=(await V("equipment_type_categories",{aggregate:{countDistinct:"id"},query:{filter:t}}))[0].countDistinct)==null?void 0:c.id}},G=t=>_("equipment_type_categories",{...t}),H=(t,o)=>j("equipment_type_categories",t,{...o}),J=t=>K("equipment_type_categories",t);function T({detail:t,action:o}){const[c]=C.useForm(),p=A(),f=q(),{openMessage:r}=I(),h=async()=>{try{p.show();const e=c.getFieldsValue();switch(o){case n.Update:await H(t==null?void 0:t.id,e),r({type:"success",content:"Cập nhật thành công"});break;case n.Create:await G(e),r({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case n.View:break}m()}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),p.hide()}},N=async()=>{try{await J(t==null?void 0:t.id),r({type:"success",content:"Xóa thành công"}),p.hide(),f.closeModal({})}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},d=()=>{if(o===n.View){m();return}else c.submit()},m=()=>{p.hide(),f.closeModal({success:!0})},b=g.useMemo(()=>[{title:"Tên loại vật chất",content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",fixed:"left",rules:[{required:!0,message:"Thông tin không được để trống."}]},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]);return s.jsxDEV(F,{...M,className:"flex",size:20,children:[s.jsxDEV(L,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:s.jsxDEV(R,{name:"loại vật chất",action:o,hanldeFinish:d,handleDelete:N},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:124,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:119,columnNumber:13},this),s.jsxDEV(C,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:o===n.View,onFinish:h,children:o===n.Update||o===n.Create?s.jsxDEV(s.Fragment,{children:b.map((e,l)=>s.jsxDEV(w,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable",dataIndex:e.dataIndex},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:136,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:133,columnNumber:21},this):s.jsxDEV(s.Fragment,{children:b.map((e,l)=>s.jsxDEV("div",{className:"flex flex-col pb-4",children:s.jsxDEV(w,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:155,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:154,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:151,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:126,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/components/EquipmentTypeAction.tsx",lineNumber:114,columnNumber:9},this)}const Q=[{key:n.View,icon:s.jsxDEV(U,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:18,columnNumber:15},void 0),tooltip:"Chi tiết"}];function ee(){const{openModal:t}=q(),[o,c]=g.useState({page:1,pageSize:P}),[p,f]=g.useState([]),[r,h]=g.useState({count:0}),[N,d]=g.useState(!1),[m,b]=g.useState({}),e=[{title:"Tên",dataIndex:"name",fixed:"left",key:k.Name,render:(i,a)=>s.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>E(n.View,a),children:i??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:40,columnNumber:21},this)},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:i=>i?s.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:54,columnNumber:31},this):s.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:54,columnNumber:83},this)}],l=async(i,a,y)=>{try{d(!0);const u=await Promise.all([B({limit:a,page:i},y),O(y)]);u[1]&&h({count:u[1].count}),f(u[0]),d(!1)}catch(u){d(!1),console.log(u)}},S=i=>{t(s.jsxDEV(T,{detail:i,action:n.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:76,columnNumber:13},this),{width:"40vw",onModalClose(a){a!=null&&a.success?t(s.jsxDEV(T,{detail:i,action:n.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:82,columnNumber:29},this),{width:"40vw",onModalClose(){x()}}):x()}})},E=(i,a)=>{console.log(i),i===n.View&&S(a)},x=()=>{l(o.page,o.pageSize,m)};return g.useEffect(()=>{l(1,o.pageSize,m)},[m]),s.jsxDEV("div",{className:"w-[900px]",children:s.jsxDEV(z,{className:"mt-5",isReloadButton:!0,setFilter:b,setPagination:c,dataSource:[...p],columns:e,paginationCustom:{current:o.page,pageSize:o.pageSize,total:r==null?void 0:r.count},onChange:({current:i,pageSize:a})=>{c({page:i,pageSize:a}),l(i,a,m)},actionList:Q,actionClick:E,isAction:!1,loading:N,rowKey:"id",filterColumns:[k.Name],btnCreate:!0,handleCreate:()=>{t(s.jsxDEV(T,{action:n.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:137,columnNumber:21},this),{width:"40vw",onModalClose(i){i!=null&&i.success&&x()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:110,columnNumber:9},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/logistics-categories/pages/EquipmentTypeCategories.tsx",lineNumber:109,columnNumber:12},this)}export{ee as default};
