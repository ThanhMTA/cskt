import{e as V,J as M,O as j,Q as y,R as L,t as T,x as F,v as K,w as R,r as l,aH as O,j as o,k as q,q as B,F as U,y as a,z,B as w,W as P,E as Q,G as H}from"./index-DXrCg2vr.js";import{M as X}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const x="rank_categories",G=(t,s)=>V(x,{...t,fields:["*"],filter:s}),J=async t=>{var i;return{count:(i=(await M(x,{aggregate:{countDistinct:"id"},query:{filter:t}}))[0].countDistinct)==null?void 0:i.id}},W=t=>j(x,{...t}),Z=(t,s)=>y(x,t,{...s}),$=t=>L(x,t);var p=(t=>(t.Name="name",t.ShortName="short_name",t.Code="code",t.Code_ex="code_ex",t.Id_ex="id_ex",t))(p||{});const Y=({action:t,detail:s})=>{const[i]=T.useForm(),{openMessage:c}=F(),f=K(),N=R(),b=async()=>{try{f.show();const e=i.getFieldsValue();switch(t){case a.Update:await Z(s==null?void 0:s.id,e),c({type:"success",content:"Cập nhật thành công"});break;case a.Create:await W(e),c({type:"success",content:"Thêm mới thành công"}),i.resetFields();break;case a.View:break}d()}catch(e){console.log(e),c({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),f.hide()}},m=async()=>{try{await $(s==null?void 0:s.id),c({type:"success",content:"Xóa cấp bậc thành công"}),f.hide(),N.closeModal({})}catch(e){console.log(e),c({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},k=()=>{if(t===a.View){d();return}else i.submit()},d=()=>{f.hide(),N.closeModal({success:!0})},h=l.useMemo(()=>[{title:"Tên cấp bậc",content:(s==null?void 0:s.name)??null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:"Tên tắt cấp bậc",content:(s==null?void 0:s.short_name)??null,dataIndex:"short_name"},{title:"Mã cấp bậc",content:(s==null?void 0:s.code)??null,dataIndex:"code"},{title:"Mã quốc gia mở rộng CSDL Quốc gia",content:(s==null?void 0:s.code_ex)??null,dataIndex:"code_ex"},{title:"Mã định danh mở rộng CSDL Quốc gia",content:(s==null?void 0:s.id_ex)??null,dataIndex:"id_ex"},{title:O.ORDER_NUMBER,content:(s==null?void 0:s.order_number)??null,dataIndex:"order_number"},{title:"Trạng thái",content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]);return o.jsxDEV(q,{...B,className:"flex",size:20,children:[o.jsxDEV(U,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:o.jsxDEV(X,{name:"cấp bậc",action:t,hanldeFinish:k,handleDelete:m},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:149,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:144,columnNumber:7},void 0),o.jsxDEV(T,{form:i,preserve:!1,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:b,disabled:t===a.View,children:t===a.Update||t===a.Create?o.jsxDEV(o.Fragment,{children:h.map((e,g)=>o.jsxDEV(I,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:162,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:159,columnNumber:11},void 0):o.jsxDEV(o.Fragment,{children:h.map((e,g)=>o.jsxDEV("div",{className:"flex flex-col pb-4",children:o.jsxDEV(I,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:182,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:181,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:178,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:151,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/RankCategoriesAction.tsx",lineNumber:139,columnNumber:5},void 0)},S=Y,u={NAME:"Tên cấp bậc",SHORT_NAME:"Tên viết tắt",CODE:"Mã cấp bậc",ID_EX:"Mã định danh mở rộng CSDL Quốc gia",CODE_EX:"Mã quốc gia mở rộng CSDL Quốc gia",IS_ENABLE:"Trạng thái"},v=[{key:a.View,icon:o.jsxDEV(H,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:23,columnNumber:11},void 0),tooltip:"Chi tiết"}];function ce(){const{openModal:t}=R(),[s,i]=l.useState([]),[c,f]=l.useState({count:0}),[N,b]=l.useState(!1),[m,k]=l.useState({page:1,pageSize:z}),[d,h]=l.useState({}),e=[{title:u.NAME,dataIndex:p.Name,key:w.Name,fixed:"left",render:(n,r)=>o.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>D(a.View,r),children:n??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:46,columnNumber:11},this)},{title:u.SHORT_NAME,dataIndex:p.ShortName,key:w.ShortName},{title:u.CODE,dataIndex:p.Code},{title:u.CODE_EX,dataIndex:p.Code_ex},{title:u.ID_EX,dataIndex:p.Id_ex},{title:u.IS_ENABLE,dataIndex:"is_enable",render:n=>n?o.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:75,columnNumber:41},this):o.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:75,columnNumber:93},this)}].map(n=>({...n,key:(n==null?void 0:n.key)||P()})),g=async(n,r,_)=>{try{b(!0);const C=await Promise.all([await G({limit:r,page:n},_),await J(_)]);i(C[0]),f(C[1]),b(!1)}catch(C){b(!1),console.log(C)}},D=(n,r)=>{n===a.View&&A(r)},A=n=>{t(o.jsxDEV(S,{detail:n,action:a.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:113,columnNumber:7},this),{width:"40vw",onModalClose(r){r!=null&&r.success?t(o.jsxDEV(S,{detail:n,action:a.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:119,columnNumber:15},this),{width:"40vw",onModalClose(){E()}}):E()}})},E=()=>{g(m.page,m.pageSize,d)};return l.useEffect(()=>{g(m.page,m.pageSize,d)},[m,d]),o.jsxDEV("div",{className:"w-[900px]",children:o.jsxDEV(Q,{total:(c==null?void 0:c.count)||0,setFilter:h,setPagination:k,className:"mt-5",isReloadButton:!1,dataSource:s,columns:e,paginationCustom:{current:m.page,pageSize:m.pageSize,total:c==null?void 0:c.count},onChange:({current:n,pageSize:r})=>{k({page:n,pageSize:r}),g(n,r,d)},x:1300,actionList:v,isAction:!1,loading:N,actionClick:D,filterColumns:[w.Name],btnCreate:!0,handleCreate:()=>{t(o.jsxDEV(S,{action:a.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:172,columnNumber:13},this),{width:"40vw",onModalClose(n){n!=null&&n.success&&E()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:144,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/RankCategories.tsx",lineNumber:143,columnNumber:5},this)}export{v as ACTION_TABLE,ce as default};
