import{h as ge,t as w,w as Z,x as re,b7 as de,aO as he,r as l,j as e,S as Ke,bo as me,bp as X,ax as $,cS as ee,y as Q,V as _e,cT as Ae,bv as Oe,bw as Ie,be as Ne,v as pe,F as Te,W as B,cU as xe,k as ue,I as q,l as te,D as ne,cV as Re,aQ as Be,E as W,cM as ke,aI as ve,aT as Me,b4 as we,B as Ce,cW as Le,cX as Pe,cY as qe,cZ as Fe,c_ as $e,e as Ye,b8 as Ue,c$ as Ge,d0 as Qe,d1 as He,q as Xe,P as Je,L as We,d2 as Ze,aG as en,cA as ce}from"./index-DXrCg2vr.js";import{T as nn,Q as Se}from"./TechnicalAssuranceAction-B92NWFgC.js";import{P as fe}from"./index-B0_H1u92.js";import{a as le}from"./index-CVNl55UD.js";import{T as ie}from"./TBVTCategories.enum-rX2XZBOr.js";import{I as ae}from"./index-Bb5KQ1O1.js";import{P as Ee}from"./PlusCircleOutlined-JzIS5LvP.js";import"./ItemsComponent-Ct2UsBCT.js";import"./index-CfEarsVi.js";import"./Ward.action-D2xWCgQ3.js";import"./MajorCategories.action-CtvpKwzh.js";import"./arrayToTree.min-Bpdh5Rxo.js";function an(){const g=ge(),[c]=w.useForm(),{openModal:a}=Z(),{openMessage:D}=re(),x=de(),K=he(),{tab:d=""}=K.state||{},{id:N}=x,[_,m]=l.useState(!1),[i,z]=l.useState(),I=async()=>{try{m(!0);const t=await ee(N,{});z(t),m(!1)}catch(t){console.log(t),m(!1)}},A=l.useMemo(()=>[{title:"Tên cơ sở kỹ thuật",content:(i==null?void 0:i.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:"Ký hiệu",content:(i==null?void 0:i.code)||null,require:!1,dataIndex:"code"},{title:"Địa giới hành chính",content:(i==null?void 0:i.ward_id)||null,require:!0,dataIndex:"ward_id",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:"Số nhà, tên đường",content:(i==null?void 0:i.address)||null,require:!1,dataIndex:"address"},{title:"Đơn vị quản lý",content:(i==null?void 0:i.org_manage_id)||null,require:!1,dataIndex:"org_manage_id"},{title:"Loại hình cơ sở kỹ thuật",content:(i==null?void 0:i.type_id)||null,require:!1,dataIndex:"type_id"},{title:"Phân cấp",content:(i==null?void 0:i.level)||null,require:!1,dataIndex:"level"},{title:"Chuyên ngành",content:(i==null?void 0:i.major_id)||null,require:!1,dataIndex:"major_id"},{title:"Hình thức",content:i==null?void 0:i.is_offical,require:!0,dataIndex:"is_offical",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:"Đơn vị tính",content:(i==null?void 0:i.dvt)||null,require:!1,dataIndex:"dvt"},{title:"Phương tiện cơ động",content:(i==null?void 0:i.transport)||null,require:!1,dataIndex:"transport"},{title:"Ghi chú",content:(i==null?void 0:i.note)||null,require:!1,dataIndex:"note"}],[i]),R=(t,b,n)=>{var u;let s="";switch(t){case"ward_id":s=[(u=n.find(o=>(o==null?void 0:o.dataIndex)==="address"))==null?void 0:u.content,_e(b)].filter(Boolean).join(", ");break;case"level":s=Ie[b];break;case"is_offical":s=Oe[b];break;default:s=b!=null&&b.name?b.name:b;break}return s},j=async()=>{try{await Ae(N),D({type:"success",content:"Xoá thành công"}),g("/quan-ly-cskt",{state:{tab:d}})}catch(t){console.log("error: ",t)}};return l.useEffect(()=>{N&&I()},[N]),e.jsxDEV(w,{form:c,initialValues:{},labelCol:{span:24},onValuesChange:()=>{},children:_?e.jsxDEV(Ke,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:172,columnNumber:26},this):e.jsxDEV("div",{children:e.jsxDEV("div",{className:"flex flex-row pt-1.5",children:e.jsxDEV("div",{className:"flex-col gap-0 bg-white py-2 px-3 flex-1 overflow-auto",children:[e.jsxDEV("div",{className:"flex justify-end",children:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV(fe,{title:me.DELETE,onConfirm:async()=>{j()},okText:X.CORRECT,cancelText:X.NO,children:e.jsxDEV($,{size:"small",className:"rounded bg-white border-red w-[100px]",type:"primary",onClick:()=>{},children:e.jsxDEV("span",{className:"text-red",children:"Xoá"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:192,columnNumber:45},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:186,columnNumber:41},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:178,columnNumber:37},this),e.jsxDEV($,{size:"small",className:"rounded w-[100px]",type:"primary",onClick:async()=>{const t=await ee(N,{});t&&a(e.jsxDEV(nn,{action:Q.Update,modalType:d,detail:t},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:204,columnNumber:53},this),{width:"55vw",onModalClose(b){b!=null&&b.success&&I()}})},children:e.jsxDEV("span",{className:"text-white",children:"Chỉnh sửa"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:216,columnNumber:41},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:196,columnNumber:37},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:177,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:176,columnNumber:29},this),e.jsxDEV("div",{className:"grid-cols-1 grid gap-y-5 gap-x-4",children:A.map((t,b)=>t.dataIndex==="address"?null:e.jsxDEV("div",{className:"grid grid-cols-[15%_85%] flex-row gap-2",children:[e.jsxDEV("span",{children:[t.title,":"]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:226,columnNumber:45},this),R(t==null?void 0:t.dataIndex,t==null?void 0:t.content,A)]},b.toString(),!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:225,columnNumber:41},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:221,columnNumber:29},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:175,columnNumber:25},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:174,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:173,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/InformationGeneral.tsx",lineNumber:166,columnNumber:9},this)}const De=Ne.createContext(null),tn=({index:g,...c})=>{const[a]=w.useForm();return e.jsxDEV(w,{form:a,component:!1,children:e.jsxDEV(De.Provider,{value:a,children:e.jsxDEV("tr",{...c},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:51,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:50,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:49,columnNumber:9},void 0)},ln=({children:g,placeholder:c,dataIndex:a,editable:D,isEdittingAmount:x,isEdittingSerial:K,isEdittingManufacturingYear:d,isEdittingQuality:N,isEdittingTimeOfRepair:_,isEdittingNote:m,setEditingRowSerial:i,setEditingRowAmount:z,setEditingRowManufacturingYear:I,setEditingRowQuality:A,setEditingRowTimeOfRepair:R,setEditingRowNote:j,record:t,handleSave:b,setEdit:n,recordId:s,...u})=>{const o=l.useContext(De),h=l.useRef(null);l.useEffect(()=>{var C;(C=h==null?void 0:h.current)==null||C.focus(),o.setFieldValue(a,(t==null?void 0:t[a])||"")},[x,K,o,t,h,a]);const k=async()=>{try{const C=await o.validateFields();b(C,t)}catch(C){console.log("Save failed:",C)}},O=()=>{z(null),i(null),I(null),A(null),R(null),j(null)};let V=g;return D&&(V=e.jsxDEV("div",{className:"items-center justify-start h-5 cursor-pointer flex",style:{paddingRight:24},onClick:()=>n(s),children:g},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:131,columnNumber:17},void 0),x&&a==="amount"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(ae,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:k},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:144,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:143,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:142,columnNumber:21},void 0)),K&&a==="serial_number"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(q,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:k},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:160,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:159,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:158,columnNumber:21},void 0)),_&&a==="time_of_repair"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(ae,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:k},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:176,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:175,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:174,columnNumber:21},void 0)),d&&a==="manufacturing_year"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(q,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:()=>{k(),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:192,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:191,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:190,columnNumber:21},void 0)),m&&a==="note"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(q,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:()=>{k(),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:211,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:210,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:209,columnNumber:21},void 0)),N&&a==="quality"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(we,{className:"flex w-full",size:"small",placeholder:c,ref:h,options:Se,onChange:k},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:230,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:229,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:228,columnNumber:21},void 0))),e.jsxDEV("td",{...u,children:V},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:243,columnNumber:16},void 0)},ze=(g=[],c=[])=>g.map(({children:a,...D})=>({...D,disabled:c.includes(D.key),children:ze(a,c)})),on=g=>{const{isLoading:c,setIsLoading:a,dataSource:D=[],data:x=[],setDataSource:K,targetKeys:d,setTargetKeys:N,setSearch:_}=g,m={body:{row:tn,cell:ln}},[i,z]=l.useState(null),[I,A]=l.useState(null),[R,j]=l.useState(null),[t,b]=l.useState(null),[n,s]=l.useState(null),[u,o]=l.useState(null),[h,k]=l.useState([]),[O,V]=l.useState(!1),C=[{title:"Tên dụng cụ, phương tiện đo",dataIndex:"name",key:B(),fixed:"left",width:"20%",render:(p,v)=>e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-extrabold block",children:v.code},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:300,columnNumber:25},void 0),e.jsxDEV("div",{className:" text-gray-700",children:[v.name,v.unit?` (${v.unit})`:""]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:301,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:299,columnNumber:21},void 0)},{title:e.jsxDEV("p",{className:"font-bold",children:"Số lượng"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:307,columnNumber:20},void 0),dataIndex:"amount",placeholder:"Nhập số lượng",editable:!0,key:B(),width:"5%",render:p=>Math.round(p*100)/100||0},{title:e.jsxDEV("p",{className:"font-bold",children:"Serial number"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:316,columnNumber:20},void 0),dataIndex:"serial_number",placeholder:"Nhập serial number",editable:!0,width:"10%",key:B()},{title:e.jsxDEV("p",{className:"font-bold",children:"Năm sản suất"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:324,columnNumber:20},void 0),dataIndex:"manufacturing_year",placeholder:"Năm sản xuất",editable:!0,width:"10%",key:B()},{title:e.jsxDEV("p",{className:"font-bold",children:"Cấp chất lượng"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:332,columnNumber:20},void 0),dataIndex:"quality",placeholder:"Chọn cấp",width:"10%",editable:!0,key:B()},{title:e.jsxDEV("p",{className:"font-bold",children:"Số lần sửa chữa"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:340,columnNumber:20},void 0),dataIndex:"time_of_repair",placeholder:"Số lần sửa chữa",editable:!0,width:"10%",key:B()},{title:e.jsxDEV("p",{className:"font-bold",children:"Ghi chú"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:348,columnNumber:20},void 0),dataIndex:"note",placeholder:"Ghi chú",editable:!0,key:B()},{title:"",key:xe.Action,fixed:"right",width:"5%",render:(p,v)=>e.jsxDEV("div",{className:"group min-w-full flex items-center justify-center h-[23px]",children:e.jsxDEV(ue,{size:"middle",className:"flex-row hidden group-hover:flex gap-2",children:[e.jsxDEV(fe,{title:me.DELETE,onConfirm:()=>{const M=[...d];(M==null?void 0:M.filter(S=>S.key===v.key).length)===1&&k(M.filter(S=>S.key!==v.key)),N(M.filter(S=>S.id!==v.id))},okText:X.CORRECT,cancelText:X.NO,children:e.jsxDEV($,{htmlType:"button",size:"small",className:"px-1 button-icon",children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:378,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:374,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:362,columnNumber:25},void 0),e.jsxDEV($,{htmlType:"button",size:"small",onClick:()=>{const M=[...d],S=M.findIndex(f=>f.id===v.id),r=[...M.slice(0,S+1),{...v,id:B(),amount:1,serial_number:null,manufacturing_year:null,time_of_repair:null,note:null},...M.slice(S+1)];N(r)},className:"px-1 button-icon",children:e.jsxDEV(Ee,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:405,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:382,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:361,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:360,columnNumber:17},void 0)}],H=(p,v)=>{var r,f,y,E,L,T;const M={...v,...p},S=d.findIndex(Y=>v.id===Y.id);d[S]={...M},N([...d]),S!==(d==null?void 0:d.length)-1?Object.keys(p)[0]==="amount"?A((r=d[S+1])==null?void 0:r.id):Object.keys(p)[0]==="serial_number"?z((f=d[S+1])==null?void 0:f.id):Object.keys(p)[0]==="manufacturing_year"?j((y=d[S+1])==null?void 0:y.id):Object.keys(p)[0]==="quality"?b((E=d[S+1])==null?void 0:E.id):Object.keys(p)[0]==="note"?o((L=d[S+1])==null?void 0:L.id):Object.keys(p)[0]==="time_of_repair"&&s((T=d[S+1])==null?void 0:T.id):(A(null),z(null),j(null),b(null),s(null),o(null))},F=C.map(p=>p.editable?{...p,onCell:v=>{const M={amount:A,serial_number:z,manufacturing_year:j,quality:b,time_of_repair:s,note:o},S=(r="")=>{Object.keys(M).forEach(f=>{M[f](p.dataIndex===f?r:null)})};return{record:v,editable:p.editable,dataIndex:p.dataIndex,placeholder:p.placeholder,isEdittingAmount:v.id===I,isEdittingSerial:v.id===i,isEdittingManufacturingYear:v.id===R,isEdittingQuality:v.id===t,isEdittingTimeOfRepair:v.id===n,isEdittingNote:v.id===u,title:p.title,handleSave:H,setEdit:S,setEditingRowAmount:A,setEditingRowSerial:z,setEditingRowManufacturingYear:j,setEditingRowQuality:b,setEditingRowTimeOfRepair:s,setEditingRowNote:o,recordId:v.id}}}:p),G=(p,{node:v})=>{const{children:M,...S}=v;N(r=>[...r,{...S,id:B(),amount:1,serial_number:null}]),k(r=>[...r,{...S,id:B(),amount:1,serial_number:null}])},J=async(p,v)=>{if(!D.some(S=>S.parent_id===p))try{const S={_and:[{type:{_in:[ie.VT,ie.TB2]}},{parent_id:p}]},r=await ve({limit:-1},S);K(f=>{const y=r.map(E=>{var L,T;return{...E,key:E.id,title:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-extrabold block",children:E.code},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:524,columnNumber:29},void 0),e.jsxDEV("div",{className:"-mt-2 text-gray-700",children:[E.name,E.unit?` (${E.unit})`:""]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:525,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:523,columnNumber:25},void 0),amount:((L=x==null?void 0:x.find(Y=>Y.key===E.id))==null?void 0:L.amount)||0,serial_number:((T=x==null?void 0:x.find(Y=>Y.key===E.id))==null?void 0:T.serial_number)||null}});return[...f,...y]})}catch{v()}finally{v()}},oe=({key:p})=>new Promise(v=>{J(p,v)});return l.useEffect(()=>{k(d)},[d]),e.jsxDEV("div",{className:"grid grid-cols-3 gap-3 w-full",children:[e.jsxDEV("div",{className:"col-span-1 flex-col rounded border ",children:[e.jsxDEV("div",{className:"flex p-2 items-center h-[50px] justify-between",children:[e.jsxDEV("span",{children:`Danh mục VTKT [${D.length}]`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:551,columnNumber:21},void 0),e.jsxDEV("div",{className:`transition-all duration-300 ${O?"w-[320px]":"w-[120px]"}`,children:e.jsxDEV("div",{children:e.jsxDEV(q,{className:"flex rounded-full border-[1px] py-1 border-solid border-gray-300 px-3 justify-center items-center transition-all duration-300",placeholder:"Tìm kiếm",suffix:e.jsxDEV(te,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:557,columnNumber:41},void 0),onFocus:()=>V(!0),onBlur:()=>{V(!1)},onPressEnter:p=>{p.preventDefault(),p.target.value.length>0?_(p.target.value):_(null)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:554,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:553,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:552,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:550,columnNumber:17},void 0),e.jsxDEV(ne,{className:"my-0"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:572,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex p-2 h-[500px] overflow-scroll",children:e.jsxDEV(Re,{blockNode:!0,defaultExpandAll:!0,checkable:!0,checkStrictly:!0,checkedKeys:h.map(p=>p.key),treeData:ze(Be(D),h.map(p=>p.key)),onCheck:G,onSelect:G,loadData:oe},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:574,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:573,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:549,columnNumber:13},void 0),e.jsxDEV("div",{className:"col-span-2 flex-col rounded border ",children:[e.jsxDEV("div",{className:"flex p-2 items-center h-[50px] justify-between",children:e.jsxDEV("span",{children:`Danh sách dụng cụ, phương tiện đo [${d.length}]`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:593,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:592,columnNumber:17},void 0),e.jsxDEV(ne,{className:"my-0"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:595,columnNumber:17},void 0),e.jsxDEV(W,{hiddenIndex:!0,components:m,columns:F,loading:c,dataSource:d,pagination:!1,size:"middle",x:1500,rowClassName:"hover:bg-secondary group",className:"flex cursor-pointer"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:596,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:591,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:548,columnNumber:9},void 0)},sn=({data:g,technical_org:c})=>{const a=pe(),D=Z(),{openMessage:x}=re(),[K,d]=l.useState([]),[N,_]=l.useState([]),[m,i]=l.useState(!1),[z,I]=l.useState(null),A=()=>{a.hide(),D.closeModal({success:!0})},R=async()=>{var t;try{if(N!=null&&N.some(n=>n.quality==null)){x({type:"warning",content:"Cấp chất lượng không được để trống!"});return}const b=N==null?void 0:N.map(n=>({tbvt_categories_id:n==null?void 0:n.key,amount:n==null?void 0:n.amount,serial_number:n==null?void 0:n.serial_number,manufacturing_year:n==null?void 0:n.manufacturing_year,note:n==null?void 0:n.note,quality:n==null?void 0:n.quality,time_of_repair:n==null?void 0:n.time_of_repair}));await ke((t=c==null?void 0:c.technical_id)==null?void 0:t.id,{tbvt_categories:b}),A()}catch(b){console.log("error: ",b)}},j=async()=>{try{i(!0);const t={_and:[{type:{_in:[ie.VT,ie.TB2]}},{parent_id:{_null:!0}}]};(z==null?void 0:z.length)>0&&t._and.push({name:{_icontains:z}});const b=await Promise.all([await ve({limit:-1},t),await Me(t)]);d(b[0].map(n=>{var s,u;return{...n,key:n.id,title:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-extrabold text-black block",children:n.code},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:690,columnNumber:25},void 0),e.jsxDEV("div",{className:"-mt-2 text-gray-700",children:[n.name,n.unit?` (${n.unit})`:""]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:691,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:689,columnNumber:21},void 0),amount:((s=g==null?void 0:g.find(o=>o.key===n.id))==null?void 0:s.amount)||0,serial_number:((u=g==null?void 0:g.find(o=>o.key===n.id))==null?void 0:u.serial_number)||null}})),i(!1)}catch(t){i(!1),console.log("error: ",t)}};return l.useEffect(()=>{j()},[z]),l.useEffect(()=>{_(g)},[g]),e.jsxDEV(Te,{align:"start",gap:"middle",vertical:!0,children:[e.jsxDEV("div",{className:"flex flex-row justify-between w-full items-center px-[10px]",children:[e.jsxDEV("p",{className:"modal-title",children:`Cập nhật danh sách dụng cụ phương tiện đo ${c==null?void 0:c.name}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:713,columnNumber:17},void 0),e.jsxDEV($,{className:"rounded px-[30px]",type:"primary",size:"small",onClick:R,children:e.jsxDEV("span",{children:"Lưu"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:715,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:714,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:712,columnNumber:13},void 0),e.jsxDEV(on,{data:g,dataSource:K,setDataSource:d,setSearch:I,targetKeys:N,setTargetKeys:_,isLoading:m,setIsLoading:i},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:718,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnicalAction.tsx",lineNumber:711,columnNumber:9},void 0)},cn=[{key:Q.Delete,icon:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:25,columnNumber:15},void 0)},{key:Q.Create,icon:e.jsxDEV(Ee,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:30,columnNumber:15},void 0)}],je=Ne.createContext(null),rn=({index:g,...c})=>{const[a]=w.useForm();return e.jsxDEV(w,{form:a,component:!1,children:e.jsxDEV(je.Provider,{value:a,children:e.jsxDEV("tr",{...c},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:45,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:44,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:43,columnNumber:9},void 0)},dn=({children:g,placeholder:c,dataIndex:a,editable:D,isEdittingAmount:x,isEdittingSerial:K,isEdittingManufacturingYear:d,isEdittingQuality:N,isEdittingTimeOfRepair:_,isEdittingNote:m,setEditingRowSerial:i,setEditingRowAmount:z,setEditingRowManufacturingYear:I,setEditingRowQuality:A,setEditingRowTimeOfRepair:R,setEditingRowNote:j,record:t,handleSave:b,setEdit:n,recordId:s,...u})=>{const o=l.useContext(je),h=l.useRef(null);l.useEffect(()=>{var C;(C=h==null?void 0:h.current)==null||C.focus(),o.setFieldValue(a,(t==null?void 0:t[a])||"")},[x,K,N,d,_,m,a,o,h,t]);const k=async C=>{var H;try{const F=((H=C==null?void 0:C.target)==null?void 0:H.value)??C;if(F&&(F.length>0||typeof F=="number")){const G=await o.validateFields();o.setFieldsValue({[a]:t[a]}),G[a]!==t[a]&&b(G,t)}}catch(F){console.log("Save failed:",F)}},O=()=>{z(null),i(null),I(null),A(null),R(null),j(null)};let V=g;return D&&(V=e.jsxDEV("div",{className:"items-center justify-start h-5 cursor-pointer flex",style:{paddingRight:24},onClick:()=>{n(s)},children:g},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:132,columnNumber:17},void 0),x&&a==="amount"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(ae,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:C=>{k(C),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:147,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:146,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:145,columnNumber:21},void 0)),_&&a==="time_of_repair"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(ae,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:C=>{k(C),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:166,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:165,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:164,columnNumber:21},void 0)),K&&a==="serial_number"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(q,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:C=>{k(C),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:185,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:184,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:183,columnNumber:21},void 0)),d&&a==="manufacturing_year"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(q,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:C=>{k(C),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:204,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:203,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:202,columnNumber:21},void 0)),m&&a==="note"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(q,{className:"flex w-full",size:"small",placeholder:c,ref:h,onPressEnter:k,onBlur:C=>{k(C),O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:223,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:222,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:221,columnNumber:21},void 0)),N&&a==="quality"&&(V=e.jsxDEV(w,{form:o,children:e.jsxDEV(w.Item,{style:{margin:0},name:a,children:e.jsxDEV(we,{className:"flex w-full",size:"small",placeholder:c,ref:h,options:Se,onChange:k},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:242,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:241,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:240,columnNumber:21},void 0))),e.jsxDEV("td",{...u,children:V},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:259,columnNumber:16},void 0)},mn=()=>{const{id:g}=de(),{openModal:c}=Z(),{openMessage:a}=re(),[D,x]=l.useState(!1),[K,d]=l.useState(!1),[N,_]=l.useState({count:0}),[m,i]=l.useState([]),[z,I]=l.useState(),[A,R]=l.useState(null),[j,t]=l.useState(null),[b,n]=l.useState(null),[s,u]=l.useState(null),[o,h]=l.useState(null),[k,O]=l.useState(null),[V,C]=l.useState(null),H=l.useMemo(()=>[{title:e.jsxDEV("p",{className:"font-bold text-center",children:"Dụng cụ phương tiện đo"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:290,columnNumber:28},void 0),dataIndex:"name",key:B(),fixed:"left",width:"20%",render:(r,f)=>e.jsxDEV(e.Fragment,{children:[f.code," ",e.jsxDEV("br",{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:298,columnNumber:47},void 0),f.name," (",f.unit,")"]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:297,columnNumber:29},void 0)},{title:e.jsxDEV("p",{className:"font-bold text-center",children:"Số lượng"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:305,columnNumber:24},void 0),dataIndex:"amount",placeholder:"Nhập số lượng",width:"10%",editable:!0,key:B(),render:r=>Math.round(r*100)/100||0},{title:e.jsxDEV("p",{className:"font-bold text-center",children:"Cấp CL"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:314,columnNumber:24},void 0),dataIndex:"quality",placeholder:"Chọn cấp",width:"80px",editable:!0,key:B()},{title:e.jsxDEV("p",{className:"font-bold text-center",children:"S/N"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:322,columnNumber:24},void 0),dataIndex:"serial_number",placeholder:"Nhập serial number",editable:!0,key:B()},{title:e.jsxDEV("p",{className:"font-bold text-center",children:"Năm SX"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:329,columnNumber:24},void 0),dataIndex:"manufacturing_year",placeholder:"Năm sản xuất",editable:!0,key:B()},{title:e.jsxDEV("p",{className:"font-bold text-center",children:"Số lần S/C"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:336,columnNumber:24},void 0),dataIndex:"time_of_repair",placeholder:"Số lần sửa chữa",editable:!0,key:B()},{title:e.jsxDEV("p",{className:"font-bold text-center",children:"Ghi chú"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:343,columnNumber:24},void 0),dataIndex:"note",placeholder:"Ghi chú",editable:!0,key:B()}],[]),F=()=>{c(e.jsxDEV(sn,{technical_org:z,data:m},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:356,columnNumber:13},void 0),{width:"90vw",onModalClose(){G()}})},G=()=>{J()},J=async()=>{var r,f;try{d(!0);let y;const E=await ee(g,{});E&&((V==null?void 0:V.length)>0?y={technical_org_id:{id:{_eq:(r=E==null?void 0:E.technical_id)==null?void 0:r.id}},tbvt_categories_id:{name:{_icontains:V}}}:y={technical_org_id:{id:{_eq:(f=E==null?void 0:E.technical_id)==null?void 0:f.id}}},I(E));const L=await Promise.all([Le({limit:-1},y),Pe(y)]);i(L[0].map(T=>({...T.tbvt_categories_id,technical_org_id:T.technical_org_id.id,id:B(),key:T.tbvt_categories_id.id,_id:T.id,serial_number:T==null?void 0:T.serial_number,amount:T==null?void 0:T.amount,manufacturing_year:T==null?void 0:T.manufacturing_year,quality:T==null?void 0:T.quality,note:T==null?void 0:T.note,time_of_repair:T==null?void 0:T.time_of_repair}))),_(L[1]),d(!1)}catch(y){console.log(y),d(!1)}},oe=async r=>{try{const f={...r,id:B(),serial_number:null,amount:1,note:null,time_of_repair:0};await $e({technical_org_id:r==null?void 0:r.technical_org_id,tbvt_categories_id:f.key,amount:1,time_of_repair:0,note:null,manufacturing_year:f==null?void 0:f.manufacturing_year,quality:f==null?void 0:f.quality,serial_number:null}),i(y=>{const E=y.findIndex(T=>T.id===r.id);return E===-1?y:[...y.slice(0,E+1),f,...y.slice(E+1)]}),_(y=>({...y,count:Number(y.count)+1}))}catch(f){console.log("error: ",f)}},p=async(r,f)=>{switch(r){case Q.Delete:await qe(f._id),J();break;case Q.Create:console.log("item: ",f),oe(f);break}},v=async(r,f)=>{var y,E,L,T,Y,be;try{await Fe(f._id,r);const se={...f,...r},U=m.findIndex(ye=>f.id===ye.id);m[U]={...se},i([...m]),U!==m.length-1?Object.keys(r)[0]==="amount"?t((y=m[U+1])==null?void 0:y.id):Object.keys(r)[0]==="serial_number"?R((E=m[U+1])==null?void 0:E.id):Object.keys(r)[0]==="manufacturing_year"?n((L=m[U+1])==null?void 0:L.id):Object.keys(r)[0]==="quality"?u((T=m[U+1])==null?void 0:T.id):Object.keys(r)[0]==="note"?O((Y=m[U+1])==null?void 0:Y.id):Object.keys(r)[0]==="time_of_repair"&&h((be=m[U+1])==null?void 0:be.id):(t(null),R(null),n(null),u(null),h(null),O(null)),a({type:"success",content:"Cập nhật thành công"})}catch(se){console.log("error: ",se)}},M={body:{row:rn,cell:dn}},S=H.map(r=>r.editable?{...r,onCell:f=>{const y={amount:t,serial_number:R,manufacturing_year:n,quality:u,time_of_repair:h,note:O},E=(L="")=>{Object.keys(y).forEach(T=>{y[T](r.dataIndex===T?L:null)})};return{record:f,editable:r.editable,dataIndex:r.dataIndex,placeholder:r.placeholder,isEdittingAmount:f.id===j,isEdittingSerial:f.id===A,isEdittingManufacturingYear:f.id===b,isEdittingQuality:f.id===s,isEdittingTimeOfRepair:f.id===o,isEdittingNote:f.id===k,title:r.title,handleSave:v,setEdit:E,setEditingRowAmount:t,setEditingRowSerial:R,setEditingRowManufacturingYear:n,setEditingRowQuality:u,setEditingRowTimeOfRepair:h,setEditingRowNote:O,recordId:f.id}}}:r);return l.useEffect(()=>{J()},[V,g]),e.jsxDEV("div",{className:"bg-[white] flex flex-col",children:[e.jsxDEV("div",{className:"flex flex-col pt-2 pr-2",children:e.jsxDEV("div",{className:"rounded bg-[white] flex items-center justify-end",children:e.jsxDEV("div",{className:"flex flex-row justify-between",children:[e.jsxDEV("div",{className:`transition-all duration-300 ${D?"w-[320px]":"w-[220px]"}`,children:e.jsxDEV("div",{children:e.jsxDEV(q,{className:"flex rounded-full border-[1px] py-1 border-solid border-gray-300 px-3 justify-center items-center transition-all duration-300",placeholder:"Tìm kiếm",suffix:e.jsxDEV(te,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:585,columnNumber:45},void 0),onFocus:()=>x(!0),onBlur:()=>{x(!1)},onPressEnter:r=>{r.preventDefault(),r.target.value.length>0?C(r.target.value):C(null)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:582,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:581,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:580,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex px-2",children:e.jsxDEV($,{size:"small",onClick:F,type:"primary",className:"rouned",children:e.jsxDEV("span",{children:"Thêm mới"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:605,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:600,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:599,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:579,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:578,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:577,columnNumber:13},void 0),e.jsxDEV(W,{components:M,columns:S,total:(N==null?void 0:N.count)||0,className:"flex w-[1180px]",rowClassName:"hover:bg-secondary group editable-row",actionWidth:90,scroll:{x:1500},isReloadButton:!0,dataSource:m,actionClick:p,actionList:cn,isAction:!0,loading:K,rowKey:"id",filterColumns:[Ce.Name],btnCreate:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:611,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TbvtTechnical.tsx",lineNumber:576,columnNumber:9},void 0)},un=mn,P={FULL_NAME:"Họ và tên",DATE_OF_JOIN_ARMY:"Nhập ngũ",RANK:"Cấp bậc",ORG:"Đơn vị",DEGREE:"Học vấn",MAJOR:"Chuyên ngành",TYPE:"Đối tượng",PHONE_NUMBER:"SĐT",POSITION:"Chức vụ"},fn="personal_identifies",Ve=(g,c)=>Ye(fn,{...g,fields:["*",{rank_id:["*"]},{position_id:["*"]},{org_id:["*"]},{degree_id:["*"]}],filter:c}),bn=g=>{const{isLoading:c,dataSource:a,targetKeys:D,setTargetKeys:x,setSearch:K}=g,[d,N]=l.useState([]),[_,m]=l.useState(!1),[i,z]=l.useState([]),I=[{title:P.FULL_NAME,dataIndex:"name"},{title:P.RANK,dataIndex:"rank_id",render:(n,s)=>{var u;return(u=s==null?void 0:s.rank_id)==null?void 0:u.name}},{title:P.POSITION,dataIndex:"position"}],A=l.useMemo(()=>I.map(n=>({...n,key:B()})),[]),R=[...I,{title:P.PHONE_NUMBER,dataIndex:"phone_number"},{title:"",key:xe.Action,fixed:"right",width:"5%",render:(n,s)=>e.jsxDEV("div",{className:"group min-w-full flex items-center justify-center h-[23px]",children:e.jsxDEV(ue,{size:"middle",className:"flex-row hidden group-hover:flex gap-2",children:e.jsxDEV(fe,{title:me.DELETE,onConfirm:()=>{const u=D.filter(o=>o!==s.key);x(u)},okText:X.CORRECT,cancelText:X.NO,children:e.jsxDEV($,{htmlType:"button",size:"small",className:"px-1 button-icon",children:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:98,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:94,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:85,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:84,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:83,columnNumber:17},void 0)}],j={selectedRowKeys:i,onChange:n=>{t(n)},getCheckboxProps:n=>({disabled:D.includes(n==null?void 0:n.key)})},t=n=>{const s=[...D],u=n.filter(o=>!s.includes(o));x([...s,...u])},b=async()=>{try{const n=await Promise.all([await Ve({limit:-1},{})]);N(n[0].map(s=>({...s,key:s.id})))}catch(n){console.log("error: ",n)}};return l.useEffect(()=>{b()},[]),e.jsxDEV("div",{className:"grid grid-cols-2 gap-2 w-full",children:[e.jsxDEV("div",{className:"flex-col rounded border ",children:[e.jsxDEV("div",{className:"flex p-2 items-center h-[50px] justify-between",children:[e.jsxDEV("span",{children:"Danh sách LLKT"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:143,columnNumber:21},void 0),e.jsxDEV("div",{className:`transition-all duration-300 ${_?"w-[320px]":"w-[120px]"}`,children:e.jsxDEV("div",{children:e.jsxDEV(q,{className:"flex rounded-full border-[1px] py-1 border-solid border-gray-300 px-3 justify-center items-center transition-all duration-300",placeholder:"Tìm kiếm",suffix:e.jsxDEV(te,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:149,columnNumber:41},void 0),onFocus:()=>m(!0),onBlur:()=>{m(!1)},onPressEnter:n=>{n.preventDefault(),n.target.value.length>0?K(n.target.value):K(null)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:146,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:145,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:144,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:142,columnNumber:17},void 0),e.jsxDEV(ne,{className:"my-0"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:164,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex p-2 h-[500px] overflow-scroll",children:e.jsxDEV(W,{rowSelection:{type:"checkbox",...j},columns:A,loading:c,dataSource:a,pagination:!1,size:"middle",rowClassName:"hover:bg-secondary group",className:"flex cursor-pointer"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:166,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:165,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:141,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex-col rounded border ",children:[e.jsxDEV("div",{className:"flex p-2 items-center h-[50px] justify-between",children:e.jsxDEV("span",{children:`Danh sách CB, NVCMKT  [${D.length}]`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:180,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:179,columnNumber:17},void 0),e.jsxDEV(ne,{className:"my-0"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:182,columnNumber:17},void 0),e.jsxDEV(W,{columns:R,loading:c,dataSource:d==null?void 0:d.filter(n=>D.includes(n.id)),pagination:!1,size:"middle",rowClassName:"hover:bg-secondary group",className:"flex cursor-pointer"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:183,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:178,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:140,columnNumber:9},void 0)},gn=({data:g,technical_org:c})=>{const a=pe(),D=Z(),[x,K]=l.useState([]),[d,N]=l.useState([]),[_,m]=l.useState(!1),[i,z]=l.useState(null),I=()=>{a.hide(),D.closeModal({success:!0})},A=async()=>{var j;try{const t=d==null?void 0:d.map(b=>({personal_identifies_id:b}));await ke((j=c==null?void 0:c.technical_id)==null?void 0:j.id,{personal_identifies:t}),I()}catch(t){console.log("error: ",t)}},R=async()=>{try{let j={_and:[]};(i==null?void 0:i.length)>0&&j._and.push({name:{_icontains:i}}),m(!0);const t=await Promise.all([await Ve({limit:-1},j)]);K(t[0].map((b,n)=>({...b,key:b.id}))),m(!1)}catch{m(!1)}};return l.useEffect(()=>{R()},[i]),l.useEffect(()=>{N(g==null?void 0:g.map(j=>j.key))},[g]),e.jsxDEV(Te,{align:"start",gap:"middle",vertical:!0,children:[e.jsxDEV("div",{className:"flex flex-row justify-between w-full items-center px-[10px]",children:[e.jsxDEV("p",{className:"modal-title",children:`Cập nhật danh sách CB, NVCMKT [${c==null?void 0:c.name}]`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:265,columnNumber:17},void 0),e.jsxDEV($,{className:"rounded px-[30px]",type:"primary",size:"small",onClick:A,children:e.jsxDEV("span",{children:"Lưu"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:267,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:266,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:264,columnNumber:13},void 0),e.jsxDEV(bn,{dataSource:x,setSearch:z,targetKeys:d,setTargetKeys:N,isLoading:_},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:270,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnicalAction.tsx",lineNumber:263,columnNumber:9},void 0)},hn="DD/MM/YYYY",Nn=[{key:Q.Delete,icon:e.jsxDEV(le,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:35,columnNumber:15},void 0),tooltip:"Xoá"}],pn=()=>{const{id:g}=de(),[c,a]=l.useState(!1),[D,x]=l.useState(!1),[K,d]=l.useState({count:0}),[N,_]=l.useState([]),[m,i]=l.useState(),[z,I]=l.useState(null),{openModal:A}=Z(),R=[{title:e.jsxDEV("p",{className:"font-bold",children:P.FULL_NAME},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:50,columnNumber:20},void 0),dataIndex:"name"},{title:e.jsxDEV("p",{className:"font-bold",children:P.DATE_OF_JOIN_ARMY},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:54,columnNumber:20},void 0),dataIndex:"date_of_join_army",render:s=>s?Ue(s).format(hn):""},{title:e.jsxDEV("p",{className:"font-bold",children:P.TYPE},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:60,columnNumber:20},void 0),dataIndex:"type_id",render:(s,u)=>{var o;return(o=u==null?void 0:u.type_id)==null?void 0:o.short_name}},{title:e.jsxDEV("p",{className:"font-bold",children:P.RANK},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:65,columnNumber:20},void 0),dataIndex:"rank_id",render:(s,u)=>{var o;return(o=u==null?void 0:u.rank_id)==null?void 0:o.name}},{title:e.jsxDEV("p",{className:"font-bold",children:P.ORG},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:71,columnNumber:20},void 0),dataIndex:"org_id",render:(s,u)=>{var o;return(o=u==null?void 0:u.org_id)==null?void 0:o.name}},{title:e.jsxDEV("p",{className:"font-bold",children:P.DEGREE},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:76,columnNumber:20},void 0),dataIndex:"degree_id",render:(s,u)=>{var o;return(o=u==null?void 0:u.degree_id)==null?void 0:o.short_name}},{title:e.jsxDEV("p",{className:"font-bold",children:P.MAJOR},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:81,columnNumber:20},void 0),dataIndex:"major_id"},{title:e.jsxDEV("p",{className:"font-bold",children:P.PHONE_NUMBER},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:85,columnNumber:20},void 0),dataIndex:"phone_number"}],j=()=>{A(e.jsxDEV(gn,{technical_org:m,data:N},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:91,columnNumber:13},void 0),{width:"90vw",onModalClose(s){s!=null&&s.success,b()}})},t=async(s,u)=>{switch(s){case Q.Delete:await Ge(u._id),n();break}},b=()=>{n()},n=async()=>{var s,u;try{x(!0);let o;const h=await ee(g,{});h&&((z==null?void 0:z.length)>0?o={technical_org_id:{id:{_eq:(s=h==null?void 0:h.technical_id)==null?void 0:s.id}},personal_identifies_id:{name:{_icontains:z}}}:o={technical_org_id:{id:{_eq:(u=h==null?void 0:h.technical_id)==null?void 0:u.id}}},i(h)),x(!0);const k=await Promise.all([Qe({limit:-1},o),He(o)]);_(k[0].map(O=>({...O.personal_identifies_id,key:O.personal_identifies_id.id,_id:O==null?void 0:O.id}))),d(k[1]),x(!1)}catch(o){console.log(o),x(!1)}};return l.useEffect(()=>{n()},[z,g]),e.jsxDEV("div",{className:"bg-[white] flex flex-col",children:[e.jsxDEV("div",{className:"flex flex-col p-2",children:e.jsxDEV("div",{className:"rounded bg-[white] flex items-center justify-end",children:e.jsxDEV("div",{className:"flex flex-row justify-between",children:[e.jsxDEV("div",{className:`transition-all duration-300 ${c?"w-[320px]":"w-[220px]"}`,children:e.jsxDEV("div",{children:e.jsxDEV(q,{className:"flex rounded-full border-[1px] py-1 border-solid border-gray-300 px-3 justify-center items-center transition-all duration-300",placeholder:"Tìm kiếm",suffix:e.jsxDEV(te,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:174,columnNumber:45},void 0),onFocus:()=>a(!0),onBlur:()=>{a(!1)},onPressEnter:s=>{s.preventDefault(),s.target.value.length>0?I(s.target.value):I(null)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:171,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:170,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:169,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex px-2",children:e.jsxDEV($,{size:"small",onClick:j,type:"primary",className:"rouned",children:e.jsxDEV("span",{children:"Thêm mới"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:194,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:189,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:188,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:168,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:167,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:166,columnNumber:13},void 0),e.jsxDEV("div",{className:"flex",children:e.jsxDEV(W,{total:(K==null?void 0:K.count)||0,isReloadButton:!0,dataSource:N,actionWidth:90,columns:R,rowClassName:"hover:bg-secondary group editable-row",actionClick:t,actionList:Nn,isAction:!0,loading:D,rowKey:"id",filterColumns:[Ce.Name],btnCreate:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:201,columnNumber:17},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:200,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/CbnvTechnical.tsx",lineNumber:165,columnNumber:9},void 0)},Tn=pn;function Kn(){const g=ge(),[c,a]=l.useState(),D=he(),{tab:x="",name:K=""}=D.state||{},d=m=>{m.preventDefault(),g("/quan-ly-cskt",{state:{tab:x}})},N=()=>{let m="";switch(x){case ce.CSBD:m="Cơ sở kỹ thuật";break;case ce.ToBD:m="Tổ BĐKT cơ động";break;case ce.TrCQDT:m="Trạm cáp quang đường trục";break;default:m="Cơ sở kỹ thuật";break}return m},_=l.useMemo(()=>[{key:"1",label:e.jsxDEV("span",{className:"px-1",children:"Thông tin chung"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:45,columnNumber:20},this),children:e.jsxDEV("div",{className:"bg-white -mt-4",children:e.jsxDEV(an,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:47,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:46,columnNumber:23},this)},{key:"2",label:e.jsxDEV("span",{className:"px-1",children:"Danh sách dụng cụ, phương tiện đo"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:52,columnNumber:20},this),children:e.jsxDEV("div",{className:"bg-white -mt-3",children:e.jsxDEV(un,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:54,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:53,columnNumber:23},this)},{key:"3",label:e.jsxDEV("span",{className:"px-1",children:"Danh sách CB, NVCMKT"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:59,columnNumber:20},this),children:e.jsxDEV("div",{className:"bg-white -mt-3",children:e.jsxDEV(Tn,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:61,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:60,columnNumber:23},this)}],[]);return e.jsxDEV(ue,{...Xe,children:[e.jsxDEV(Je,{title:"QUẢN LÝ CƠ SỞ KỸ THUẬT"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:70,columnNumber:13},this),e.jsxDEV("section",{className:"relative",children:[e.jsxDEV("div",{className:"bg-white w-full absolute z-100",style:{height:"calc(98%)",top:`${We.TabMargin-100}px`}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:72,columnNumber:17},this),e.jsxDEV("section",{className:"-mt-3",children:e.jsxDEV("div",{className:"container-larger",children:e.jsxDEV("div",{className:`rounded-lg ring-[10px]
                            ring-white/30 border-b border-solid border-gray-300 bg-[white] py-2 gap-4 flex-col flex`,children:e.jsxDEV("div",{className:"relative flex flex-col w-full min-h-screen px-2 gap-2",children:[e.jsxDEV("div",{className:"flex flex-row items-center justify-between",children:e.jsxDEV("div",{className:"px-2 pt-2 rounded-t-lg flex flex-col",children:e.jsxDEV(Ze,{items:[{className:"text-[15px] text-[#262D34]",title:N(),href:"/quan-ly-cskt",onClick:d},{className:"text-[15px] text-[#262D34]",title:K}]},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:88,columnNumber:41},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:87,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:86,columnNumber:33},this),e.jsxDEV("div",{className:"flex",children:e.jsxDEV("div",{className:`flex flex-col rounded-lg ring-[12px]
             ring-white/30 bg-white overflow-hidden`,children:e.jsxDEV("div",{className:"flex mt-2 relative",children:e.jsxDEV("div",{className:"w-screen",children:e.jsxDEV(en,{className:`rounded-lg
            ring-white/30 border-b border-solid border-gray-300 bg-[white] overflow-hidden`,activeKey:c,items:_,size:"small",onChange:m=>{a(m.toString())},tabBarStyle:{background:"#F5F5F6",fontSize:"12px",marginLeft:4,marginRight:4,borderRadius:4,cursor:"pointer"}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:110,columnNumber:49},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:109,columnNumber:45},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:108,columnNumber:41},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:105,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:104,columnNumber:33},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:85,columnNumber:29},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:82,columnNumber:25},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:81,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:80,columnNumber:17},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:71,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/DetailTechnicalOrganization.tsx",lineNumber:69,columnNumber:9},this)}export{Kn as default};
