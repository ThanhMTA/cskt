import{h as be,aO as pe,r,cA as N,w as xe,f as Te,t as T,cB as ge,j as e,cC as ke,s as C,cD as V,I as ve,l as we,ax as Ce,y as Ve,S as Se,cE as _e,aR as De,aS as ye,cF as fe,V as ze,U as Ee,cG as Ae,cH as Ke,H as je,aQ as Fe,cI as B,k as Pe,q as qe,P as Ue,L as Ze,aG as Ge}from"./index-DXrCg2vr.js";import{g as Le}from"./Region.action-DLCgoOK4.js";import{O as W,T as Oe,A as J,g as Qe,a as We}from"./TechnicalAssuranceAction-B92NWFgC.js";import{a as Je}from"./arrayToTree.min-Bpdh5Rxo.js";import{B as He,M as Me}from"./MenuFoldOutlined-DOvAPFps.js";import{T as Be}from"./index-CfEarsVi.js";import"./ItemsComponent-Ct2UsBCT.js";import"./index-Bb5KQ1O1.js";import"./Ward.action-D2xWCgQ3.js";import"./MajorCategories.action-CtvpKwzh.js";const L="data:image/svg+xml,%3csvg%20width='20'%20height='21'%20viewBox='0%200%2020%2021'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3crect%20y='0.5'%20width='20'%20height='20'%20rx='10'%20fill='white'/%3e%3cpath%20fill-rule='evenodd'%20clip-rule='evenodd'%20d='M4.85716%204.5H6.57145V5.35714H5.28573V15.6429H6.57145V16.5H4.85716L4.42859%2016.0714V4.92857L4.85716%204.5ZM10%209.64286H8.28573L7.85716%209.21429V7.5L8.28573%207.07143H10L10.4286%207.5V9.21429L10%209.64286ZM8.7143%208.78571H9.57145V7.92857H8.7143V8.78571ZM15.1429%209.64286H12.5714L12.1429%209.21429V6.64286L12.5714%206.21429H15.1429L15.5714%206.64286V9.21429L15.1429%209.64286ZM13%208.78571H14.7143V7.07143H13V8.78571ZM10%2013.9286H8.28573L7.85716%2013.5V11.7857L8.28573%2011.3571H10L10.4286%2011.7857V13.5L10%2013.9286ZM8.7143%2013.0714H9.57145V12.2143H8.7143V13.0714ZM15.1429%2014.7857H12.5714L12.1429%2014.3571V11.7857L12.5714%2011.3571H15.1429L15.5714%2011.7857V14.3571L15.1429%2014.7857ZM13%2013.9286H14.7143V12.2143H13V13.9286ZM12.1429%2012.2143H10.4286V13.0714H12.1429V12.2143ZM12.1429%207.92857H10.4286V8.78571H12.1429V7.92857Z'%20fill='%230074D6'/%3e%3c/svg%3e";function Xe(){const x=be(),O=pe(),P=new URLSearchParams(O.search).get("tab")??"",E=r.useRef(N.CSBD),{openModal:S}=xe(),{userInfo:b}=Te(),[h,k]=r.useState(!0),[_,X]=r.useState(0),[q,R]=r.useState([]),[Y,ee]=r.useState([]),[$,ae]=r.useState([]),[ie,ne]=r.useState([]),[v,se]=r.useState({_and:[]}),[le,U]=r.useState(!1),[A,z]=r.useState({}),[ce,K]=r.useState([]),[u]=T.useForm(),te=[{title:e.jsxDEV("span",{className:"font-bold",children:"Tên"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:44,columnNumber:20},this),dataIndex:"name",width:"40%",render:(n,l)=>(l==null?void 0:l.major_id)===void 0&&(l==null?void 0:l.ward_id)===void 0?n??"":e.jsxDEV(fe,{className:"cursor-pointer text-[#3D73D0]",to:`/quan-ly-cskt/${l==null?void 0:l.id}`,onClick:o=>{o.preventDefault(),x(`/quan-ly-cskt/${l==null?void 0:l.id}`,{state:{tab:P,name:l==null?void 0:l.name}})},children:n??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:52,columnNumber:25},this)},{title:e.jsxDEV("span",{className:"font-bold",children:"Đơn vị quản lý"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:72,columnNumber:20},this),dataIndex:"org_manage_id",width:"15%",render:n=>e.jsxDEV(e.Fragment,{children:(n==null?void 0:n.name)??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:76,columnNumber:24},this)},{title:e.jsxDEV("span",{className:"font-bold",children:"Địa chỉ"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:80,columnNumber:20},this),dataIndex:"ward_id",render:(n,l)=>{if((l==null?void 0:l.major_id)===void 0&&(l==null?void 0:l.ward_id)===void 0)return null;const o=ze(n);return e.jsxDEV(e.Fragment,{children:((l==null?void 0:l.address)??"")+", "+(o??"")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:87,columnNumber:24},this)}}],H=[{title:"Chiến dịch",key:ge.CHIEN_DICH},{title:"Chiến lược",key:ge.CHIEN_LUOC},{title:"Chiến thuật",key:ge.CHIEN_THUAT}],m=[{title:"Kiêm nhiệm",key:W.KIEM_NHIEM},{title:"Chính thức",key:W.CHINH_THUC}],Z=async()=>{var n,l,o,g;try{U(!0);let a={},i={};const s=(n=b==null?void 0:b.role)==null?void 0:n.name,c=(l=b==null?void 0:b.personal_id)==null?void 0:l.org_id,p=F=>({_and:[{code:{_contains:F}},{is_enable:!0}]}),t=(F,Q,he)=>({_and:[{technical_id:{org_manage_id:{code:{_contains:F}}}},{technical_id:{org_manage_id:{is_enable:!0}}},{technical_id:{_and:[...Array.isArray(Q._and)?Q._and:[]]}},he]});s===J.CSKT_K1?(a={_or:[t("43",v,A),t("70",v,A)]},i={_or:[p("43"),p("70")]}):s===J.CSKT_DV?(a={_and:[{technical_id:{org_manage_id:{tree_path:{_contains:((o=c==null?void 0:c.parent_id)==null?void 0:o.tree_path)||""},...v._and}}},{technical_id:{_and:[...Array.isArray(v._and)?v._and:[]]}},A]},i={_and:[{tree_path:{_contains:((g=c==null?void 0:c.parent_id)==null?void 0:g.tree_path)||(c==null?void 0:c.tree_path)}},{is_enable:!0}]}):a={_and:[{technical_id:{_and:[...Array.isArray(v._and)?v._and:[]]}},A]};const[f,y,d,me,ue]=await Promise.all([Le({},{is_enable:!0}),Ee({...i}),Qe({},{}),Ae(a),Ke(a)]),de=je(f,"name","id"),G=Fe(y);ae(de),ne(G),ee(Je.arrayToTree([...d])),R(me),X(ue.count)}catch(a){console.error("Failed to fetch data:",a)}finally{U(!1)}},M=n=>!n.children||n.children.length===0?n.level!==void 0?1:0:n.children.reduce((l,o)=>l+M(o),0),oe=n=>{const l=o=>{const g=n.filter(i=>{var s,c;return((s=o==null?void 0:o.data)==null?void 0:s.id)===((c=i==null?void 0:i.type_id)==null?void 0:c.id)}),a=[...o.children?o.children.map(l):[],...g];if(a.length>0){const i=a.reduce((s,c)=>s+M(c),0);return{...o.data,name:o.data.name+` [${i}] `,children:a}}else return{...o.data}};return Y.map(l)},D=async()=>{var o,g,a,i,s;let n={_and:[]},l={};(o=u.getFieldValue("level"))!=null&&o.length&&(l={level:{_in:u.getFieldValue("level")}}),(g=u.getFieldValue("geo"))!=null&&g.length&&(n={_and:[...n._and,{ward_id:{district_id:{province_id:{region_id:{_in:u.getFieldValue("geo")}}}}}]}),(a=u.getFieldValue("is_offical"))!=null&&a.length&&(n={_and:[...n._and,{is_offical:{_in:u.getFieldValue("is_offical")}}]}),(i=u.getFieldValue("org_manage_id"))!=null&&i.length&&(n={_and:[...n._and,{org_manage_id:{_in:u.getFieldValue("org_manage_id")}}]}),(s=u.getFieldValue("search"))!=null&&s.length&&(n={_and:[...n._and,{name:{_icontains:u.getFieldValue("search").trim()}}]}),se(n),z(l)},j=()=>{k(!h)},re=()=>0;return r.useEffect(()=>{Z()},[v,A]),e.jsxDEV(T,{form:u,initialValues:{},labelCol:{span:24},onValuesChange:D,children:e.jsxDEV("div",{className:"flex flex-row px-0 gap-2",children:[e.jsxDEV("div",{className:`transition-all duration-300 ${h?"w-[300px]":"w-12"} filter-container bg-white border rounded max-h-svh flex flex-col overflow-x-hidden`,children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("div",{className:`flex items-center px-4 py-2 ${h?"border-b justify-between":"justify-center"}`,children:[e.jsxDEV("h3",{className:`${h?"block":"hidden"} font-bold text-lg`,children:e.jsxDEV("span",{className:"font-bold text-[16px] leading-[26px] text-black",children:"Bộ lọc tìm kiếm"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:322,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:318,columnNumber:29},this),e.jsxDEV("button",{onClick:j,children:e.jsxDEV(He,{count:re(),color:"#0074D6",className:"text-xl scale-[80%]",children:h?e.jsxDEV(Me,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:326,columnNumber:45},this):e.jsxDEV(ke,{className:"text-[#8C9093]"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:326,columnNumber:68},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:325,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:324,columnNumber:29},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:317,columnNumber:25},this),e.jsxDEV("div",{className:`${h?"block w-[300px]":"hidden"} px-4 flex-1 overflow-auto`,children:[e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:334,columnNumber:41},this),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Phân cấp"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:335,columnNumber:41},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:333,columnNumber:37},this),className:"mt-2",children:e.jsxDEV(C,{className:"px-0 -mt-3",span:30,children:e.jsxDEV(V.Group,{style:{width:"100%"},className:"flex flex-col",onChange:n=>{u.setFieldsValue({level:n}),D()},children:H==null?void 0:H.map((n,l)=>e.jsxDEV(C,{className:"mt-[10px]",children:e.jsxDEV(V,{value:n.key,children:e.jsxDEV("span",{className:"text-[14px] font-normal leading-[23px]",children:n.title},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:353,columnNumber:57},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:352,columnNumber:53},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:351,columnNumber:49},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:341,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:340,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:331,columnNumber:29},this),e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:366,columnNumber:41},this),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Đơn vị"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:367,columnNumber:41},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:365,columnNumber:37},this),children:e.jsxDEV(Be,{multiple:!0,showCheckedStrategy:"SHOW_ALL",treeCheckable:!0,size:"small",showSearch:!0,filterTreeNode:(n,l)=>l.title.toLowerCase().indexOf(n.toLowerCase())>=0,className:"-mt-3",style:{width:"100%"},placeholder:"Chọn đơn vị",allowClear:!0,treeDefaultExpandAll:!0,treeData:ie,onChange:n=>{u.setFieldsValue({org_manage_id:n}),D()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:370,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:363,columnNumber:29},this),e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:396,columnNumber:41},this),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Nhóm địa lý"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:397,columnNumber:41},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:395,columnNumber:37},this),className:"-mt-2",children:e.jsxDEV(C,{className:"px-0 -mt-3",span:30,children:e.jsxDEV(V.Group,{onChange:n=>{u.setFieldsValue({geo:n}),D()},style:{width:"100%"},className:"flex flex-col",children:$==null?void 0:$.map((n,l)=>e.jsxDEV(C,{className:"mt-[10px]",children:e.jsxDEV(V,{value:n.value,children:e.jsxDEV("span",{className:"text-[14px] font-normal leading-[23px]",children:n.label},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:414,columnNumber:57},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:413,columnNumber:53},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:412,columnNumber:49},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:402,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:401,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:393,columnNumber:29},this),e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:427,columnNumber:41},this),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Chức năng nhiệm vụ"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:428,columnNumber:41},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:426,columnNumber:37},this),children:e.jsxDEV(C,{className:"px-0 -mt-3",span:30,children:e.jsxDEV(V.Group,{style:{width:"100%"},className:"flex flex-col",onChange:n=>{u.setFieldsValue({is_offical:n}),D()},children:m==null?void 0:m.map((n,l)=>e.jsxDEV(C,{className:"mt-[10px]",children:e.jsxDEV(V,{value:n.key,children:e.jsxDEV("span",{className:"text-[14px] font-normal leading-[23px]",children:n.title},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:444,columnNumber:57},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:443,columnNumber:53},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:442,columnNumber:49},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:432,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:431,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:424,columnNumber:29},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:330,columnNumber:25},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:316,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:314,columnNumber:17},this),e.jsxDEV("div",{className:"flex-col gap-0 bg-white rounded py-2 px-3 flex-1 overflow-auto",children:[e.jsxDEV("div",{className:"flex flex-row justify-between items-center",children:[e.jsxDEV("span",{className:"font-bold text-[16px]",children:`Danh sách Cơ sở kỹ thuật: ${_}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:459,columnNumber:25},this),e.jsxDEV("div",{className:"flex flex-row items-center justify-between",children:[e.jsxDEV("div",{className:"transition-all duration-300 w-[240px]",children:e.jsxDEV("div",{children:e.jsxDEV(ve,{className:"flex rounded-full border-[1px] py-1 border-solid border-gray-300 gap-2 px-3 justify-center items-center transition-all duration-300",placeholder:"Tìm kiếm",suffix:e.jsxDEV(we,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:466,columnNumber:49},this),onPressEnter:n=>{n.preventDefault(),u.setFieldsValue({search:n.target.value}),D()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:463,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:462,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:461,columnNumber:29},this),e.jsxDEV("div",{className:"flex px-2",children:e.jsxDEV(Ce,{size:"small",className:"rounded w-[100px]",type:"primary",onClick:()=>{S(e.jsxDEV(Oe,{action:Ve.Create,modalType:E.current},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:483,columnNumber:45},this),{width:"55vw",onModalClose(n){n!=null&&n.success&&Z()}})},children:e.jsxDEV("span",{children:"Thêm mới"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:495,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:477,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:476,columnNumber:29},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:460,columnNumber:25},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:458,columnNumber:21},this),e.jsxDEV("div",{className:"flex flex-col border-gray-300 my-2 h-[800px]",children:le?e.jsxDEV(Se,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:501,columnNumber:36},this):e.jsxDEV(_e,{className:"org-leave-manage-table overflow-auto custom-ant-table",dataSource:oe([...q]),columns:te,pagination:!1,expandable:{expandedRowKeys:ce,onExpand:(n,l)=>{K(n?o=>[...o,l.key]:o=>o.filter(g=>g!==l.key))},expandIcon:({expanded:n,onExpand:l,record:o})=>o!=null&&o.children?n?e.jsxDEV(ye,{style:{marginRight:"10px",height:"10px",width:"10px"},rev:void 0,onClick:g=>{l(o,g)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:529,columnNumber:49},this):e.jsxDEV(De,{style:{marginRight:"10px",height:"10px",width:"10px"},rev:void 0,onClick:g=>{l(o,g)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:521,columnNumber:49},this):null},scroll:{y:700},rowClassName:"hover:bg-secondary group",rowKey:"id"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:502,columnNumber:29},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:500,columnNumber:21},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:457,columnNumber:17},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:313,columnNumber:13},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceFacility.tsx",lineNumber:307,columnNumber:9},this)}const Ye=({type:x})=>{const O=be(),I=pe(),E=new URLSearchParams(I.search).get("tab")??"",S=r.useRef(x),{openModal:b}=xe(),{userInfo:h}=Te(),[k,_]=r.useState(!0),[X,q]=r.useState(!1),[R,Y]=r.useState([]),[ee,$]=r.useState(0),[ae,ie]=r.useState([]),[ne,v]=r.useState([]),[se,le]=r.useState([]),[U,A]=r.useState(),[z,ce]=r.useState({_and:[]}),[K,u]=r.useState({}),[te,H]=r.useState([]),[m]=T.useForm(),Z=[{title:e.jsxDEV("span",{className:"font-bold",children:"Tên"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:46,columnNumber:20},void 0),dataIndex:"name",width:"40%",render:(a,i)=>(i==null?void 0:i.major_id)===void 0&&(i==null?void 0:i.ward_id)===void 0?e.jsxDEV(fe,{className:"cursor-pointer text-[#3D73D0]",to:`/quan-ly-cskt/tong-hop-vtkt-dcsc/${i==null?void 0:i.id}`,onClick:s=>{s.preventDefault(),O(`/quan-ly-cskt/tong-hop-vtkt-dcsc/${i==null?void 0:i.id}`,{state:{tab:E}})},children:a??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:52,columnNumber:25},void 0):e.jsxDEV(fe,{className:"cursor-pointer text-[#3D73D0]",to:`/quan-ly-cskt/${i==null?void 0:i.id}`,onClick:s=>{s.preventDefault(),O(`/quan-ly-cskt/${i==null?void 0:i.id}`,{state:{tab:E,name:i==null?void 0:i.name}})},children:a??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:69,columnNumber:21},void 0)},{title:e.jsxDEV("span",{className:"font-bold",children:"Đơn vị quản lý"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:88,columnNumber:20},void 0),dataIndex:"org_manage_id",width:"15%",render:a=>e.jsxDEV(e.Fragment,{children:(a==null?void 0:a.name)??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:92,columnNumber:24},void 0)},{title:e.jsxDEV("span",{className:"font-bold",children:"Địa chỉ"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:96,columnNumber:20},void 0),dataIndex:"ward_id",render:(a,i)=>{if((i==null?void 0:i.major_id)===void 0&&(i==null?void 0:i.ward_id)===void 0)return null;const s=ze(a);return e.jsxDEV(e.Fragment,{children:((i==null?void 0:i.address)??"")+", "+(s??"")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:103,columnNumber:24},void 0)}}],M=[{title:"Kiêm nhiệm",key:W.KIEM_NHIEM},{title:"Chính thức",key:W.CHINH_THUC}],oe=(a,i="id",s="parent_id")=>{const c={},p=[];return a.forEach(t=>{c[t==null?void 0:t[i]]={children:[],data:{...t}}}),a.forEach(t=>{(t==null?void 0:t[s])!==null&&c[t==null?void 0:t[s]]?c[t==null?void 0:t[s]].children.push(c[t==null?void 0:t[i]]):p.push(c[t==null?void 0:t[i]])}),p},D=async()=>{var a,i,s,c,p;try{q(!0);let t={},f={};const y=(a=h==null?void 0:h.role)==null?void 0:a.name,d=(i=h==null?void 0:h.personal_id)==null?void 0:i.org_id,me=(w,$e)=>({_and:[{technical_id:{org_manage_id:{is_enable:!0}}},{type_id:{short_name:{_eq:x===N.ToBD?B.ToBDKT:B.TrCQDT}}},{technical_id:{_and:[...Array.isArray(w._and)?w._and:[]]}},$e]}),ue=()=>({_and:[{is_enable:!0}]});y===J.CSKT_K1?(t={_or:[me(z,K)]},f={_or:[ue()]}):y===J.CSKT_DV?(t={_and:[{technical_id:{org_manage_id:{tree_path:{_contains:((s=d==null?void 0:d.parent_id)==null?void 0:s.tree_path)||""}}}},{type_id:{short_name:{_eq:x===N.ToBD?B.ToBDKT:B.TrCQDT}}},{technical_id:{_and:[...Array.isArray(z._and)?z._and:[]]}},K]},f={_and:[{tree_path:{_contains:((c=d==null?void 0:d.parent_id)==null?void 0:c.tree_path)||(d==null?void 0:d.tree_path)}},{is_enable:!0}]}):t={_and:[{type_id:{short_name:{_eq:x===N.ToBD?B.ToBDKT:B.TrCQDT}}},{technical_id:{_and:[...Array.isArray(z._and)?z._and:[]]}},K]};const[de,G,F,Q,he]=await Promise.all([Le({},{is_enable:!0}),Ee({...f}),Ae(t),Ke(t),We({},{})]);A((p=he.find(w=>S.current===N.ToBD?(w==null?void 0:w.short_name)==="to_bdktcd":(w==null?void 0:w.short_name)==="TRAM_CQDT"))==null?void 0:p.id);const Ie=je(de,"name","id"),Re=Fe(G);Y(Ie),le(Re),v(oe(G)),console.log("technicalTypes > > > > > >",F),ie(F),$(Q.count)}catch(t){console.error("Failed to fetch data:",t)}finally{q(!1)}},j=async()=>{var s,c,p,t,f;let a={_and:[]},i={};(s=m.getFieldValue("level"))!=null&&s.length&&(i={level:{_in:m.getFieldValue("level")}}),(c=m.getFieldValue("is_offical"))!=null&&c.length&&(a={_and:[...a._and,{is_offical:{_in:m.getFieldValue("is_offical")}}]}),(p=m.getFieldValue("org_manage_id"))!=null&&p.length&&(a={_and:[...a._and,{org_manage_id:{_in:m.getFieldValue("org_manage_id")}}]}),(t=m.getFieldValue("search"))!=null&&t.length&&(a={_and:[...a._and,{name:{_icontains:m.getFieldValue("search").trim()}}]}),(f=m.getFieldValue("geo"))!=null&&f.length&&(a={_and:[...a._and,{ward_id:{district_id:{province_id:{region_id:{_in:m.getFieldValue("geo")}}}}}]}),ce(a),u(i)},re=()=>_(!k),n=()=>0,l=a=>{const i=s=>s?(Array.isArray(s.children)&&(s.children=s.children.map(i).filter(c=>c!==null)),s.children&&s.children.length===0&&delete s.children,s):null;return a.map(i).filter(s=>s!==null)},o=a=>!a.children||a.children.length===0?a.level!==void 0?1:0:a.children.reduce((i,s)=>i+o(s),0),g=a=>{const i=c=>{const p=a.filter(f=>{var y,d;return((y=c==null?void 0:c.data)==null?void 0:y.id)===((d=f==null?void 0:f.org_manage_id)==null?void 0:d.id)}),t=[...c.children?c.children.map(i).filter(Boolean):[],...p];if(t.length>0){const f=t.reduce((y,d)=>y+o(d),0);return{...c.data,name:`${c.data.name} [${f}]`,children:t}}},s=ne.map(i).filter(Boolean);return console.log("treeWithChildren > > > > > >",s),l(s)};return r.useEffect(()=>{D()},[z,K,x]),e.jsxDEV(T,{form:m,initialValues:{},labelCol:{span:24},onValuesChange:j,children:e.jsxDEV("div",{className:"flex flex-row px-0 gap-2",children:[e.jsxDEV("div",{className:`transition-all duration-300 ${k?"w-[300px]":"w-12"} filter-container bg-white border rounded max-h-svh flex flex-col overflow-x-hidden`,children:e.jsxDEV("div",{className:"flex flex-col",children:[e.jsxDEV("div",{className:`flex items-center px-4 py-2 ${k?"border-b justify-between":"justify-center"}`,children:[e.jsxDEV("h3",{className:`${k?"block":"hidden"} font-bold text-lg`,children:e.jsxDEV("span",{className:"font-bold text-[16px] leading-[26px] text-black",children:"Bộ lọc tìm kiếm"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:369,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:365,columnNumber:29},void 0),e.jsxDEV("button",{onClick:re,children:e.jsxDEV(He,{count:n(),color:"#0074D6",className:"text-xl scale-[80%]",children:k?e.jsxDEV(Me,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:373,columnNumber:45},void 0):e.jsxDEV(ke,{className:"text-[#8C9093]"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:373,columnNumber:68},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:372,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:371,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:364,columnNumber:25},void 0),e.jsxDEV("div",{className:`${k?"block w-[300px]":"hidden"} px-4 flex-1 overflow-auto`,children:[e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:381,columnNumber:41},void 0),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Hình thức"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:382,columnNumber:41},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:380,columnNumber:37},void 0),className:"mt-2",children:e.jsxDEV(C,{className:"px-0 -mt-3",span:30,children:e.jsxDEV(V.Group,{onChange:a=>{m.setFieldsValue({is_offical:a}),j()},style:{width:"100%"},className:"flex flex-col",children:M==null?void 0:M.map(a=>e.jsxDEV(C,{className:"mt-[10px]",children:e.jsxDEV(V,{value:a.key,children:e.jsxDEV("span",{className:"text-[14px] font-normal leading-[23px]",children:a.title},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:401,columnNumber:57},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:400,columnNumber:53},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:399,columnNumber:49},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:389,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:388,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:378,columnNumber:29},void 0),e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:414,columnNumber:41},void 0),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Đơn vị"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:415,columnNumber:41},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:413,columnNumber:37},void 0),children:e.jsxDEV(Be,{multiple:!0,showCheckedStrategy:"SHOW_ALL",treeCheckable:!0,size:"small",showSearch:!0,filterTreeNode:(a,i)=>i.title.toLowerCase().indexOf(a.toLowerCase())>=0,style:{width:"100%"},placeholder:"Chọn đơn vị",allowClear:!0,treeDefaultExpandAll:!0,treeData:se,onChange:a=>{m.setFieldsValue({org_manage_id:a}),j()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:419,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:411,columnNumber:29},void 0),e.jsxDEV(T.Item,{label:e.jsxDEV("div",{className:"flex flex-row gap-2",children:[e.jsxDEV("img",{src:L},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:444,columnNumber:41},void 0),e.jsxDEV("span",{className:"text-[14px] font-bold leading-[24px]",children:"Nhóm địa lý"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:445,columnNumber:41},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:443,columnNumber:37},void 0),className:"-mt-2",children:e.jsxDEV(C,{className:"px-0 -mt-3",span:30,children:e.jsxDEV(V.Group,{onChange:a=>{m.setFieldsValue({geo:a}),j()},style:{width:"100%"},className:"flex flex-col",children:R==null?void 0:R.map((a,i)=>e.jsxDEV(C,{className:"mt-[10px]",children:e.jsxDEV(V,{value:a.value,children:e.jsxDEV("span",{className:"text-[14px] font-normal leading-[23px]",children:a.label},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:463,columnNumber:57},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:462,columnNumber:53},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:461,columnNumber:49},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:451,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:450,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:441,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:377,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:363,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:361,columnNumber:17},void 0),e.jsxDEV("div",{className:"flex-col gap-0 bg-white rounded py-2 px-3 flex-1 overflow-auto",children:[e.jsxDEV("div",{className:"flex flex-row justify-between items-center",children:[e.jsxDEV("span",{className:"font-bold text-[16px]",children:`${x===N.ToBD?"Danh sách Tổ bảo đảm kỹ thuật cơ động":"Danh sách Trạm cáp quang đường trục"}: ${ee}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:479,columnNumber:25},void 0),e.jsxDEV("div",{className:"flex flex-row items-center justify-between",children:[e.jsxDEV("div",{className:"transition-all duration-300 w-[240px]",children:e.jsxDEV("div",{children:e.jsxDEV(ve,{className:"flex rounded-full border-[1px] py-1 border-solid border-gray-300 gap-2 px-3 justify-center items-center transition-all duration-300",placeholder:"Tìm kiếm",suffix:e.jsxDEV(we,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:486,columnNumber:49},void 0),onPressEnter:a=>{a.preventDefault(),m.setFieldsValue({search:a.target.value}),j()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:483,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:482,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:481,columnNumber:29},void 0),e.jsxDEV("div",{className:"flex px-2",children:e.jsxDEV(Ce,{size:"small",className:"rounded w-[100px]",type:"primary",onClick:()=>{b(e.jsxDEV(Oe,{type_id:U,action:Ve.Create,modalType:S.current},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:503,columnNumber:45},void 0),{width:"55vw",onModalClose(a){a!=null&&a.success&&D()}})},children:e.jsxDEV("span",{children:"Thêm mới"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:515,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:497,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:496,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:480,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:478,columnNumber:21},void 0),e.jsxDEV("div",{className:"flex flex-col",children:e.jsxDEV("div",{className:"flex flex-col  border-gray-300 my-2 h-[800px]",children:X?e.jsxDEV(Se,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:522,columnNumber:40},void 0):e.jsxDEV(_e,{className:"org-leave-manage-table overflow-auto custom-ant-table",dataSource:g([...ae]),columns:Z,pagination:!1,expandable:{expandedRowKeys:te,onExpand:(a,i)=>{H(a?s=>[...s,i.key]:s=>s.filter(c=>c!==i.key))},expandIcon:({expanded:a,onExpand:i,record:s})=>s!=null&&s.children?a?e.jsxDEV(ye,{style:{marginRight:"10px",height:"10px",width:"10px"},rev:void 0,onClick:c=>{i(s,c)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:550,columnNumber:53},void 0):e.jsxDEV(De,{style:{marginRight:"10px",height:"10px",width:"10px"},rev:void 0,onClick:c=>{i(s,c)}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:542,columnNumber:53},void 0):null},scroll:{y:700},rowClassName:"hover:bg-secondary group",rowKey:"id"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:523,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:521,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:520,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:477,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:360,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/components/TechnicalAssuranceTeam.tsx",lineNumber:353,columnNumber:9},void 0)},Ne=Ye;function ma(){const x=be(),[O,I]=r.useState(N.CSBD),P=r.useRef(N.CSBD),E=pe(),S=new URLSearchParams(E.search),{tab:b}=E.state||{},h=_=>{S.set("tab",_),x({search:S.toString()})},k=r.useMemo(()=>[{key:N.CSBD,label:"Cơ sở kỹ thuật",children:e.jsxDEV("div",{className:"bg-[#F5F5F6] h-svh",children:e.jsxDEV(Xe,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:27,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:26,columnNumber:23},this)},{key:N.ToBD,label:"Tổ bảo đảm kỹ thuật cơ động",children:e.jsxDEV("div",{className:"bg-[#F5F5F6] h-svh",children:e.jsxDEV(Ne,{type:N.ToBD},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:34,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:33,columnNumber:23},this)},{key:N.TrCQDT,label:"Trạm cáp quang đường trục",children:e.jsxDEV("div",{className:"bg-[#F5F5F6] h-svh",children:e.jsxDEV(Ne,{type:N.TrCQDT},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:41,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:40,columnNumber:23},this)}],[]);return r.useEffect(()=>{b&&(I(b),S.set("tab",b),x({search:S.toString()}))},[b]),e.jsxDEV(Pe,{...qe,children:[e.jsxDEV(Ue,{title:"QUẢN LÝ CƠ SỞ KỸ THUẬT"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:56,columnNumber:13},this),e.jsxDEV("section",{className:"relative",children:[e.jsxDEV("div",{className:"bg-white w-full absolute",style:{height:"calc(100%)",top:`${Ze.TabMargin-100}px`}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:58,columnNumber:17},this),e.jsxDEV("section",{className:"-mt-3",children:e.jsxDEV("div",{className:"container",children:e.jsxDEV("div",{className:`flex flex-col rounded-lg pb-0 ring-[10px]
             ring-white/30 border-b border-solid border-gray-300 bg-[#F5F5F6]] bg-white overflow-hidden`,children:e.jsxDEV("div",{className:"flex relative",children:e.jsxDEV("div",{className:"w-screen",children:e.jsxDEV(Ge,{className:`px-2 rounded-lg
            ring-white/30 border-b border-solid border-gray-300 bg-[#F5F5F6] overflow-hidden`,activeKey:O,items:k,size:"small",onChange:_=>{P.current=_,I(_.toString()),h(_)},tabBarStyle:{background:"#F5F5F6",height:"50px",marginBottom:8,fontSize:"12px",borderRadius:10,cursor:"pointer"}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:73,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:72,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:71,columnNumber:29},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:68,columnNumber:25},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:67,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:66,columnNumber:17},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:57,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/techinical-organization/pages/TechnicalOrganization.tsx",lineNumber:55,columnNumber:9},this)}export{ma as default};
