import{t as T,x as S,r as t,y as r,j as e,k as v,q as V,F as x,cy as j,ax as C,bo as K,bp as E,I as w,w as I,cz as L,E as O,B as A,W as M,G as _}from"./index-DXrCg2vr.js";import{c as F,u as P,r as $,g as B,a as G,m as R}from"./DrainTankType.action-A724TnoC.js";import{O as k,M as U}from"./OperationCategories.constant-Cc0MMSFx.js";import{P as q}from"./index-B0_H1u92.js";import{I as z}from"./index-Bb5KQ1O1.js";var h=(n=>(n[n.Name=250]="Name",n[n.Desc=250]="Desc",n))(h||{});const{TextArea:X}=w,H={required:"Vui lòng không bỏ trống trường này",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},W=({modalType:n,idRecord:d,closeModal:b})=>{var N,g;const[o]=T.useForm(),{openMessage:s}=S(),[i,u]=t.useState(n),D=t.useCallback(async()=>{try{i===r.Create?await F(o==null?void 0:o.getFieldsValue()):await P(d,o==null?void 0:o.getFieldsValue()),s({type:"success",content:`${i===r.Create?"Thêm mới":"Chỉnh sửa"} ${k.DrainTankType} thành công`}),b(!0)}catch(a){s({type:"error",content:(a==null?void 0:a.message)||"Lỗi hệ thống"})}},[i]),p=t.useMemo(()=>i===r.View?"borderless":"outlined",[i]),m=t.useCallback(async()=>{try{await $(d),s({type:"success",content:`Xóa ${k.DrainTankType} thành công`}),b(!0)}catch(a){s({type:"error",content:(a==null?void 0:a.message)||"Lỗi hệ thống"})}},[d]),f=t.useCallback(async()=>{try{const a=await B(d,{});o.setFieldsValue(a)}catch(a){s({type:"error",content:(a==null?void 0:a.message)||"Lỗi hệ thống"})}},[d]);return t.useEffect(()=>{u(n)},[n]),t.useEffect(()=>{n!==r.Create&&f()},[]),e.jsxDEV(v,{...V,className:"flex",size:20,children:[e.jsxDEV(x,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:[e.jsxDEV("p",{className:"modal-title",children:`${(g=(N=j)==null?void 0:N.find(a=>(a==null?void 0:a.key)===i))==null?void 0:g.title} ${k.DrainTankType}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:117,columnNumber:9},void 0),i===r.View?e.jsxDEV(C,{htmlType:"submit",type:"primary",onClick:()=>{u(r.Update)},children:"Sửa thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:123,columnNumber:11},void 0):e.jsxDEV(x,{gap:10,children:[i===r.Update&&e.jsxDEV(q,{title:K.DELETE,onConfirm:m,okText:E.CORRECT,cancelText:E.NO,children:e.jsxDEV(C,{htmlType:"button",className:"text-red border-red",children:"Xóa tất cả"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:144,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:138,columnNumber:17},void 0),e.jsxDEV(C,{htmlType:"submit",type:"primary",onClick:o.submit,children:"Lưu thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:154,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:133,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:112,columnNumber:7},void 0),e.jsxDEV(T,{form:o,preserve:!1,className:"bg-secondary p-3 rounded-primary mt-10",validateMessages:H,onFinish:D,disabled:i===r.View,autoComplete:"off",variant:p,children:[e.jsxDEV(x,{gap:16,className:"p-3 bg-tertiary rounded-[inherit]",align:"center",children:[e.jsxDEV("div",{className:"w-8 center rounded-full bg-white aspect-square",children:e.jsxDEV(U,{className:"text-lg"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:180,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:179,columnNumber:11},void 0),e.jsxDEV("span",{className:"font-bold",children:["Danh mục ",k.DrainTankType]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:182,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:174,columnNumber:9},void 0),e.jsxDEV(T.Item,{label:"Tên loại cống bể",name:"name",labelCol:{span:24},rules:[{required:!0},{max:h.Name}],children:e.jsxDEV(w,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:193,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:184,columnNumber:9},void 0),e.jsxDEV(T.Item,{label:"Mô tả",name:"desc",labelCol:{span:24},rules:[{max:h.Desc}],children:e.jsxDEV(X,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:201,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:195,columnNumber:9},void 0),e.jsxDEV(T.Item,{label:"Số thứ tự",name:"order_number",labelCol:{span:24},children:e.jsxDEV(z,{className:"w-full",controls:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:208,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:203,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:164,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DrainTankTypeAction.tsx",lineNumber:107,columnNumber:5},void 0)},Y=[{title:"Tên loại cống bể",dataIndex:"name",fixed:"left",width:300,key:A.Name},{title:"Mô tả",dataIndex:"desc",width:200}].map(n=>({...n,key:(n==null?void 0:n.key)||M()})),J=[{key:r.View,icon:e.jsxDEV(_,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DrainTankType.tsx",lineNumber:39,columnNumber:11},void 0),tooltip:"Chi tiết"}];function te(){const{openModal:n,closeModal:d}=I(),[b,o]=t.useState([]),[s,i]=t.useState({count:0}),u=t.useRef(r.Create),[D,p]=t.useState(!1),m=t.useRef({...L}),f=async(c,l)=>{try{p(!0);const y=await Promise.all([await G({limit:l,page:c},{}),await R({})]);o(y[0]),i(y[1]),p(!1)}catch{p(!1)}},N=async c=>{g(c)},g=c=>{n(e.jsxDEV(W,{modalType:u==null?void 0:u.current,idRecord:c,closeModal:l=>{d(!0),l&&a()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DrainTankType.tsx",lineNumber:82,columnNumber:7},this))},a=()=>{f(m.current.current,m.current.pageSize)};return t.useEffect(()=>{f(m.current.current,m.current.pageSize)},[]),e.jsxDEV("div",{className:"w-[900px]",children:e.jsxDEV(O,{total:(s==null?void 0:s.count)||0,className:"mt-5",isReloadButton:!1,dataSource:b,columns:Y,actionList:J,isAction:!0,loading:D,paginationCustom:{...m.current,total:s==null?void 0:s.count},onChange:({current:c,pageSize:l})=>{m.current={current:c,pageSize:l},f(c,l)},actionClick:(c,l)=>{u.current=c,N(l==null?void 0:l.id)},filterColumns:[A.Name],btnCreate:!0,handleCreate:()=>{u.current=r.Create,g()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DrainTankType.tsx",lineNumber:112,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DrainTankType.tsx",lineNumber:111,columnNumber:5},this)}export{J as ACTION_TABLE,te as default};
