import{t as U,v as V,w as A,x as _,r as d,j as n,k as y,q as I,F as j,y as o,z as M,B as k,W as K,E as F,G as L}from"./index-DXrCg2vr.js";import{c as R,u as O,r as P,g as q,m as z}from"./UnitCategories.action-DYvZMRMi.js";import{F as B}from"./ForceCategories.constant-D9uazZoj.js";import{M as H}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as T}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const N={NAME:"Tên đơn vị tính",SHORT_NAME:"Tên viết tắt",IS_ENABLE:"Trạng thái",REASON:"Nội dung lý do tăng giảm"},G=({action:r,detail:t})=>{const[g]=U.useForm(),a=V(),b=A(),{openMessage:m}=_(),f=d.useMemo(()=>[{title:N.NAME,content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Hãy nhập thông tin cho trường tên đơn vị tính"}]},{title:N.SHORT_NAME,content:(t==null?void 0:t.short_name)||null,dataIndex:"short_name"},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]),u=async()=>{try{a.show();const e=g.getFieldsValue();switch(r){case o.Update:await O(t==null?void 0:t.id,e),m({type:"success",content:"Cập nhật thành công"});break;case o.Create:await R({...e}),m({type:"success",content:"Thêm mới thành công"}),g.resetFields();break;case o.View:break}p()}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),a.hide()}},h=async()=>{try{await P(t==null?void 0:t.id),m({type:"success",content:`Xóa ${B.UNIT} thành công`}),a.hide(),b.closeModal({})}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},c=()=>{if(r===o.View){p();return}else g.submit()},p=()=>{a.hide(),b.closeModal({success:!0})};return n.jsxDEV(y,{...I,className:"flex",size:20,children:[n.jsxDEV(j,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:n.jsxDEV(H,{name:"Đơn vị tính",action:r,hanldeFinish:c,handleDelete:h},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:133,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:128,columnNumber:7},void 0),n.jsxDEV(U,{form:g,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:r===o.View,onFinish:u,children:r===o.Update||r===o.Create?n.jsxDEV(n.Fragment,{children:f.map((e,l)=>n.jsxDEV(T,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:145,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:142,columnNumber:11},void 0):n.jsxDEV(n.Fragment,{children:f.map((e,l)=>n.jsxDEV("div",{className:"flex flex-col pb-4",children:n.jsxDEV(T,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:165,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:164,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:161,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:135,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/UnitCategoriesAction.tsx",lineNumber:123,columnNumber:5},void 0)},E=G,$=[{key:o.View,icon:n.jsxDEV(L,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:21,columnNumber:11},void 0),tooltip:"Chi tiết"}];function te(){const{openModal:r}=A(),[t,g]=d.useState([]),[a,b]=d.useState({count:0}),[m,f]=d.useState(!1),[u,h]=d.useState({}),[c,p]=d.useState({page:1,pageSize:M}),e=[{title:N.NAME,dataIndex:"name",fixed:"left",width:300,key:k.Name,render:(s,i)=>n.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>w(o.View,i),children:s??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:45,columnNumber:11},this)},{title:N.SHORT_NAME,dataIndex:"short_name",key:k.ShortName},{title:N.IS_ENABLE,dataIndex:"is_enable",key:"is_enable",render:s=>s?n.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:63,columnNumber:41},this):n.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:63,columnNumber:93},this)}].map(s=>({...s,key:(s==null?void 0:s.key)||K()})),l=async(s,i,S)=>{try{f(!0);const C=await Promise.all([await q({limit:i,page:s},S),await z(S)]);g(C[0]),b(C[1]),f(!1)}catch{f(!1)}},D=s=>{r(n.jsxDEV(E,{detail:s,action:o.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:96,columnNumber:7},this),{width:"40vw",onModalClose(i){i!=null&&i.success?r(n.jsxDEV(E,{detail:s,action:o.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:102,columnNumber:15},this),{width:"40vw",onModalClose(){x()}}):x()}})},w=(s,i)=>{console.log(s),s===o.View&&D(i)},x=()=>{l(c.page,c.pageSize,u)};return d.useEffect(()=>{l(c.page,c.pageSize,u)},[c,u]),n.jsxDEV(n.Fragment,{children:n.jsxDEV(F,{total:(a==null?void 0:a.count)||0,setFilter:h,setPagination:p,className:"mt-5",isReloadButton:!1,dataSource:t,columns:e,actionList:$,isAction:!1,loading:m,paginationCustom:{current:c.page,pageSize:c.pageSize,total:a==null?void 0:a.count},onChange:({current:s,pageSize:i})=>{p({page:s,pageSize:i}),l(s,i,u)},actionClick:w,filterColumns:[k.Name],btnCreate:!0,handleCreate:()=>{r(n.jsxDEV(E,{action:o.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:163,columnNumber:13},this),{width:"40vw",onModalClose(s){s!=null&&s.success&&x()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:136,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/UnitCategories.tsx",lineNumber:135,columnNumber:5},this)}export{$ as ACTION_TABLE,te as default};
