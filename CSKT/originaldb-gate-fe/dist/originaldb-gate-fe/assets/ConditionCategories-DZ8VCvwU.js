import{e as y,J as F,O as j,Q as K,R as M,t as T,v as O,w as V,x as L,r as l,j as s,k as P,q as R,F as U,y as i,z as q,B as D,aU as B,W as z,E as Y,G}from"./index-DXrCg2vr.js";import{a as _}from"./ReasonCategories.constant-BL3abCC_.js";import{M as H}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const b="condition_categories",J=(n,t)=>y(b,{...n,fields:["*"],filter:t}),Q=async n=>{var c;return{count:(c=(await F(b,{aggregate:{countDistinct:"id"},query:{filter:n}}))[0].countDistinct)==null?void 0:c.id}},W=n=>j(b,{...n}),X=(n,t)=>K(b,n,{...t}),Z=n=>M(b,n),u={NAME:"Nội dung tình trạng TBVT",SHORT_NAME:"Tên viết tắt",IS_ENABLE:"Trạng thái",CODE:"Mã tình trạng TBVT",TYPE_FOR:"Loại"},$=({action:n,detail:t})=>{const[c]=T.useForm(),r=O(),N=V(),{openMessage:m}=L(),f=l.useMemo(()=>[{title:u.NAME,content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:u.CODE,content:(t==null?void 0:t.code)||null,dataIndex:"code"},{title:u.TYPE_FOR,content:(t==null?void 0:t.type_for)||null,dataIndex:"type_for"},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]),p=()=>{if(n===i.View){h();return}else c.submit()},h=()=>{r.hide(),N.closeModal({success:!0})},d=async()=>{try{r.show();const e=c.getFieldsValue();switch(n){case i.Update:await X(t==null?void 0:t.id,e),m({type:"success",content:"Cập nhật thành công"});break;case i.Create:await W({...e}),m({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case i.View:break}h()}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),r.hide()}},x=async()=>{try{await Z(t==null?void 0:t.id),m({type:"success",content:"Xóa thành công"}),r.hide(),N.closeModal({})}catch(e){console.log(e),m({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}};return s.jsxDEV(P,{...R,className:"flex",size:20,children:[s.jsxDEV(U,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:s.jsxDEV(H,{name:"Tình trạng trang bị",action:n,hanldeFinish:p,handleDelete:x},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:141,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:136,columnNumber:7},void 0),s.jsxDEV(T,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:d,disabled:n===i.View,children:n===i.Update||n===i.Create?s.jsxDEV(s.Fragment,{children:f.map((e,g)=>s.jsxDEV(I,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:e.dataIndex==="order_number",selectField:{isSelect:(e==null?void 0:e.dataIndex)==="type_for",dataSelect:_},isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:153,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:150,columnNumber:11},void 0):s.jsxDEV(s.Fragment,{children:f.map((e,g)=>s.jsxDEV("div",{className:"flex flex-col pb-4",children:s.jsxDEV(I,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:179,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:178,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:175,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:143,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/ConditionCategoriesAction.tsx",lineNumber:131,columnNumber:5},void 0)},E=$,v=[{key:i.View,icon:s.jsxDEV(G,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:21,columnNumber:11},void 0),tooltip:"Chi tiết"}];function re(){const{openModal:n}=V(),[t,c]=l.useState([]),[r,N]=l.useState({count:0}),[m,f]=l.useState(!1),[p,h]=l.useState({}),[d,x]=l.useState({page:1,pageSize:q}),e=[{title:u.NAME,dataIndex:"name",width:300,fixed:"left",key:D.Name,render:(o,a)=>s.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>S(i.View,a),children:o??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:45,columnNumber:11},this)},{title:u.CODE,dataIndex:"code",width:200},{title:u.IS_ENABLE,dataIndex:"is_enable",width:150,render:o=>o?s.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:63,columnNumber:41},this):s.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:63,columnNumber:93},this)},{title:u.TYPE_FOR,dataIndex:"type_for",width:150,render:o=>s.jsxDEV(s.Fragment,{children:B(o,_)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:71,columnNumber:16},this)}].map(o=>({...o,key:(o==null?void 0:o.key)||z()})),g=async(o,a,C)=>{try{f(!0);const w=await Promise.all([await J({limit:a,page:o},C),await Q(C)]);c(w[0]),N(w[1]),f(!1)}catch{f(!1)}},S=(o,a)=>{o===i.View&&A(a)},A=o=>{n(s.jsxDEV(E,{detail:o,action:i.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:109,columnNumber:7},this),{width:"40vw",onModalClose(a){a!=null&&a.success?n(s.jsxDEV(E,{detail:o,action:i.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:115,columnNumber:15},this),{width:"40vw",onModalClose(C){C!=null&&C.success,k()}}):k()}})},k=()=>{g(d.page,d.pageSize,p)};return l.useEffect(()=>{g(d.page,d.pageSize,p)},[d,p]),s.jsxDEV(s.Fragment,{children:s.jsxDEV(Y,{total:(r==null?void 0:r.count)||0,className:"mt-5",setFilter:h,setPagination:x,isReloadButton:!1,dataSource:t,columns:e,actionList:v,isAction:!1,loading:m,paginationCustom:{current:d.page,pageSize:d.pageSize,total:r==null?void 0:r.count},onChange:({current:o,pageSize:a})=>{x({page:o,pageSize:a}),g(o,a,p)},actionClick:S,filterColumns:[D.Name],btnCreate:!0,handleCreate:()=>{n(s.jsxDEV(E,{action:i.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:173,columnNumber:13},this),{width:"40vw",onModalClose(o){o!=null&&o.success&&k()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:145,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/ConditionCategories.tsx",lineNumber:144,columnNumber:5},this)}export{v as ACTION_TABLE,re as default};
