import{e as M,J as y,O as j,Q as A,R as L,t as D,x as F,v as K,w as V,r as f,aH as O,j as a,k as R,q,F as U,y as o,z as B,B as S,W as z,E as H,G as P}from"./index-DXrCg2vr.js";import{M as X}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as T}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const N="qualification_categories",G=(s,t)=>M(N,{...s,fields:["*"],filter:t}),J=async s=>{var l;return{count:(l=(await y(N,{aggregate:{countDistinct:"id"},query:{filter:s}}))[0].countDistinct)==null?void 0:l.id}},W=s=>j(N,{...s}),Z=(s,t)=>A(N,s,{...t}),$=s=>L(N,s),Y=({action:s,detail:t})=>{const[l]=D.useForm(),{openMessage:i}=F(),u=K(),b=V(),p=async()=>{try{u.show();const e=l.getFieldsValue();switch(s){case o.Update:await Z(t==null?void 0:t.id,e),i({type:"success",content:"Cập nhật thành công"});break;case o.Create:await W(e),i({type:"success",content:"Thêm mới thành công"}),l.resetFields();break;case o.View:break}m()}catch(e){console.log(e),i({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),u.hide()}},d=async()=>{try{await $(t==null?void 0:t.id),i({type:"success",content:"Xóa trình độ học vấn thành công"}),u.hide(),b.closeModal({})}catch(e){console.log(e),i({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},C=()=>{if(s===o.View){m();return}else l.submit()},m=()=>{u.hide(),b.closeModal({success:!0})},k=f.useMemo(()=>[{title:"Tên trình độ học vấn",content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:"Tên viết tắt",content:(t==null?void 0:t.short_name)||null,dataIndex:"short_name"},{title:"Mã trình độ học vấn",content:(t==null?void 0:t.code)||null,dataIndex:"code"},{title:"Mã quốc gia mở rộng CSDL Quốc gia",content:(t==null?void 0:t.code_ex)??null,dataIndex:"code_ex"},{title:"Mã định danh mở rộng CSDL Quốc gia",content:(t==null?void 0:t.id_ex)??null,dataIndex:"id_ex"},{title:O.ORDER_NUMBER,content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]);return a.jsxDEV(R,{...q,className:"flex",size:20,children:[a.jsxDEV(U,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:a.jsxDEV(X,{name:"chức vụ",action:s,hanldeFinish:C,handleDelete:d},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:151,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:146,columnNumber:7},void 0),a.jsxDEV(D,{form:l,preserve:!1,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:p,disabled:s===o.View,children:s===o.Update||s===o.Create?a.jsxDEV(a.Fragment,{children:k.map((e,g)=>a.jsxDEV(T,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:198,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:195,columnNumber:11},void 0):a.jsxDEV(a.Fragment,{children:k.map((e,g)=>a.jsxDEV("div",{className:"flex flex-col pb-4",children:a.jsxDEV(T,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:219,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:218,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:215,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:154,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/QualificationCategoriesCreate.tsx",lineNumber:141,columnNumber:5},void 0)},w=Y;var c=(s=>(s.Name="name",s.ShortName="short_name",s.Code="code",s.Code_ex="code_ex",s.Id_ex="id_ex",s.Is_enable="is_enable",s))(c||{});const x={NAME:"Tên trình độ",SHORT_NAME:"Tên viết tắt",CODE:"Mã trình độ",ID_EX:"Mã định danh mở rộng CSDL Quốc gia",CODE_EX:"Mã quốc gia mở rộng CSDL Quốc gia",IS_ENABLE:"Trạng thái"},v=[{key:o.View,icon:a.jsxDEV(P,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:23,columnNumber:11},void 0),tooltip:"Chi tiết"}];function ie(){const{openModal:s}=V(),[t,l]=f.useState([]),[i,u]=f.useState({count:0}),[b,p]=f.useState(!1),[d,C]=f.useState({page:1,pageSize:B}),[m,k]=f.useState({}),e=[{title:"Tên trình độ học vấn",dataIndex:c.Name,key:S.Name,fixed:"left",render:(n,r)=>a.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>_(o.View,r),children:n??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:45,columnNumber:11},this)},{title:x.SHORT_NAME,dataIndex:c.ShortName,key:S.ShortName},{title:x.CODE,dataIndex:c.Code,key:c.Code},{title:x.CODE_EX,dataIndex:c.Code_ex,key:c.Code_ex},{title:x.ID_EX,dataIndex:c.Id_ex,key:c.Id_ex},{title:x.IS_ENABLE,dataIndex:c.Is_enable,render:n=>n?a.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:77,columnNumber:41},this):a.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:77,columnNumber:93},this)},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:n=>n?a.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:85,columnNumber:23},this):a.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:85,columnNumber:75},this)}].map(n=>({...n,key:(n==null?void 0:n.key)||z()})),g=async(n,r,I)=>{try{p(!0);const h=await Promise.all([await G({limit:r,page:n},I),await J(I)]);l(h[0]),u(h[1]),p(!1)}catch(h){p(!1),console.log(h)}},Q=n=>{s(a.jsxDEV(w,{detail:n,action:o.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:118,columnNumber:7},this),{width:"40vw",onModalClose(r){r!=null&&r.success?s(a.jsxDEV(w,{detail:n,action:o.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:124,columnNumber:15},this),{width:"40vw",onModalClose(){E()}}):E()}})},_=(n,r)=>{n===o.View&&Q(r)},E=()=>{g(d.page,d.pageSize,m)};return f.useEffect(()=>{g(d.page,d.pageSize,m)},[d,m]),a.jsxDEV("div",{className:"w-[900px]",children:a.jsxDEV(H,{total:(i==null?void 0:i.count)||0,className:"mt-5",isReloadButton:!1,dataSource:t,columns:e,actionList:v,isAction:!1,paginationCustom:{current:d.page,pageSize:d.pageSize,total:i==null?void 0:i.count},onChange:({current:n,pageSize:r})=>{C({page:n,pageSize:r}),g(n,r,m)},x:1300,loading:b,actionClick:_,filterColumns:[S.Name],btnCreate:!0,handleCreate:()=>{s(a.jsxDEV(w,{action:o.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:179,columnNumber:13},this),{width:"40vw",onModalClose(n){n!=null&&n.success&&E()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:153,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/QualificationCategories.tsx",lineNumber:152,columnNumber:5},this)}export{v as ACTION_TABLE,ie as default};
