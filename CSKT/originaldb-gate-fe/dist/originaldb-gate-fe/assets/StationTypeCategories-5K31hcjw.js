import{t as w,v as V,w as I,x as j,r as d,j as n,k as K,q as M,F,y as a,H as E,z as L,B as D,W as P,E as q,aQ as R}from"./index-DXrCg2vr.js";import{g as _,c as U,u as z,r as B,m as O}from"./StationType.action-vp6QDcJD.js";import{M as H}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as A}from"./ItemsComponent-Ct2UsBCT.js";import{P as G}from"./PlusCircleOutlined-JzIS5LvP.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const u={NAME:"Tên loại trạm",CODE:"",PARENT_ID:"Thuộc Loại trạm (nhóm trên)",IS_ENABLE:"Trạng thái"},Q=({detail:o,action:p,parent_id:f=null})=>{const[i]=w.useForm(),b=V(),T=I(),{openMessage:c}=j(),[m,S]=d.useState([]),l=async()=>{try{const e=await _({},{});S(e)}catch{}},y=async()=>{var e,s;try{b.show();const t=i.getFieldsValue(),r=(e=t==null?void 0:t.parent_id)!=null&&e.value?(s=t==null?void 0:t.parent_id)==null?void 0:s.value:t==null?void 0:t.parent_id;switch(p){case a.Update:await z(o==null?void 0:o.id,{...t,parent_id:r}),c({type:"success",content:"Cập nhật thành công"});break;case a.Create:await U(t),c({type:"success",content:"Thêm mới thành công"}),i.resetFields();break;case a.View:break}g()}catch(t){console.log(t),c({type:"error",content:(t==null?void 0:t.message)||"Lỗi hệ thống"}),b.hide()}},C=async()=>{try{await B(o==null?void 0:o.id),c({type:"success",content:"Xóa thành công"}),g()}catch(e){console.log(e),c({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},N=()=>{if(p===a.View){g();return}else i.submit()},g=()=>{b.hide(),T.closeModal({success:!0})};d.useEffect(()=>{l()},[]);const h=d.useMemo(()=>[{title:u.NAME,content:(o==null?void 0:o.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Hãy nhập thông tin cho trường tên quốc gia"}]},{title:u.PARENT_ID,content:f||(o==null?void 0:o.parent)||null,dataIndex:"parent_id"},{title:u.IS_ENABLE,content:(o==null?void 0:o.is_enable)===void 0?!0:o==null?void 0:o.is_enable,dataIndex:"is_enable"},{title:"Số thứ tự",content:(o==null?void 0:o.order_number)||null,dataIndex:"order_number"}],[o]);return n.jsxDEV(K,{...M,className:"flex",size:20,children:[n.jsxDEV(F,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:n.jsxDEV(H,{name:"quốc gia",action:p,hanldeFinish:N,handleDelete:C},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:151,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:146,columnNumber:7},void 0),n.jsxDEV(w,{form:i,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:p===a.View,onFinish:y,children:p===a.Update||p===a.Create?n.jsxDEV(n.Fragment,{children:h.map((e,s)=>n.jsxDEV(A,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,disable:!!(f&&(e==null?void 0:e.dataIndex)==="parent_id"),selectField:{isSelect:(e==null?void 0:e.dataIndex)==="parent_id",dataSelect:o?E(m,"name","id").filter(t=>t.value!==(o==null?void 0:o.id)):E(m,"name","id")},isRadioField:(e==null?void 0:e.dataIndex)==="is_enable",isNumberField:(e==null?void 0:e.dataIndex)==="order_number",dataIndex:e.dataIndex},s,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:163,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:160,columnNumber:11},void 0):n.jsxDEV(n.Fragment,{children:h.map((e,s)=>n.jsxDEV("div",{className:"flex flex-col pb-4",children:n.jsxDEV(A,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},s,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:196,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:195,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:192,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:153,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationTypeAction.tsx",lineNumber:141,columnNumber:5},void 0)},x=Q,W=[{key:a.Create,icon:n.jsxDEV(G,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:32,columnNumber:11},void 0),className:"border-none text-primary shadow-#0",title:"Thêm mới"}];function se(){const{openModal:o}=I(),[p,f]=d.useState([]),[i,b]=d.useState({count:0}),[T,c]=d.useState(!1),[m,S]=d.useState({page:1,pageSize:L}),[l,y]=d.useState({}),C=[{title:u.NAME,dataIndex:"name",fixed:"left",width:200,key:D.Name,render:(s,t)=>n.jsxDEV("span",{className:"text-primary cursor-pointer font-semibold",onClick:()=>{g(t)},children:s},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:60,columnNumber:11},this)},{title:u.PARENT_ID,dataIndex:"parent",width:300,render:s=>(s==null?void 0:s.name)||"---"},{title:u.IS_ENABLE,dataIndex:"is_enable",width:150,render:s=>s?n.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:83,columnNumber:11},this):n.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:85,columnNumber:11},this)}].map(s=>({...s,key:(s==null?void 0:s.key)||P()})),N=async(s,t,r)=>{try{c(!0);const k=await Promise.all([await _({limit:t,page:s},r),await O({})]);f(k[0]),b(k[1]),c(!1)}catch{c(!1)}},g=s=>{o(n.jsxDEV(x,{detail:s,action:a.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:111,columnNumber:15},this),{width:"40vw",onModalClose(t){t!=null&&t.success&&o(n.jsxDEV(x,{detail:s,action:a.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:116,columnNumber:13},this),{width:"40vw",onModalClose(r){r!=null&&r.success&&e()}})}})},h=(s,t)=>{switch(s){case a.View:g(t);break;case a.Create:o(n.jsxDEV(x,{parent_id:t==null?void 0:t.id,action:a.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:138,columnNumber:11},this),{width:"40vw",onModalClose(r){r!=null&&r.success&&e()}});break}},e=()=>{N(m.page,m.pageSize,l)};return d.useEffect(()=>{N(m.page,m.pageSize,l)},[l]),n.jsxDEV("div",{className:"w-[900px]",children:n.jsxDEV(q,{total:(i==null?void 0:i.count)||0,className:"mt-5",isReloadButton:!1,dataSource:R(p),columns:C,actionList:W,isAction:!0,loading:T,setPagination:S,setFilter:y,paginationCustom:{current:m.page,pageSize:m.pageSize,total:i==null?void 0:i.count},onChange:({current:s,pageSize:t})=>{S({page:s,pageSize:t}),N(s,t,l)},actionClick:h,filterColumns:[D.Name],btnCreate:!0,handleCreate:()=>{o(n.jsxDEV(x,{action:a.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:188,columnNumber:21},this),{width:"40vw",onModalClose(s){s!=null&&s.success&&e()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:163,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationTypeCategories.tsx",lineNumber:162,columnNumber:5},this)}export{W as ACTION_TABLE,se as default};
