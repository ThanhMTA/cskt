import{e as I,J as V,O as j,Q as _,R as K,t as E,v as M,w as O,x as F,r as u,j as n,k as L,q as P,F as q,y as r,z as U,B as S,W as z,E as R,G as B}from"./index-DXrCg2vr.js";import{M as G}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as D}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const b="org_type_categories",H=(o,s)=>I(b,{...o,fields:["*"],filter:s}),J=async o=>{var c;return{count:(c=(await V(b,{aggregate:{countDistinct:"id"},query:{filter:o}}))[0].countDistinct)==null?void 0:c.id}},Q=o=>j(b,{...o}),W=(o,s)=>_(b,o,{...s}),X=o=>K(b,o),p={NAME:"Tên loại đơn vị",DESC:"Mô tả",IS_ENABLE:"Trạng thái",CODE:"Mã loại đơn vị"},Y=({action:o,detail:s})=>{const[c]=E.useForm(),i=M(),N=O(),{openMessage:d}=F(),f=async()=>{try{i.show();const e=c.getFieldsValue();switch(o){case r.Update:await W(s==null?void 0:s.id,e),d({type:"success",content:"Cập nhật thành công"});break;case r.Create:await Q(e),d({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case r.View:break}m()}catch(e){console.log(e),d({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),i.hide()}},g=async()=>{try{await X(s==null?void 0:s.id),d({type:"success",content:"Xóa thành công"}),i.hide(),N.closeModal({})}catch(e){console.log(e),d({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},x=()=>{if(o===r.View){m();return}else c.submit()},m=()=>{i.hide(),N.closeModal({success:!0})},h=u.useMemo(()=>[{title:p.NAME,content:(s==null?void 0:s.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:p.CODE,content:(s==null?void 0:s.code)||null,dataIndex:"code"},{title:p.DESC,content:(s==null?void 0:s.desc)||null,dataIndex:"desc"},{title:"Số thứ tự",content:(s==null?void 0:s.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]);return n.jsxDEV(L,{...P,className:"flex",size:20,children:[n.jsxDEV(q,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:n.jsxDEV(G,{name:"loại đơn vị",action:o,hanldeFinish:x,handleDelete:g},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:139,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:134,columnNumber:7},void 0),n.jsxDEV(E,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:f,disabled:o===r.View,children:o===r.Update||o===r.Create?n.jsxDEV(n.Fragment,{children:h.map((e,l)=>n.jsxDEV(D,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:e.dataIndex==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:151,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:148,columnNumber:11},void 0):n.jsxDEV(n.Fragment,{children:h.map((e,l)=>n.jsxDEV("div",{className:"flex flex-col pb-4",children:n.jsxDEV(D,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:172,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:171,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:168,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:141,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/components/OrgTypeCategoriesAction.tsx",lineNumber:129,columnNumber:5},void 0)},y=Y,Z=[{key:r.View,icon:n.jsxDEV(B,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:22,columnNumber:11},void 0),tooltip:"Chi tiết"}];function ne(){const{openModal:o}=O(),[s,c]=u.useState([]),[i,N]=u.useState({count:0}),[d,f]=u.useState(!1),[g,x]=u.useState({page:1,pageSize:U}),[m,h]=u.useState({}),e=[{title:p.NAME,dataIndex:"name",fixed:"left",width:300,key:S.Name,render:(t,a)=>n.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>w(r.View,a),children:t??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:45,columnNumber:11},this)},{title:p.CODE,dataIndex:"code",width:200},{title:p.IS_ENABLE,dataIndex:"is_enable",width:150,render:t=>t?n.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:63,columnNumber:41},this):n.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:63,columnNumber:93},this)},{title:p.DESC,dataIndex:"desc",width:300}].map(t=>({...t,key:(t==null?void 0:t.key)||z()})),l=async(t,a,k)=>{try{f(!0);const T=await Promise.all([await H({limit:a,page:t},k),await J(k)]);c(T[0]),N(T[1]),f(!1)}catch{f(!1)}},w=(t,a)=>{t===r.View&&A(a)},A=t=>{o(n.jsxDEV(y,{detail:t,action:r.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:106,columnNumber:7},this),{width:"40vw",onModalClose(a){a!=null&&a.success?o(n.jsxDEV(y,{detail:t,action:r.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:112,columnNumber:15},this),{width:"40vw",onModalClose(){C()}}):C()}})},C=()=>{l(g.page,g.pageSize,m)};return u.useEffect(()=>{l(g.page,g.pageSize,m)},[g,m]),n.jsxDEV("div",{className:"w-[900px]",children:n.jsxDEV(R,{total:(i==null?void 0:i.count)||0,className:"mt-5",isReloadButton:!1,setFilter:h,setPagination:x,dataSource:s,columns:e,actionList:Z,isAction:!1,loading:d,paginationCustom:{current:g.page,pageSize:g.pageSize,total:i==null?void 0:i.count},onChange:({current:t,pageSize:a})=>{x({page:t,pageSize:a}),l(t,a,m)},actionClick:w,filterColumns:[S.Name],btnCreate:!0,handleCreate:()=>{o(n.jsxDEV(y,{action:r.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:166,columnNumber:13},this),{width:"40vw",onModalClose(t){t!=null&&t.success&&C()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:139,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/force-categories/pages/OrgTypeCategories.tsx",lineNumber:138,columnNumber:5},this)}export{Z as ACTION_TABLE,ne as default};
