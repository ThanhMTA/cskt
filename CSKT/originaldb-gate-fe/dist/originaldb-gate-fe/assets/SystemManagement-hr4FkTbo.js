import{g as Be,a as Ue,ad as Ne,m as qe,a4 as Ge,r as i,C as xe,c as Y,d3 as he,cP as Xe,ap as We,ai as Qe,cQ as Ze,d4 as Je,d5 as Ye,d6 as re,d7 as es,d8 as ss,A as G,_ as X,b6 as ns,d9 as ye,da as ke,z as q,b8 as ee,j as s,L as H,T as z,cC as ve,E as Ce,aR as ts,aj as Se,db as as,dc as os,dd as ls,e as we,de as rs,df as is,dg as cs,O as ms,dh as ds,t as w,x as us,v as gs,w as Te,y as f,k as Ee,q as De,F as fs,bo as ie,bp as B,ax as R,D as bs,I as F,b4 as Q,bu as ce,f as ps,di as me,dj as Z,aQ as Ns,l as de,h as xs,aO as hs,dk as ys,P as ks,aG as vs}from"./index-DXrCg2vr.js";import{B as Ae,M as je}from"./MenuFoldOutlined-DOvAPFps.js";import{a as Ve}from"./arrayToTree.min-Bpdh5Rxo.js";import{P as ue}from"./index-B0_H1u92.js";import{E as Cs}from"./EditOutlined-DoH4gKd9.js";import{T as Ke,D as Ss}from"./index-CfEarsVi.js";const ws=e=>{const{paddingXXS:n,lineWidth:r,tagPaddingHorizontal:c,componentCls:o,calc:p}=e,g=p(c).sub(r).equal(),y=p(n).sub(r).equal();return{[o]:Object.assign(Object.assign({},Ue(e)),{display:"inline-block",height:"auto",marginInlineEnd:e.marginXS,paddingInline:g,fontSize:e.tagFontSize,lineHeight:e.tagLineHeight,whiteSpace:"nowrap",background:e.defaultBg,border:`${Ne(e.lineWidth)} ${e.lineType} ${e.colorBorder}`,borderRadius:e.borderRadiusSM,opacity:1,transition:`all ${e.motionDurationMid}`,textAlign:"start",position:"relative",[`&${o}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:e.defaultColor},[`${o}-close-icon`]:{marginInlineStart:y,fontSize:e.tagIconSize,color:e.colorTextDescription,cursor:"pointer",transition:`all ${e.motionDurationMid}`,"&:hover":{color:e.colorTextHeading}},[`&${o}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${e.iconCls}-close, ${e.iconCls}-close:hover`]:{color:e.colorTextLightSolid}},"&-checkable":{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${o}-checkable-checked):hover`]:{color:e.colorPrimary,backgroundColor:e.colorFillSecondary},"&:active, &-checked":{color:e.colorTextLightSolid},"&-checked":{backgroundColor:e.colorPrimary,"&:hover":{backgroundColor:e.colorPrimaryHover}},"&:active":{backgroundColor:e.colorPrimaryActive}},"&-hidden":{display:"none"},[`> ${e.iconCls} + span, > span + ${e.iconCls}`]:{marginInlineStart:g}}),[`${o}-borderless`]:{borderColor:"transparent",background:e.tagBorderlessBg}}},se=e=>{const{lineWidth:n,fontSizeIcon:r,calc:c}=e,o=e.fontSizeSM;return qe(e,{tagFontSize:o,tagLineHeight:Ne(c(e.lineHeightSM).mul(o).equal()),tagIconSize:c(r).sub(c(n).mul(2)).equal(),tagPaddingHorizontal:8,tagBorderlessBg:e.defaultBg})},ne=e=>({defaultBg:new Ge(e.colorFillQuaternary).onBackground(e.colorBgContainer).toHexString(),defaultColor:e.colorText}),Me=Be("Tag",e=>{const n=se(e);return ws(n)},ne);var Ts=function(e,n){var r={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&n.indexOf(c)<0&&(r[c]=e[c]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,c=Object.getOwnPropertySymbols(e);o<c.length;o++)n.indexOf(c[o])<0&&Object.prototype.propertyIsEnumerable.call(e,c[o])&&(r[c[o]]=e[c[o]]);return r};const Es=i.forwardRef((e,n)=>{const{prefixCls:r,style:c,className:o,checked:p,onChange:g,onClick:y}=e,b=Ts(e,["prefixCls","style","className","checked","onChange","onClick"]),{getPrefixCls:A,tag:S}=i.useContext(xe),k=x=>{g==null||g(!p),y==null||y(x)},D=A("tag",r),[O,K,l]=Me(D),T=Y(D,`${D}-checkable`,{[`${D}-checkable-checked`]:p},S==null?void 0:S.className,o,K,l);return O(i.createElement("span",Object.assign({},b,{ref:n,style:Object.assign(Object.assign({},c),S==null?void 0:S.style),className:T,onClick:k})))}),Ds=Es,As=e=>Xe(e,(n,r)=>{let{textColor:c,lightBorderColor:o,lightColor:p,darkColor:g}=r;return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:c,background:p,borderColor:o,"&-inverse":{color:e.colorTextLightSolid,background:g,borderColor:g},[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}}),js=he(["Tag","preset"],e=>{const n=se(e);return As(n)},ne);function Vs(e){return typeof e!="string"?e:e.charAt(0).toUpperCase()+e.slice(1)}const U=(e,n,r)=>{const c=Vs(r);return{[`${e.componentCls}${e.componentCls}-${n}`]:{color:e[`color${r}`],background:e[`color${c}Bg`],borderColor:e[`color${c}Border`],[`&${e.componentCls}-borderless`]:{borderColor:"transparent"}}}},Ks=he(["Tag","status"],e=>{const n=se(e);return[U(n,"success","Success"),U(n,"processing","Info"),U(n,"error","Error"),U(n,"warning","Warning")]},ne);var Ms=function(e,n){var r={};for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&n.indexOf(c)<0&&(r[c]=e[c]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,c=Object.getOwnPropertySymbols(e);o<c.length;o++)n.indexOf(c[o])<0&&Object.prototype.propertyIsEnumerable.call(e,c[o])&&(r[c[o]]=e[c[o]]);return r};const Os=i.forwardRef((e,n)=>{const{prefixCls:r,className:c,rootClassName:o,style:p,children:g,icon:y,color:b,onClose:A,bordered:S=!0,visible:k}=e,D=Ms(e,["prefixCls","className","rootClassName","style","children","icon","color","onClose","bordered","visible"]),{getPrefixCls:O,direction:K,tag:l}=i.useContext(xe),[T,x]=i.useState(!0),E=We(D,["closeIcon","closable"]);Qe("Tag").deprecated(!("visible"in e),"visible","visible && <Tag />"),i.useEffect(()=>{k!==void 0&&x(k)},[k]);const M=Ze(b),t=Je(b),u=M||t,v=Object.assign(Object.assign({backgroundColor:b&&!u?b:void 0},l==null?void 0:l.style),p),N=O("tag",r),[_,m,a]=Me(N),d=Y(N,l==null?void 0:l.className,{[`${N}-${b}`]:u,[`${N}-has-color`]:b&&!u,[`${N}-hidden`]:!T,[`${N}-rtl`]:K==="rtl",[`${N}-borderless`]:!S},c,o,m,a),h=$=>{$.stopPropagation(),A==null||A($),!$.defaultPrevented&&x(!1)},[,j]=Ye(re(e),re(l),{closable:!1,closeIconRender:$=>{const He=i.createElement("span",{className:`${N}-close-icon`,onClick:h},$);return ss($,He,L=>({onClick:le=>{var W;(W=L==null?void 0:L.onClick)===null||W===void 0||W.call(L,le),h(le)},className:Y(L==null?void 0:L.className,`${N}-close-icon`)}))}}),I=typeof D.onClick=="function"||g&&g.type==="a",ae=y||null,Pe=ae?i.createElement(i.Fragment,null,ae,g&&i.createElement("span",null,g)):g,oe=i.createElement("span",Object.assign({},E,{ref:n,className:d,style:v}),Pe,j,M&&i.createElement(js,{key:"preset",prefixCls:N}),t&&i.createElement(Ks,{key:"status",prefixCls:N}));return _(I?i.createElement(es,{component:"Tag"},oe):oe)}),te=Os;te.displayName="Tag";te.CheckableTag=Ds;const ge=te;var _s={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};const Is=_s;var $s=function(n,r){return i.createElement(G,X({},n,{ref:r,icon:Is}))},Oe=i.forwardRef($s);Oe.displayName="DeleteOutlined";const fe=Oe;var Ls={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M536.1 273H488c-4.4 0-8 3.6-8 8v275.3c0 2.6 1.2 5 3.3 6.5l165.3 120.7c3.6 2.6 8.6 1.9 11.2-1.7l28.6-39c2.7-3.7 1.9-8.7-1.7-11.2L544.1 528.5V281c0-4.4-3.6-8-8-8zm219.8 75.2l156.8 38.3c5 1.2 9.9-2.6 9.9-7.7l.8-161.5c0-6.7-7.7-10.5-12.9-6.3L752.9 334.1a8 8 0 003 14.1zm167.7 301.1l-56.7-19.5a8 8 0 00-10.1 4.8c-1.9 5.1-3.9 10.1-6 15.1-17.8 42.1-43.3 80-75.9 112.5a353 353 0 01-112.5 75.9 352.18 352.18 0 01-137.7 27.8c-47.8 0-94.1-9.3-137.7-27.8a353 353 0 01-112.5-75.9c-32.5-32.5-58-70.4-75.9-112.5A353.44 353.44 0 01171 512c0-47.8 9.3-94.2 27.8-137.8 17.8-42.1 43.3-80 75.9-112.5a353 353 0 01112.5-75.9C430.6 167.3 477 158 524.8 158s94.1 9.3 137.7 27.8A353 353 0 01775 261.7c10.2 10.3 19.8 21 28.6 32.3l59.8-46.8C784.7 146.6 662.2 81.9 524.6 82 285 82.1 92.6 276.7 95 516.4 97.4 751.9 288.9 942 524.8 942c185.5 0 343.5-117.6 403.7-282.3 1.5-4.2-.7-8.9-4.9-10.4z"}}]},name:"history",theme:"outlined"};const Fs=Ls;var zs=function(n,r){return i.createElement(G,X({},n,{ref:r,icon:Fs}))},_e=i.forwardRef(zs);_e.displayName="HistoryOutlined";const Ie=_e;var Rs={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M521.7 82c-152.5-.4-286.7 78.5-363.4 197.7-3.4 5.3.4 12.3 6.7 12.3h70.3c4.8 0 9.3-2.1 12.3-5.8 7-8.5 14.5-16.7 22.4-24.5 32.6-32.5 70.5-58.1 112.7-75.9 43.6-18.4 90-27.8 137.9-27.8 47.9 0 94.3 9.3 137.9 27.8 42.2 17.8 80.1 43.4 112.7 75.9 32.6 32.5 58.1 70.4 76 112.5C865.7 417.8 875 464.1 875 512c0 47.9-9.4 94.2-27.8 137.8-17.8 42.1-43.4 80-76 112.5s-70.5 58.1-112.7 75.9A352.8 352.8 0 01520.6 866c-47.9 0-94.3-9.4-137.9-27.8A353.84 353.84 0 01270 762.3c-7.9-7.9-15.3-16.1-22.4-24.5-3-3.7-7.6-5.8-12.3-5.8H165c-6.3 0-10.2 7-6.7 12.3C234.9 863.2 368.5 942 520.6 942c236.2 0 428-190.1 430.4-425.6C953.4 277.1 761.3 82.6 521.7 82zM395.02 624v-76h-314c-4.4 0-8-3.6-8-8v-56c0-4.4 3.6-8 8-8h314v-76c0-6.7 7.8-10.5 13-6.3l141.9 112a8 8 0 010 12.6l-141.9 112c-5.2 4.1-13 .4-13-6.3z"}}]},name:"login",theme:"outlined"};const Ps=Rs;var Hs=function(n,r){return i.createElement(G,X({},n,{ref:r,icon:Ps}))},$e=i.forwardRef(Hs);$e.displayName="LoginOutlined";const Bs=$e;var Us={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const qs=Us;var Gs=function(n,r){return i.createElement(G,X({},n,{ref:r,icon:qs}))},Le=i.forwardRef(Gs);Le.displayName="RedoOutlined";const Fe=Le;var P=(e=>(e.Activity="ACTIVITY",e.Account="ACCOUNT",e))(P||{}),V=(e=>(e.INDEX="index",e.ACTION="action",e.COLLECTION="collection",e.ACTION_AT="timestamp",e.ACTION_BY="user",e.AGENT="revisions",e.IP_ADRESS="ip",e))(V||{});const Xs={login:"Đăng nhập",create:"Thêm mới",update:"Cập nhật",delete:"Xoá"},Ws=(e,n)=>ns({...e,fields:["*",{user:["first_name","last_name"]},{revisions:["data"]}],filter:n,sort:["timestamp"]}),Qs=async e=>{var o;const r=`activity?aggregate[countDistinct]=id${e?ye(e):""}`;return{count:(o=(await ke(r,{}))[0].countDistinct)==null?void 0:o.id}},Zs=[{key:"0",name:"Tất cả",value:"all",icon:s.jsxDEV(Ie,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:17,columnNumber:15},void 0)},{key:"1",name:"Thêm mới",value:"create",icon:s.jsxDEV(ts,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:23,columnNumber:15},void 0)},{key:"2",name:"Sửa",value:"update",icon:s.jsxDEV(Se,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:29,columnNumber:15},void 0)},{key:"3",name:"Xoá",value:"delete",icon:s.jsxDEV(as,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:35,columnNumber:15},void 0)},{key:"4",name:"Đăng nhập",value:"login",icon:s.jsxDEV(Bs,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:41,columnNumber:15},void 0)},{key:"5",name:"Đăng xuất",value:"logout",icon:s.jsxDEV(os,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:47,columnNumber:15},void 0)}],Js=()=>{const[e,n]=i.useState({page:1,pageSize:q}),[r,c]=i.useState(!0),[o,p]=i.useState({}),[g,y]=i.useState([]),[b,A]=i.useState({count:0}),[S,k]=i.useState(!1),D=()=>{c(!r)},O=i.useMemo(()=>[{title:"Hành động",dataIndex:V.ACTION,key:V.ACTION,render:l=>Xs[l]},{title:"Dữ liệu",dataIndex:V.COLLECTION,key:V.COLLECTION},{title:"Thời gian",dataIndex:V.ACTION_AT,key:V.ACTION_AT,render:l=>ee(l).format("HH:MM DD/MM/YYYY")},{title:"Cán bộ",dataIndex:V.ACTION_BY,key:V.ACTION_BY,render:l=>`${l==null?void 0:l.first_name} ${l==null?void 0:l.last_name}`},{title:"Thông tin truy cập",dataIndex:V.AGENT,key:V.AGENT,width:"40%",render:l=>{var M;const T=(M=l==null?void 0:l[0])==null?void 0:M.data;if(!T)return"";const x=JSON.stringify(T),E=x.length>50?`${x.slice(0,70)}...`:x;return s.jsxDEV("span",{title:x,children:E},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:96,columnNumber:28},void 0)}},{title:"Địa chỉ IP",dataIndex:V.IP_ADRESS,key:V.IP_ADRESS}],[]),K=async(l,T,x)=>{k(!0);try{const E=await Ws({limit:T,page:l},x),M=await Qs(x);y(E),A(M)}catch(E){console.log("error: ",E)}finally{k(!1)}};return i.useEffect(()=>{K(e.page,e.pageSize,o)},[e,o]),s.jsxDEV("div",{className:"overflow-hidden rounded-lg bg-white",style:{height:`calc(100vh - ${H.SectionMargin}px)`},children:s.jsxDEV("div",{className:"flex gap-4 p-4",style:{height:`calc(100% - ${H.TabMargin}px)`},children:[s.jsxDEV("div",{className:`transition-all duration-300 ${r?"w-[268px]":"w-16 border"} approval-filter-container flex max-h-full flex-col rounded-lg bg-white`,children:[s.jsxDEV("div",{className:`flex items-center px-4 py-2 ${r?"justify-between rounded-t-lg border":"justify-center"}`,children:[s.jsxDEV("h3",{className:`${r?"block":"hidden"} text-nowrap text-base font-medium leading-[26px]`,children:"Bộ lọc tìm kiếm"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:143,columnNumber:25},void 0),s.jsxDEV("div",{className:"flex flex-row gap-2",children:[s.jsxDEV(z,{title:"Làm mới bộ lọc",children:s.jsxDEV("button",{className:"m-0 p-0",onClick:()=>{p({})},children:s.jsxDEV(Fe,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:151,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:150,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:149,columnNumber:29},void 0),s.jsxDEV("button",{onClick:D,children:s.jsxDEV(Ae,{color:"#0074D6",count:0,className:"scale-[80%] text-xl",children:r?s.jsxDEV(je,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:156,columnNumber:45},void 0):s.jsxDEV(ve,{className:"text-[#8C9093]"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:156,columnNumber:68},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:155,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:154,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:148,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:139,columnNumber:21},void 0),s.jsxDEV("div",{className:`${r?"block w-[268px]":"hidden"} flex-1 overflow-auto rounded-b-lg border border-t-0 p-4`,children:s.jsxDEV("div",{className:"flex flex-col -mt-3",children:Zs.map(l=>s.jsxDEV("div",{className:"flex flex-col",children:[s.jsxDEV("div",{className:"flex flex-row py-2 px-1 hover:bg-secondary my-1 rounded-sm cursor-pointer",onClick:()=>{(l==null?void 0:l.value)==="all"?p({}):p({action:{_eq:l==null?void 0:l.value}})},children:[l==null?void 0:l.icon,s.jsxDEV("div",{className:"mx-2",children:l==null?void 0:l.name},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:183,columnNumber:41},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:168,columnNumber:37},void 0),(l==null?void 0:l.key)==="0"&&s.jsxDEV("div",{className:"flex bg-black border-t my-1"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:186,columnNumber:41},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:167,columnNumber:33},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:165,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:161,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:135,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex-1 overflow-auto",children:s.jsxDEV(Ce,{loading:S,columns:O,dataSource:g,setPagination:n,onChange:({current:l,pageSize:T})=>{n({page:l,pageSize:T}),K(l,T,o)},paginationCustom:{current:e.page,pageSize:e.pageSize,total:(b==null?void 0:b.count)||0},rowKey:"id",scroll:void 0},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:195,columnNumber:21},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:194,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:134,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Activity.tsx",lineNumber:130,columnNumber:9},void 0)},Ys=Js;var C=(e=>(e.INDEX="index",e.FULL_NAME="full_name",e.EMAIL="email",e.RANK="rank_id",e.POSITION="position_id",e.ORGANIZATION="org_id",e.PHONE_NUMBER="phone_number",e.DOB="birthday",e.NOTE="note",e.STATUS="status",e))(C||{});const en="personal_identifies",sn=async(e,n)=>await ls({...e,alias:{value:"id",key:"id"},fields:["*","value","key",{personal_id:["*",{rank_id:["*"]},{position_id:["*"]},{org_id:["*"]}]},{role:["*"]}],filter:n}),nn=async e=>{var o;const r=`users?aggregate[countDistinct]=id${e?ye(e):""}`;return{count:(o=(await ke(r,{}))[0].countDistinct)==null?void 0:o.id}},tn=(e,n)=>rs(e,{...n}),an=e=>is({...e}),on=e=>cs(e),ln=e=>ms(en,{...e}),ze=()=>we("organizations",{alias:{parentId:"parent_id",value:"id",key:"id",title:"name"},fields:["id","key","name","value","title","parentId","parent_id","order_number"],limit:-1,sort:["order_number","code"]}),rn=()=>ds({alias:{value:"id",key:"id",label:"name"},fields:["id","name","label","value"],limit:-1}),be=e=>we(e,{alias:{value:"id",key:"id",label:"name"},fields:["id","name","label","value","key"],limit:-1});var Re=(e=>(e.ADMIN="Administrator",e))(Re||{});const cn=[{key:"draft",value:"draft",label:"Đã khoá"},{key:"active",value:"active",label:"Đang hoạt động"}],J=({action:e,detail:n})=>{var E,M;const[r,c]=i.useState(!0),[o,p]=i.useState(!1),[g]=w.useForm(),[y,b]=i.useState([]),[A,S]=i.useState({role:[],rank:[],position:[]}),{openMessage:k}=us(),D=gs(),O=Te(),K=()=>{D.hide(),O.closeModal({success:!0})},l=async()=>{try{await on(n==null?void 0:n.id),K()}catch{k({type:"success",content:"Xoá thành công"})}},T=async()=>{try{D.show();const t=g.getFieldsValue(),u=t!=null&&t.status?t==null?void 0:t.status:"active",v=t==null?void 0:t.role,N={name:t==null?void 0:t.name,rank_id:t==null?void 0:t.rank_id,position_id:t==null?void 0:t.position_id,phone_number:t==null?void 0:t.phone_number,org_id:t==null?void 0:t.org_id,birthday:t==null?void 0:t.birthday};if(e===f.Update)await tn(n==null?void 0:n.id,{personal_id:N,status:u,role:v}),k({type:"success",content:"Cập nhật thành công"});else if(e===f.Create){const _=await ln(N);if(_.id)try{await an({personal_id:_.id,password:t==null?void 0:t.password,email:t==null?void 0:t.email,status:u,role:v}),k({type:"success",content:"Thêm mới thành công"}),g.resetFields()}catch(m){console.log("error: ",m),k({type:"error",content:m.errors[0].message})}}}catch(t){console.log(t),k({type:"error",content:(t==null?void 0:t.message)||"Lỗi hệ thống"})}finally{K()}},x=async()=>{try{const[t,u,v,N]=await Promise.all([ze(),be("rank_categories"),be("position_categories"),rn()]);b(Ve.arrayToTree(t,{dataField:null})),S({rank:u,position:v,role:N})}catch(t){console.log("error: ",t)}};return i.useEffect(()=>{var t,u,v,N,_,m,a,d,h,j,I;x(),g.setFieldsValue({name:((t=n==null?void 0:n.personal_id)==null?void 0:t.name)||null,email:(n==null?void 0:n.email)||null,rank_id:((v=(u=n==null?void 0:n.personal_id)==null?void 0:u.rank_id)==null?void 0:v.id)||null,position_id:((_=(N=n==null?void 0:n.personal_id)==null?void 0:N.position_id)==null?void 0:_.id)||null,org_id:((a=(m=n==null?void 0:n.personal_id)==null?void 0:m.org_id)==null?void 0:a.id)||null,phone_number:((d=n==null?void 0:n.personal_id)==null?void 0:d.phone_number)||null,status:e===f.Create?"active":(n==null?void 0:n.status)||null,role:((h=n==null?void 0:n.role)==null?void 0:h.id)||null,birthday:(j=n==null?void 0:n.personal_id)!=null&&j.birthday?ee((I=n==null?void 0:n.personal_id)==null?void 0:I.birthday):null})},[n]),s.jsxDEV(Ee,{...De,className:"flex",size:20,children:[s.jsxDEV(fs,{align:"center",justify:"space-between",className:"px-6",children:[e===f.Create?s.jsxDEV("div",{className:"text-[22px] font-bold",children:"Thông tin cán bộ"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:172,columnNumber:21},void 0):s.jsxDEV("div",{className:"text-[22px] font-bold",children:`Thông tin cán bộ ${(E=n==null?void 0:n.personal_id)==null?void 0:E.name}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:174,columnNumber:21},void 0),s.jsxDEV("div",{className:"flex flex-row gap-2",children:e===f.View?s.jsxDEV(s.Fragment,{children:[s.jsxDEV(z,{title:"Xóa",children:s.jsxDEV(ue,{title:ie.DELETE,onConfirm:()=>{},okText:B.CORRECT,cancelText:B.NO,children:s.jsxDEV(R,{type:"default",shape:"circle",icon:s.jsxDEV(fe,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:186,columnNumber:81},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:186,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:180,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:179,columnNumber:29},void 0),s.jsxDEV(z,{title:"Chỉnh sửa",children:s.jsxDEV(R,{onClick:l,type:"default",icon:s.jsxDEV(Cs,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:193,columnNumber:43},void 0),shape:"circle"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:190,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:189,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:178,columnNumber:25},void 0):s.jsxDEV(s.Fragment,{children:[s.jsxDEV(z,{title:"Xóa",children:s.jsxDEV(ue,{title:ie.DELETE,onConfirm:l,okText:B.CORRECT,cancelText:B.NO,children:s.jsxDEV(R,{type:"default",shape:"circle",icon:s.jsxDEV(fe,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:207,columnNumber:81},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:207,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:201,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:200,columnNumber:29},void 0),s.jsxDEV(z,{title:"Lưu",children:s.jsxDEV(R,{onClick:()=>{g.submit()},type:"default",icon:s.jsxDEV(Se,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:216,columnNumber:43},void 0),shape:"circle"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:211,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:210,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:199,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:176,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:166,columnNumber:13},void 0),s.jsxDEV(bs,{className:"m-0"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:226,columnNumber:13},void 0),s.jsxDEV(w,{form:g,onFinish:T,layout:"horizontal",labelCol:{span:9},labelAlign:"left",className:"form-item rounded px-6 py-2",requiredMark:(t,u)=>s.jsxDEV(s.Fragment,{children:[t," ",u!=null&&u.required?s.jsxDEV("span",{className:"text-red",children:"  *"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:237,columnNumber:55},void 0):""]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:236,columnNumber:25},void 0),disabled:e===f.View,children:[s.jsxDEV(w.Item,{className:"mb-4",name:"name",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Họ và tên"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:247,columnNumber:25},void 0),rules:[{required:!0,message:"Họ và tên không được để trống"}],children:e===f.Create||f.Update?s.jsxDEV(F,{placeholder:"Nhập họ và tên",className:"border-0",style:{resize:"none"}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:254,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("name")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:256,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:243,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"email",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Email"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:265,columnNumber:25},void 0),rules:[{required:!0,message:"Email không được để trống"},{type:"email",message:"Định dạng email không hợp lệ"}],children:e===f.Create||f.Update?s.jsxDEV(F,{inputMode:"email",disabled:e!==f.Create,placeholder:"Nhập email",className:"border-0 ",style:{resize:"none"}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:277,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("email")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:279,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:261,columnNumber:17},void 0),e===f.Create&&s.jsxDEV(s.Fragment,{children:[s.jsxDEV(w.Item,{name:"password",rules:[{required:!0,message:"Mật khẩu không được để trống"},{validator(t,u){return!u||/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&#])[A-Za-z\d@$!%*?&#]{8,}$/.test(u)?Promise.resolve():Promise.reject(new Error("Mật khẩu phải có ít nhất 8 ký tự, bao gồm chữ hoa, chữ thường, số và ký tự đặc biệt."))}}],label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Mật khẩu"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:305,columnNumber:33},void 0),children:s.jsxDEV(F.Password,{className:"border-0",style:{resize:"none"},placeholder:"Mật khẩu"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:310,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:286,columnNumber:25},void 0),s.jsxDEV(w.Item,{label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Nhập lại mật khẩu"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:317,columnNumber:33},void 0),name:"retype_password",rules:[{required:!0,message:"Vui lòng nhập lại mật khẩu!"},({getFieldValue:t})=>({validator(u,v){return!v||t("password")===v?Promise.resolve():Promise.reject(new Error("Mật khẩu không khớp!"))}})],children:s.jsxDEV(F.Password,{className:"border-0",style:{resize:"none"},placeholder:"Nhập lại mật khẩu"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:339,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:315,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:285,columnNumber:21},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"rank_id",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Cấp bậc"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:351,columnNumber:25},void 0),children:e===f.Create||f.Update?s.jsxDEV(Q,{className:"flex border-0 w-full",allowClear:!0,placeholder:"Chọn cấp bậc",labelRender:t=>t.label,options:A.rank,showSearch:!0,filterOption:(t,u)=>((u==null?void 0:u.label)??"").toLowerCase().includes(t.toLowerCase())},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:357,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("rank_id")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:369,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:347,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"position_id",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Chức vụ"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:377,columnNumber:28},void 0),children:e===f.Create||f.Update?s.jsxDEV(Q,{className:"flex border-0 w-full",allowClear:!0,placeholder:"Chọn chức vụ",options:A.position,showSearch:!0,filterOption:(t,u)=>((u==null?void 0:u.label)??"").toLowerCase().includes(t.toLowerCase())},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:379,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("position_id")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:390,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:374,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"phone_number",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Số điện thoại"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:399,columnNumber:25},void 0),children:e===f.Create||f.Update?s.jsxDEV(F,{placeholder:"Nhập số điện thoại",className:"border-0 ",style:{resize:"none"}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:405,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("phone_number")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:407,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:395,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"org_id",rules:[{required:!0,message:"Tên đơn vị không được để trống"}],label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Tên đơn vị"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:417,columnNumber:25},void 0),children:e===f.Create||f.Update?s.jsxDEV(Ke,{className:"flex border-0 w-full",allowClear:!0,treeLine:r&&{showLeafIcon:o},style:{width:120},treeData:y,placeholder:"Chọn đơn vị",showSearch:!0,filterTreeNode:(t,u)=>((u==null?void 0:u.label)??"").toLowerCase().includes(t.toLowerCase())},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:423,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[11px]",children:[(M=y==null?void 0:y.find(t=>t.id===g.getFieldValue("parent_id")))==null?void 0:M.name," "]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:436,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:412,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"birthday",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Ngày sinh"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:448,columnNumber:25},void 0),children:e===f.Create||f.Update?s.jsxDEV(Ss,{size:"middle",allowClear:!0,className:"flex border-0 w-full",placeholder:"Chọn ngày sinh"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:454,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("birthday")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:461,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:444,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"role",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Nhóm người dùng"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:470,columnNumber:25},void 0),children:e===f.Create||f.Update?s.jsxDEV(Q,{className:"flex border-0 w-full",allowClear:!0,placeholder:"Chọn nhóm người dùng",options:A.role,showSearch:!0,filterOption:(t,u)=>((u==null?void 0:u.label)??"").toLowerCase().includes(t.toLowerCase())},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:476,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("role")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:487,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:466,columnNumber:17},void 0),s.jsxDEV(w.Item,{className:"mb-4",name:"status",label:s.jsxDEV("div",{className:"flex text-[15px] justify-items-start gap-x-1",children:"Trạng thái"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:495,columnNumber:28},void 0),children:e===f.Create||f.Update?s.jsxDEV(ce.Group,{name:"radiogroup",defaultValue:1,children:cn.map(t=>s.jsxDEV(ce,{value:t.key,children:t.label},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:498,columnNumber:52},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:497,columnNumber:25},void 0):s.jsxDEV("p",{className:"px-[12px] text-[15px]",children:g.getFieldValue("status")||""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:501,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:492,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:227,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/AccountModal.tsx",lineNumber:162,columnNumber:9},void 0)},mn={draft:"red",active:"green"},pe={height:30,justifyItems:"center",alignItems:"center"},dn=()=>{const[e]=w.useForm(),{openModal:n}=Te(),[r,c]=i.useState({count:0}),[o,p]=i.useState({}),[g,y]=i.useState(null),[b,A]=i.useState(!0),{userInfo:S}=ps(),[k,D]=i.useState([]),[O,K]=i.useState(!1),[l,T]=i.useState([]),[x,E]=i.useState({page:1,pageSize:q}),M=()=>{A(!b)},t=i.useMemo(()=>[{title:"Họ và tên",dataIndex:C.FULL_NAME,key:C.FULL_NAME,render:(m,a)=>{var d;return console.log("record: ",a),s.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>u(f.View,a),children:((d=a==null?void 0:a.personal_id)==null?void 0:d.name)??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:55,columnNumber:25},void 0)}},{title:"Email",dataIndex:C.EMAIL,key:C.EMAIL,render:m=>m},{title:"Cấp bậc",dataIndex:C.RANK,key:C.RANK,render:(m,a)=>{var d,h;return((h=(d=a==null?void 0:a.personal_id)==null?void 0:d.rank_id)==null?void 0:h.name)??""}},{title:"Chức vụ",dataIndex:C.POSITION,key:C.POSITION,render:(m,a)=>{var d,h;return((h=(d=a==null?void 0:a.personal_id)==null?void 0:d.position_id)==null?void 0:h.name)??""}},{title:"Đơn vị",dataIndex:C.ORGANIZATION,key:C.ORGANIZATION,render:(m,a)=>{var d,h;return((h=(d=a==null?void 0:a.personal_id)==null?void 0:d.org_id)==null?void 0:h.name)??""}},{title:"Số điện thoại",dataIndex:C.PHONE_NUMBER,key:C.PHONE_NUMBER,render:(m,a)=>{var d;return((d=a==null?void 0:a.personal_id)==null?void 0:d.phone_number)??""}},{title:"Ngày sinh",dataIndex:C.DOB,key:C.DOB,render:(m,a)=>{var d,h;return(d=a==null?void 0:a.personal_id)!=null&&d.birthday?ee((h=a==null?void 0:a.personal_id)==null?void 0:h.birthday).format("DD/MM/YYYY"):""}},{title:"Trạng thái",dataIndex:C.STATUS,key:C.STATUS,render:m=>me[m]?s.jsxDEV(ge,{style:pe,color:mn[m],children:me[m]},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:109,columnNumber:41},void 0):s.jsxDEV(ge,{style:pe,children:"Chưa kích hoạt"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:109,columnNumber:119},void 0)}],[]),u=(m,a)=>{switch(m){case f.View:n(s.jsxDEV(J,{detail:a,action:f.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:120,columnNumber:21},void 0),{width:"40vw",onModalClose(d){d!=null&&d.success&&v()}});break;case f.Create:n(s.jsxDEV(J,{action:f.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:133,columnNumber:21},void 0),{width:"40vw",onModalClose(d){d!=null&&d.success&&setTimeout(()=>v(),1e4)}});break}},v=async()=>{try{N(x.page,x.pageSize,o)}catch(m){console.log("error: ",m)}},N=async(m,a,d)=>{var h;K(!0);try{let j={};switch((h=S==null?void 0:S.role)==null?void 0:h.name){case Re.ADMIN:j={status:{_in:[Z.active,Z.draft]}};break;default:j={status:{_in:[Z.active]}};break}Object.keys(d).length!==0&&(j={personal_id:d,...j});const I=await Promise.all([ze(),nn({...j}),sn({limit:a,page:m},{...j})]);D(I[0]),c(I[1]),T(I[2])}catch(j){console.log("error: ",j)}finally{K(!1)}},_=m=>{var a;return m?` - ${(a=k==null?void 0:k.find(d=>(d==null?void 0:d.id)===m))==null?void 0:a.name}`:""};return i.useEffect(()=>{N(x.page,x.pageSize,o)},[x,o]),s.jsxDEV("div",{className:"overflow-hidden rounded-lg bg-white",style:{height:`calc(100vh - ${H.SectionMargin}px)`},children:s.jsxDEV("div",{className:"flex gap-4 p-4",style:{height:`calc(100% - ${H.TabMargin}px)`},children:[s.jsxDEV("div",{className:`transition-all duration-300 ${b?"w-[268px]":"w-16 border"} approval-filter-container flex max-h-full flex-col rounded-lg bg-white`,children:[s.jsxDEV("div",{className:`flex items-center px-4 py-2 ${b?"justify-between rounded-t-lg border":"justify-center"}`,children:[s.jsxDEV("h3",{className:`${b?"block":"hidden"} text-nowrap text-base font-medium leading-[26px]`,children:"Danh sách đơn vị"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:226,columnNumber:25},void 0),s.jsxDEV("div",{className:"flex flex-row gap-2",children:[s.jsxDEV(z,{title:"Làm mới bộ lọc",children:s.jsxDEV("button",{className:"m-0 p-0",onClick:()=>{u(f.Create)},children:s.jsxDEV(Fe,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:236,columnNumber:37},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:233,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:232,columnNumber:29},void 0),s.jsxDEV("button",{onClick:M,children:s.jsxDEV(Ae,{color:"#0074D6",count:0,className:"scale-[80%] text-xl",children:b?s.jsxDEV(je,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:241,columnNumber:45},void 0):s.jsxDEV(ve,{className:"text-[#8C9093]"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:241,columnNumber:68},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:240,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:239,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:231,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:222,columnNumber:21},void 0),s.jsxDEV("div",{className:`${b?"block w-[268px]":"hidden"} flex-1 overflow-auto rounded-b-lg border border-t-0 p-4`,children:s.jsxDEV(w,{form:e,layout:"vertical",onValuesChange:m=>{if(E({page:1,pageSize:q}),m.org_id)y(m.org_id),p(a=>({...a,org_id:{_eq:m.org_id}}));else{const{org_id:a,...d}=o;p(d),y(null)}},children:s.jsxDEV(w.Item,{name:"org_id",label:"",className:"mb-0",children:s.jsxDEV(Ke,{showSearch:!0,allowClear:!0,multiple:!1,treeLine:!0,filterTreeNode:(m,a)=>a.title.toLowerCase().indexOf(m.toLowerCase())>=0,placeholder:"Tìm kiếm tên đơn vị",dropdownStyle:{maxHeight:400,overflow:"auto"},treeDataSimpleMode:!0,style:{width:"100%"},treeDefaultExpandAll:!0,treeData:Ns(Ve.arrayToTree([...k],{dataField:null})),suffixIcon:s.jsxDEV(de,{className:"text-sm text-black"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:288,columnNumber:49},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:271,columnNumber:33},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:270,columnNumber:29},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:250,columnNumber:25},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:246,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:218,columnNumber:17},void 0),s.jsxDEV("div",{className:"flex-1 overflow-auto",children:[s.jsxDEV("div",{className:"flex flex-row pb-2 items-center justify-between",children:[s.jsxDEV("div",{className:"text-nowrap text-base font-medium leading-[26px]",children:`Danh sách cán bộ ${_(g)}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:296,columnNumber:25},void 0),s.jsxDEV("div",{className:"flex flex-row items-center min-w-200 gap-2",children:[s.jsxDEV(F,{className:"rounded-full",placeholder:"Nhập tên cán bộ",allowClear:!0,onChange:m=>{if(E({page:1,pageSize:q}),m.target.value!=="")p(a=>({...a,name:{_contains:m.target.value}}));else{const{name:a,...d}=o;p(d)}},suffix:s.jsxDEV(de,{className:"text-primary"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:316,columnNumber:41},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:298,columnNumber:29},void 0),s.jsxDEV(R,{onClick:()=>{n(s.jsxDEV(J,{action:f.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:320,columnNumber:37},void 0),{width:"40vw",onModalClose(m){m!=null&&m.success&&v()}})},type:"primary",children:"Thêm mới"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:318,columnNumber:29},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:297,columnNumber:25},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:295,columnNumber:21},void 0),s.jsxDEV(Ce,{loading:O,columns:t,dataSource:l,setPagination:E,rowKey:"id",actionClick:u,onChange:({current:m,pageSize:a})=>{E({page:m,pageSize:a}),N(m,a,o)},paginationCustom:{current:x.page,pageSize:x.pageSize,total:(r==null?void 0:r.count)||0}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:335,columnNumber:21},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:294,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:217,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/components/Account.tsx",lineNumber:213,columnNumber:9},void 0)},un=dn;function hn(){const e=xs(),[n,r]=i.useState(P.Activity),c=i.useRef(P.Activity),o=hs(),p=new URLSearchParams(o.search),g=b=>{p.set("tab",b),e({search:p.toString()})},y=i.useMemo(()=>[{key:P.Activity,label:"Quản lý lịch sử truy cập",children:s.jsxDEV("div",{className:"bg-[#F5F5F6] h-svh",children:s.jsxDEV(Ys,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:27,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:26,columnNumber:23},this),icon:s.jsxDEV(Ie,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:29,columnNumber:19},this)},{key:P.Account,label:"Quản lý tài khoản",children:s.jsxDEV("div",{className:"bg-[#F5F5F6] h-svh",children:s.jsxDEV(un,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:35,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:34,columnNumber:23},this),icon:s.jsxDEV(ys,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:37,columnNumber:19},this)}],[]);return s.jsxDEV(Ee,{...De,children:[s.jsxDEV(ks,{title:"QUẢN TRỊ HỆ THỐNG"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:45,columnNumber:13},this),s.jsxDEV("section",{className:"relative",children:[s.jsxDEV("div",{className:"bg-white w-full absolute",style:{height:"calc(100%)",top:`${H.TabMargin-100}px`}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:47,columnNumber:17},this),s.jsxDEV("section",{className:"-mt-3",children:s.jsxDEV("div",{className:"mx-20",children:s.jsxDEV("div",{className:`flex flex-col rounded-lg pb-0 ring-[10px]
             ring-white/30 border-b border-solid border-gray-300 bg-[#F5F5F6]] bg-white overflow-hidden`,children:s.jsxDEV("div",{className:"flex relative",children:s.jsxDEV("div",{className:"w-screen",children:s.jsxDEV(vs,{className:`px-2 rounded-lg
            ring-white/30 border-b border-solid border-gray-300 bg-[#F5F5F6] overflow-hidden`,activeKey:n,items:y,size:"small",onChange:b=>{c.current=b,r(b.toString()),g(b)},tabBarStyle:{background:"#F5F5F6",height:"50px",marginBottom:8,fontSize:"12px",borderRadius:10,cursor:"pointer"}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:62,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:61,columnNumber:33},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:60,columnNumber:29},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:57,columnNumber:25},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:56,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:55,columnNumber:17},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:46,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/system-management/pages/SystemManagement.tsx",lineNumber:44,columnNumber:9},this)}export{hn as default};
