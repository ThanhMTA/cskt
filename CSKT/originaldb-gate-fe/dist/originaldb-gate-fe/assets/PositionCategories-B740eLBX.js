import{e as V,J as M,O as y,Q as A,R as j,t as D,x as F,v as L,w as T,r as f,aH as O,j as o,k as K,q as R,F as q,y as i,z as B,B as _,E as U,G as z}from"./index-DXrCg2vr.js";import{I}from"./ItemsComponent-Ct2UsBCT.js";import{M as X}from"./ModalCategoryActionHeader-CMTsFAdF.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";import"./index-B0_H1u92.js";const H=(t,s)=>V("position_categories",{...t,fields:["*"],filter:s}),G=async t=>{var d;return{count:(d=(await M("position_categories",{aggregate:{countDistinct:"id"},query:{filter:t}}))[0].countDistinct)==null?void 0:d.id}},Q=t=>y("position_categories",{...t}),J=(t,s)=>A("position_categories",t,{...s}),Z=t=>j("position_categories",t),c={NAME:"Tên chức vụ",SHORT_NAME:"Tên viết tắt",CODE:"Mã chức vụ",ID_EX:"Mã định danh mở rộng CSDL Quốc gia",CODE_EX:"Mã quốc gia mở rộng CSDL Quốc gia",IS_ENABLE:"Trạng thái"},$=({action:t,detail:s})=>{const[d]=D.useForm(),{openMessage:r}=F(),u=L(),b=T(),x=async()=>{try{await Z(s==null?void 0:s.id),r({type:"success",content:"Xóa chức vụ thành công"}),u.hide(),b.closeModal({})}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},m=()=>{if(t===i.View){N();return}else d.submit()},N=()=>{u.hide(),b.closeModal({success:!0})},p=async()=>{try{u.show();const e=d.getFieldsValue();switch(t){case i.Update:await J(s==null?void 0:s.id,e),r({type:"success",content:"Cập nhật thành công"});break;case i.Create:await Q(e),r({type:"success",content:"Thêm mới thành công"}),d.resetFields();break;case i.View:break}N()}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),u.hide()}},C=f.useMemo(()=>[{title:c.NAME,content:(s==null?void 0:s.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Thông tin không được để trống!"}]},{title:c.SHORT_NAME,content:(s==null?void 0:s.short_name)||null,dataIndex:"short_name"},{title:c.CODE,content:(s==null?void 0:s.code)||null,dataIndex:"code"},{title:c.CODE_EX,content:(s==null?void 0:s.code_ex)||null,dataIndex:"code_ex"},{title:c.ID_EX,content:(s==null?void 0:s.id_ex)||null,dataIndex:"id_ex"},{title:O.ORDER_NUMBER,content:(s==null?void 0:s.order_number)||null,dataIndex:"order_number"},{title:c.IS_ENABLE,content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]);return o.jsxDEV(K,{...R,className:"flex",size:20,children:[o.jsxDEV(q,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:o.jsxDEV(X,{name:"chức vụ",action:t,hanldeFinish:m,handleDelete:x},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:152,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:147,columnNumber:7},void 0),o.jsxDEV(D,{form:d,preserve:!1,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:p,disabled:t===i.View,children:t===i.Update||t===i.Create?o.jsxDEV(o.Fragment,{children:C.map((e,l)=>o.jsxDEV(I,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:165,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:162,columnNumber:11},void 0):o.jsxDEV(o.Fragment,{children:C.map((e,l)=>o.jsxDEV("div",{className:"flex flex-col pb-4",children:o.jsxDEV(I,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},l,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:186,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:185,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:182,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:154,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/components/PositionCategoriesCreate.tsx",lineNumber:142,columnNumber:5},void 0)},k=$;var g=(t=>(t.Name="name",t.ShortName="short_name",t.Code="code",t.Code_ex="code_ex",t.Id_ex="id_ex",t))(g||{});const W=[{key:i.View,icon:o.jsxDEV(z,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:21,columnNumber:11},void 0),tooltip:"Chi tiết"}];function ne(){const{openModal:t}=T(),[s,d]=f.useState([]),[r,u]=f.useState({count:0}),[b,x]=f.useState(!1),[m,N]=f.useState({page:1,pageSize:B}),[p,C]=f.useState({}),e=[{title:c.NAME,dataIndex:g.Name,key:_.Name,fixed:"left",render:(n,a)=>o.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>w(i.View,a),children:n??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:44,columnNumber:11},this)},{title:c.SHORT_NAME,dataIndex:g.ShortName,key:_.ShortName},{title:c.CODE,dataIndex:g.Code,key:g.Code},{title:c.CODE_EX,dataIndex:g.Code_ex,key:g.Code_ex},{title:c.ID_EX,dataIndex:g.Id_ex,key:g.Id_ex},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:n=>n?o.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:78,columnNumber:23},this):o.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:78,columnNumber:75},this)}],l=async(n,a,S)=>{try{x(!0);const h=await Promise.all([await H({limit:a,page:n},S),await G(S)]);d(h[0]),u(h[1]),x(!1)}catch(h){x(!1),console.log(h)}},w=(n,a)=>{n===i.View&&P(a)},P=n=>{t(o.jsxDEV(k,{detail:n,action:i.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:110,columnNumber:7},this),{width:"40vw",onModalClose(a){a!=null&&a.success?t(o.jsxDEV(k,{detail:n,action:i.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:116,columnNumber:15},this),{width:"40vw",onModalClose(){E()}}):E()}})},E=()=>{l(m.page,m.pageSize,p)};return f.useEffect(()=>{l(m.page,m.pageSize,p)},[m,p]),o.jsxDEV("div",{className:"w-[900px]",children:o.jsxDEV(U,{total:(r==null?void 0:r.count)||0,className:"mt-5",setFilter:C,setPagination:N,isReloadButton:!1,dataSource:s,columns:e,actionList:W,isAction:!1,loading:b,paginationCustom:{current:m.page,pageSize:m.pageSize,total:r==null?void 0:r.count},onChange:({current:n,pageSize:a})=>{N({page:n,pageSize:a}),l(n,a,p)},actionClick:w,filterColumns:[_.Name],btnCreate:!0,x:1300,handleCreate:()=>{t(o.jsxDEV(k,{action:i.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:168,columnNumber:13},this),{width:"40vw",onModalClose(n){n!=null&&n.success&&E()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:140,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/officer-categories/pages/PositionCategories.tsx",lineNumber:139,columnNumber:5},this)}export{W as ACTION_TABLE,ne as default};
