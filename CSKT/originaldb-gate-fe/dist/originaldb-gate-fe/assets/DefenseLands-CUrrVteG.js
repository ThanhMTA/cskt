import{e as B,J as U,K as G,O as z,Q as $,R as H,t as l,x as q,r as o,y as r,j as e,k as W,q as X,F as V,cy as Q,ax as K,bo as Y,bp as R,I as S,b4 as M,H as F,bu as j,a_ as J,B as I,W as Z,w as ee,z as se,E as ne,G as ae}from"./index-DXrCg2vr.js";import{O as T,M as te}from"./OperationCategories.constant-Cc0MMSFx.js";import{g as oe}from"./Ward.action-D2xWCgQ3.js";import{I as ie}from"./IsEnabled-BlCRppZ-.js";import{P as re}from"./index-B0_H1u92.js";import{I as _}from"./index-Bb5KQ1O1.js";import{W as P}from"./WorkstationsAction-Cs0dwKwA.js";import"./StationFunction.action-BrqCOwjU.js";import"./StationType.action-vp6QDcJD.js";import"./ModalCategoryActionHeader-CMTsFAdF.js";import"./ItemsComponent-Ct2UsBCT.js";import"./index-CfEarsVi.js";import"./arrayToTree.min-Bpdh5Rxo.js";const x="defense_lands",le=(s,i)=>B(x,{...s,fields:["*"],filter:i}),ce=async s=>{var u;return{count:(u=(await U(x,{aggregate:{countDistinct:"id"},query:{filter:s}}))[0].countDistinct)==null?void 0:u.id}},de=(s,i)=>G(x,s,{fields:["*"],filter:i}),me=s=>z(x,{...s}),ue=(s,i)=>$(x,s,{...i}),fe=s=>H(x,s);var E=(s=>(s[s.Name=250]="Name",s[s.ShortName=100]="ShortName",s[s.Address=250]="Address",s[s.IdEx=100]="IdEx",s[s.CodeEx=50]="CodeEx",s))(E||{});const c={NAME:"Tên điểm đất",SYMBOL:"Ký hiệu",MANAGE_ORG_ID:"Đơn vị quản lý",WARD_ID:"Địa bàn",ADDRESS:"Địa chỉ",AREA:"Diện tích đất (m2)",LONGITUDE:"Kinh độ (Độ N)",LATITUDE:"Vĩ độ (Độ E)",ALTITUDE:"Độ cao so với mực nước biển",PHONE_NUMBER:"Số điện thoại liên hệ",ORDER_NUMBER:"Số điện thoại",ID_EX:"Mã định danh mở rộng (CSDL BQP)",CODE_EX:"Mã mở rộng (CSDL BQP)",IS_ENABLE:"Trạng thái",URL_FILE_PATH:"Hồ sơ kỹ thuật trạm",SHORT_NAME:"Tên tắt điểm đất"},{TextArea:pe}=S,ge={required:"Vui lòng không bỏ trống trường này",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},be=({modalType:s,idRecord:i,closeModal:u})=>{var w,D;const[d]=l.useForm(),{openMessage:g}=q(),[m,f]=o.useState(s),[A,b]=o.useState({organizations:[],wards:[]}),L=async()=>{const n=await Promise.all([await J({},{}),await oe({},{})]);b({organizations:n[0],wards:n[1]})},k=o.useCallback(async()=>{try{m===r.Create?await me(d==null?void 0:d.getFieldsValue()):await ue(i,d==null?void 0:d.getFieldsValue()),g({type:"success",content:`${m===r.Create?"Thêm mới":"Chỉnh sửa"} ${T.DefenseLands} thành công`}),u(!0)}catch(n){g({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"})}},[m]),p=o.useMemo(()=>m===r.View?"borderless":"outlined",[m]),h=o.useCallback(async()=>{try{await fe(i),g({type:"success",content:`Xóa ${T.DefenseLands} thành công`}),u(!0)}catch(n){g({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"})}},[i]),N=o.useCallback(async()=>{try{const n=await de(i,{});d.setFieldsValue(n)}catch(n){g({type:"error",content:(n==null?void 0:n.message)||"Lỗi hệ thống"})}},[i]);return o.useEffect(()=>{f(s)},[s]),o.useEffect(()=>{L(),s!==r.Create&&N()},[]),e.jsxDEV(W,{...X,className:"flex",size:20,children:[e.jsxDEV(V,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:[e.jsxDEV("p",{className:"modal-title",children:`${(D=(w=Q)==null?void 0:w.find(n=>(n==null?void 0:n.key)===m))==null?void 0:D.title} ${T.DefenseLands}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:141,columnNumber:9},void 0),m===r.View?e.jsxDEV(K,{htmlType:"submit",type:"primary",onClick:()=>{f(r.Update)},children:"Sửa thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:147,columnNumber:11},void 0):e.jsxDEV(V,{gap:10,children:[m===r.Update&&e.jsxDEV(re,{title:Y.DELETE,onConfirm:h,okText:R.CORRECT,cancelText:R.NO,children:e.jsxDEV(K,{htmlType:"button",className:"text-red border-red",children:"Xóa tất cả"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:168,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:162,columnNumber:17},void 0),e.jsxDEV(K,{htmlType:"submit",type:"primary",onClick:d.submit,children:"Lưu thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:178,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:157,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:136,columnNumber:7},void 0),e.jsxDEV(l,{form:d,preserve:!1,className:"bg-secondary p-3 rounded-primary mt-10",validateMessages:ge,onFinish:k,disabled:m===r.View,initialValues:{is_enable:!0},autoComplete:"off",variant:p,children:[e.jsxDEV(V,{gap:16,className:"p-3 bg-tertiary rounded-[inherit]",align:"center",children:[e.jsxDEV("div",{className:"w-8 center rounded-full bg-white aspect-square",children:e.jsxDEV(te,{className:"text-lg"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:205,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:204,columnNumber:11},void 0),e.jsxDEV("span",{className:"font-bold",children:["Danh mục ",T.DefenseLands]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:207,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:199,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.NAME,name:"name",labelCol:{span:24},rules:[{required:!0},{max:E.Name}],children:e.jsxDEV(S,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:218,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:209,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.SHORT_NAME,name:"short_name",labelCol:{span:24},rules:[{max:E.ShortName}],children:e.jsxDEV(S,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:226,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:220,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:"Địa chỉ",name:"address",labelCol:{span:24},rules:[{max:E.Address}],children:e.jsxDEV(pe,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:234,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:228,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.AREA,name:"area",labelCol:{span:24},children:e.jsxDEV(_,{className:"w-full",controls:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:241,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:236,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.ALTITUDE,name:"altitude",labelCol:{span:24},children:e.jsxDEV(_,{className:"w-full",controls:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:251,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:246,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.ID_EX,name:"id_ex",labelCol:{span:24},rules:[{max:E.IdEx}],children:e.jsxDEV(S,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:259,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:253,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.CODE_EX,name:"code_ex",labelCol:{span:24},rules:[{max:E.CodeEx}],children:e.jsxDEV(S,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:267,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:261,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.MANAGE_ORG_ID,name:"org_id",labelCol:{span:24},children:e.jsxDEV(M,{options:F(A.organizations,"name","id")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:274,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:269,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.WARD_ID,name:"ward_id",labelCol:{span:24},children:e.jsxDEV(M,{options:F(A.wards,"name","id")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:287,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:282,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:c.IS_ENABLE,name:"is_enable",labelCol:{span:24},labelAlign:"left",rules:[{required:!0}],children:m===r.View?e.jsxDEV(ie,{is_enable:d.getFieldValue("is_enable")},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:306,columnNumber:15},void 0):e.jsxDEV(j.Group,{children:[e.jsxDEV(j,{value:!0,children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:309,columnNumber:17},void 0),e.jsxDEV(j,{value:!1,children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:310,columnNumber:17},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:308,columnNumber:15},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:295,columnNumber:9},void 0),e.jsxDEV(l.Item,{label:"Số thứ tự",name:"order_number",labelCol:{span:24},children:e.jsxDEV(_,{className:"w-full",controls:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:320,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:315,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:188,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/DefenseLandsAction.tsx",lineNumber:131,columnNumber:5},void 0)},Ne=[{key:r.View,icon:e.jsxDEV(ae,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:29,columnNumber:11},void 0),tooltip:"Chi tiết"}];function Ke(){const s=[{title:c.NAME,dataIndex:"name",fixed:"left",width:300,key:I.Name,render:(a,t)=>e.jsxDEV("span",{className:"text-primary cursor-pointer font-semibold",onClick:()=>{i(t)},children:a},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:44,columnNumber:11},this)},{title:c.SHORT_NAME,dataIndex:"symbol",width:200,key:I.ShortName},{title:c.ADDRESS,dataIndex:"address",width:300},{title:c.AREA,dataIndex:"area",width:300}].map(a=>({...a,key:(a==null?void 0:a.key)||Z()})),i=a=>{u(e.jsxDEV(P,{detail:a,action:r.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:108,columnNumber:15},this),{width:"80vw",onModalClose(t){t!=null&&t.success&&u(e.jsxDEV(P,{detail:a,action:r.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:113,columnNumber:13},this),{width:"80vw",onModalClose(C){C!=null&&C.success&&O()}})}})},{openModal:u,closeModal:d}=ee(),[g,m]=o.useState([]),[f,A]=o.useState({count:0}),b=o.useRef(r.Create),[L,k]=o.useState(!1),[p,h]=o.useState({page:1,pageSize:se}),[N,w]=o.useState({}),D=async(a,t,C)=>{try{k(!0);const v=await Promise.all([await le({limit:t,page:a},C),await ce({})]);m(v[0]),A(v[1]),k(!1)}catch{k(!1)}},n=async a=>{y(a)},y=a=>{u(e.jsxDEV(be,{modalType:b==null?void 0:b.current,idRecord:a,closeModal:t=>{d(!0),t&&O()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:162,columnNumber:7},this))},O=()=>{D(p.page,p.pageSize,N)};return o.useEffect(()=>{D(p.page,p.pageSize,N)},[N]),e.jsxDEV("div",{className:"w-[900px]",children:e.jsxDEV(ne,{total:(f==null?void 0:f.count)||0,className:"mt-5",isReloadButton:!1,dataSource:g,columns:s,actionList:Ne,isAction:!0,loading:L,setFilter:w,setPagination:h,paginationCustom:{current:p.page,pageSize:p.pageSize,total:f==null?void 0:f.count},onChange:({current:a,pageSize:t})=>{h({page:a,pageSize:t}),D(a,t,N)},actionClick:(a,t)=>{b.current=a,n(t==null?void 0:t.id)},filterColumns:[I.Name],btnCreate:!0,handleCreate:()=>{b.current=r.Create,y()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:186,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/DefenseLands.tsx",lineNumber:185,columnNumber:5},this)}export{Ne as ACTION_TABLE,Ke as default};
