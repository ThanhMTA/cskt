import{t as b,x as y,r as n,y as c,j as e,k as v,q as D,F as C,cy as V,ax as T,bo as j,bp as F,I as w,w as K,cz as L,E as I,B as E,W as _,G as M}from"./index-DXrCg2vr.js";import{c as O,u as P,r as $,a as B,g as G,m as R}from"./StationFunction.action-BrqCOwjU.js";import{O as x,M as U}from"./OperationCategories.constant-Cc0MMSFx.js";import{S as A}from"./StationType.enum-Bp_r4zJ2.js";import{P as q}from"./index-B0_H1u92.js";import{I as z}from"./index-Bb5KQ1O1.js";const X={required:"Vui lòng không bỏ trống trường này",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}},H=({modalType:a,idRecord:d,closeModal:N})=>{var S,f;const[i]=b.useForm(),{openMessage:o}=y(),[s,u]=n.useState(a),h=n.useCallback(async()=>{try{s===c.Create?await O(i==null?void 0:i.getFieldsValue()):await P(d,i==null?void 0:i.getFieldsValue()),o({type:"success",content:`${s===c.Create?"Thêm mới":"Chỉnh sửa"} ${x.StationFunction} thành công`}),N(!0)}catch(t){o({type:"error",content:(t==null?void 0:t.message)||"Lỗi hệ thống"})}},[s]),p=n.useMemo(()=>s===c.View?"borderless":"outlined",[s]),m=n.useCallback(async()=>{try{await $(d),o({type:"success",content:`Xóa ${x.StationFunction} thành công`}),N(!0)}catch(t){o({type:"error",content:(t==null?void 0:t.message)||"Lỗi hệ thống"})}},[d]),g=n.useCallback(async()=>{try{const t=await B(d,{});i.setFieldsValue(t)}catch(t){o({type:"error",content:(t==null?void 0:t.message)||"Lỗi hệ thống"})}},[d]);return n.useEffect(()=>{u(a)},[a]),n.useEffect(()=>{a!==c.Create&&g()},[]),e.jsxDEV(v,{...D,className:"flex",size:20,children:[e.jsxDEV(C,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:[e.jsxDEV("p",{className:"modal-title",children:`${(f=(S=V)==null?void 0:S.find(t=>(t==null?void 0:t.key)===s))==null?void 0:f.title} ${x.StationFunction}`},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:116,columnNumber:9},void 0),s===c.View?e.jsxDEV(T,{htmlType:"submit",type:"primary",onClick:()=>{u(c.Update)},children:"Sửa thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:122,columnNumber:11},void 0):e.jsxDEV(C,{gap:10,children:[s===c.Update&&e.jsxDEV(q,{title:j.DELETE,onConfirm:m,okText:F.CORRECT,cancelText:F.NO,children:e.jsxDEV(T,{htmlType:"button",className:"text-red border-red",children:"Xóa tất cả"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:143,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:137,columnNumber:17},void 0),e.jsxDEV(T,{htmlType:"submit",type:"primary",onClick:i.submit,children:"Lưu thông tin"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:153,columnNumber:13},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:132,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:111,columnNumber:7},void 0),e.jsxDEV(b,{form:i,preserve:!1,className:"bg-secondary p-3 rounded-primary mt-10",validateMessages:X,onFinish:h,initialValues:{is_enable:!1},disabled:s===c.View,autoComplete:"off",variant:p,children:[e.jsxDEV(C,{gap:16,className:"p-3 bg-tertiary rounded-[inherit]",align:"center",children:[e.jsxDEV("div",{className:"w-8 center rounded-full bg-white aspect-square",children:e.jsxDEV(U,{className:"text-lg"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:182,columnNumber:13},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:181,columnNumber:11},void 0),e.jsxDEV("span",{className:"font-bold",children:["Danh mục ",x.StationFunction]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:184,columnNumber:11},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:176,columnNumber:9},void 0),e.jsxDEV(b.Item,{label:"Tên chức năng trạm thông tin",name:"name",labelCol:{span:24},rules:[{required:!0},{max:A.Name}],children:e.jsxDEV(w,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:195,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:186,columnNumber:9},void 0),e.jsxDEV(b.Item,{label:"Tên viết tắt",name:"short_name",labelCol:{span:24},rules:[{required:!0},{max:A.ShortName}],children:e.jsxDEV(w,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:206,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:197,columnNumber:9},void 0),e.jsxDEV(b.Item,{label:"Số thứ tự",name:"order_number",labelCol:{span:24},children:e.jsxDEV(z,{className:"w-full",controls:!1},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:213,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:208,columnNumber:9},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:163,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/components/StationFunctionAction.tsx",lineNumber:106,columnNumber:5},void 0)},W=[{title:"Tên chức năng trạm thông tin",dataIndex:"name",fixed:"left",width:200,key:E.Name},{title:"Tên viết tắt",dataIndex:"short_name",key:E.ShortName,width:150}].map(a=>({...a,key:(a==null?void 0:a.key)||_()})),Y=[{key:c.View,icon:e.jsxDEV(M,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationFunction.tsx",lineNumber:40,columnNumber:11},void 0),tooltip:"Chi tiết"}];function oe(){const{openModal:a,closeModal:d}=K(),[N,i]=n.useState([]),[o,s]=n.useState({count:0}),u=n.useRef(c.Create),[h,p]=n.useState(!1),m=n.useRef({...L}),g=async(r,l)=>{try{p(!0);const k=await Promise.all([await G({limit:l,page:r},{}),await R({})]);i(k[0]),s(k[1]),p(!1)}catch{p(!1)}},S=async r=>{f(r)},f=r=>{a(e.jsxDEV(H,{modalType:u==null?void 0:u.current,idRecord:r,closeModal:l=>{d(!0),l&&t()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationFunction.tsx",lineNumber:83,columnNumber:7},this))},t=()=>{g(m.current.current,m.current.pageSize)};return n.useEffect(()=>{g(m.current.current,m.current.pageSize)},[]),e.jsxDEV("div",{className:"w-[900px]",children:e.jsxDEV(I,{total:(o==null?void 0:o.count)||0,className:"mt-5",isReloadButton:!1,dataSource:N,columns:W,actionList:Y,isAction:!0,loading:h,paginationCustom:{...m.current,total:o==null?void 0:o.count},onChange:({current:r,pageSize:l})=>{m.current={current:r,pageSize:l},g(r,l)},actionClick:(r,l)=>{u.current=r,S(l==null?void 0:l.id)},filterColumns:[E.Name],btnCreate:!0,handleCreate:()=>{u.current=c.Create,f()}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationFunction.tsx",lineNumber:113,columnNumber:7},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/operation-categories/pages/StationFunction.tsx",lineNumber:112,columnNumber:5},this)}export{Y as ACTION_TABLE,oe as default};
