import{t as T,v as V,w as R,x as y,r as l,j as t,k as j,q as K,F as A,y as i,z as I,B as k,E as _,G as F}from"./index-DXrCg2vr.js";import{M}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{c as z,u as L,r as P,g as q,m as U}from"./Region.action-DLCgoOK4.js";import{I as E}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";function w({detail:s,action:n}){const[c]=T.useForm(),d=V(),b=R(),{openMessage:r}=y(),x=async()=>{try{d.show();const e=c.getFieldsValue();switch(n){case i.Update:await L(s==null?void 0:s.id,e),r({type:"success",content:"Cập nhật thành công"});break;case i.Create:await z(e),r({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case i.View:break}m()}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),d.hide()}},C=async()=>{try{await P(s==null?void 0:s.id),r({type:"success",content:"Xóa thành công"}),d.hide(),b.closeModal({})}catch(e){console.log(e),r({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},p=()=>{if(n===i.View){m();return}else c.submit()},m=()=>{d.hide(),b.closeModal({success:!0})},h=l.useMemo(()=>[{title:"Tên vùng",content:(s==null?void 0:s.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Hãy nhập thông tin cho trường tên vùng"}]},{title:"Tên viết tắt",content:(s==null?void 0:s.short_name)||null,dataIndex:"short_name"},{title:"Số thứ tự",content:(s==null?void 0:s.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(s==null?void 0:s.is_enable)===void 0?!0:s==null?void 0:s.is_enable,dataIndex:"is_enable"}],[s]);return t.jsxDEV(j,{...K,className:"flex",size:20,children:[t.jsxDEV(A,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:t.jsxDEV(M,{name:"vùng",action:n,hanldeFinish:p,handleDelete:C},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:126,columnNumber:17},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:121,columnNumber:13},this),t.jsxDEV(T,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",disabled:n===i.View,onFinish:x,children:n===i.Update||n===i.Create?t.jsxDEV(t.Fragment,{children:h.map((e,g)=>t.jsxDEV(E,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,dataIndex:e.dataIndex,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:138,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:135,columnNumber:21},this):t.jsxDEV(t.Fragment,{children:h.map((e,g)=>t.jsxDEV("div",{className:"flex flex-col pb-4",children:t.jsxDEV(E,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},g,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:159,columnNumber:37},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:158,columnNumber:33},this))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:155,columnNumber:21},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:128,columnNumber:13},this)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/RegionAction.tsx",lineNumber:116,columnNumber:9},this)}const B=[{key:i.View,icon:t.jsxDEV(F,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:18,columnNumber:15},void 0),tooltip:"Chi tiết"}];function W(){const{openModal:s}=R(),[n,c]=l.useState({page:1,pageSize:I}),[d,b]=l.useState([]),[r,x]=l.useState({count:0}),[C,p]=l.useState(!1),[m,h]=l.useState({}),e=[{title:"Tên vùng",dataIndex:"name",fixed:"left",key:k.Name,render:(o,a)=>t.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>S(i.View,a),children:o??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:37,columnNumber:21},this)},{title:"Tên viết tắt",dataIndex:"short_name",key:k.ShortName},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:o=>o?t.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:55,columnNumber:47},this):t.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:55,columnNumber:99},this)}],g=async(o,a,u)=>{try{p(!0);const f=await Promise.all([q({limit:a,page:o},u),U(u)]);f[1]&&x({count:f[1].count}),b(f[0]),p(!1)}catch(f){p(!1),console.log(f)}},D=o=>{s(t.jsxDEV(w,{detail:o,action:i.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:76,columnNumber:13},this),{width:"40vw",onModalClose(a){a!=null&&a.success?s(t.jsxDEV(w,{detail:o,action:i.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:82,columnNumber:29},this),{width:"40vw",onModalClose(u){u!=null&&u.success,N()}}):N()}})},S=(o,a)=>{console.log(o),o===i.View&&D(a)},N=()=>{g(n.page,n.pageSize,m)};return l.useEffect(()=>{g(1,n.pageSize,m)},[m]),t.jsxDEV("div",{className:"w-[900px]",children:t.jsxDEV(_,{className:"mt-5",isReloadButton:!0,dataSource:[...d],columns:e,paginationCustom:{current:n.page,pageSize:n.pageSize,total:r==null?void 0:r.count},onChange:({current:o,pageSize:a})=>{c({page:o,pageSize:a}),g(n.page,n.pageSize,m)},setFilter:h,setPagination:c,actionList:B,actionClick:S,isAction:!1,loading:C,rowKey:"id",filterColumns:[k.Name],btnCreate:!0,handleCreate:()=>{s(t.jsxDEV(w,{action:i.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:143,columnNumber:21},this),{width:"40vw",onModalClose(o){o!=null&&o.success&&N()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:115,columnNumber:9},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/RegionCategories.tsx",lineNumber:114,columnNumber:12},this)}export{W as default};
