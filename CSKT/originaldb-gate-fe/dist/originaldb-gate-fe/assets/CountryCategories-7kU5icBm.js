import{t as S,v as I,w as E,x as V,r as l,j as s,k as _,q as j,F as A,y as r,z as K,B as h,E as M,G as F}from"./index-DXrCg2vr.js";import{c as q,u as L,r as P,g as z,m as U}from"./Country.action-CW-uQgoU.js";import{M as B}from"./ModalCategoryActionHeader-CMTsFAdF.js";import{I as T}from"./ItemsComponent-Ct2UsBCT.js";import"./index-B0_H1u92.js";import"./index-CfEarsVi.js";import"./index-Bb5KQ1O1.js";const R=({detail:t,action:a})=>{const[c]=S.useForm(),u=I(),p=E(),{openMessage:i}=V(),x=async()=>{try{u.show();const e=c.getFieldsValue();switch(a){case r.Update:await L(t==null?void 0:t.id,e),i({type:"success",content:"Cập nhật thành công"});break;case r.Create:await q(e),i({type:"success",content:"Thêm mới thành công"}),c.resetFields();break;case r.View:break}m()}catch(e){console.log(e),i({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"}),u.hide()}},C=async()=>{try{await P(t==null?void 0:t.id),i({type:"success",content:"Xóa thành công"}),u.hide(),p.closeModal({})}catch(e){console.log(e),i({type:"error",content:(e==null?void 0:e.message)||"Lỗi hệ thống"})}},g=()=>{if(a===r.View){m();return}else c.submit()},m=()=>{u.hide(),p.closeModal({success:!0})},b=l.useMemo(()=>[{title:"Tên quốc gia",content:(t==null?void 0:t.name)||null,require:!0,dataIndex:"name",rules:[{required:!0,message:"Hãy nhập thông tin cho trường tên quốc gia"}]},{title:"Tên rút gọn",content:(t==null?void 0:t.short_name)||null,dataIndex:"short_name"},{title:"Mã quốc gia",content:(t==null?void 0:t.code)||null,dataIndex:"code"},{title:"Bar code",content:(t==null?void 0:t.bar_code)||null,dataIndex:"bar_code"},{title:"Mã mở rộng",content:(t==null?void 0:t.code_ex)||null,dataIndex:"code_ex"},{title:"Số thứ tự",content:(t==null?void 0:t.order_number)||null,dataIndex:"order_number"},{title:"Trạng thái",content:(t==null?void 0:t.is_enable)===void 0?!0:t==null?void 0:t.is_enable,dataIndex:"is_enable"}],[t]);return s.jsxDEV(_,{...j,className:"flex",size:20,children:[s.jsxDEV(A,{align:"center",justify:"space-between",className:"absolute bg-white left-0 right-0 px-6 pb-3 z-50",children:s.jsxDEV(B,{name:"quốc gia",action:a,hanldeFinish:g,handleDelete:C},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:141,columnNumber:9},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:136,columnNumber:7},void 0),s.jsxDEV(S,{form:c,className:"form-container bg-secondary p-5 rounded-primary mt-10 grid grid-cols-2 gap-2",onFinish:x,children:a===r.Update||a===r.Create?s.jsxDEV(s.Fragment,{children:b.map((e,d)=>s.jsxDEV(T,{title:e==null?void 0:e.title,rules:e==null?void 0:e.rules,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!0,isNumberField:(e==null?void 0:e.dataIndex)==="order_number",dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},d,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:152,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:149,columnNumber:11},void 0):s.jsxDEV(s.Fragment,{children:b.map((e,d)=>s.jsxDEV("div",{className:"flex flex-col pb-4",children:s.jsxDEV(T,{title:e==null?void 0:e.title,content:e==null?void 0:e.content,require:e==null?void 0:e.require,statusUpdate:!1,dataIndex:e.dataIndex,isRadioField:(e==null?void 0:e.dataIndex)==="is_enable"},d,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:173,columnNumber:19},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:172,columnNumber:17},void 0))},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:169,columnNumber:11},void 0)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:143,columnNumber:7},void 0)]},void 0,!0,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/components/CountryAction.tsx",lineNumber:131,columnNumber:5},void 0)},y=R,G=[{key:r.View,icon:s.jsxDEV(F,{},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:17,columnNumber:15},void 0),tooltip:"Chi tiết"}];function W(){const{openModal:t}=E(),[a,c]=l.useState({page:1,pageSize:K}),[u,p]=l.useState([]),[i,x]=l.useState({count:0}),[C,g]=l.useState(!1),[m,b]=l.useState({}),e=[{title:"Tên",dataIndex:"name",fixed:"left",key:h.Name,render:(n,o)=>s.jsxDEV("span",{className:"font-semibold text-sm cursor-pointer text-[#3D73D0]",onClick:()=>k(r.View,o),children:n??""},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:36,columnNumber:21},this),sorter:!0},{title:"Tên rút gọn",dataIndex:"short_name",key:h.ShortName},{title:"Barcode",dataIndex:"bar_code",key:"bar_code"},{title:"Mã quốc gia",dataIndex:"code",key:"code"},{title:"Mã mở rộng",dataIndex:"code_ex",key:"code_ex"},{title:"Trạng thái",dataIndex:"is_enable",key:"is_enable",render:n=>n?s.jsxDEV("span",{className:"text-green-600",children:"Hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:70,columnNumber:47},this):s.jsxDEV("span",{className:"text-red",children:"Không hoạt động"},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:70,columnNumber:99},this)}],d=async(n,o,w)=>{try{g(!0);const f=await Promise.all([z({limit:o,page:n},w),U(w)]);f[1]&&x({count:f[1].count}),p(f[0]),g(!1)}catch(f){g(!1),console.log(f)}},D=n=>{t(s.jsxDEV(y,{detail:n,action:r.View},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:89,columnNumber:13},this),{width:"40vw",onModalClose(o){o!=null&&o.success?t(s.jsxDEV(y,{detail:n,action:r.Update},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:95,columnNumber:29},this),{width:"40vw",onModalClose(){N()}}):N()}})},k=(n,o)=>{console.log(n),n===r.View&&D(o)},N=()=>{d(a.page,a.pageSize,m)};return l.useEffect(()=>{d(1,a.pageSize,m)},[m]),s.jsxDEV("div",{className:"w-[900px]",children:s.jsxDEV(M,{className:"mt-5",setFilter:b,setPagination:c,isReloadButton:!0,dataSource:[...u],columns:e,paginationCustom:{current:a.page,pageSize:a.pageSize,total:i==null?void 0:i.count},onChange:({current:n,pageSize:o})=>{c({page:n,pageSize:o}),d(n,o,m)},actionList:G,actionClick:k,isAction:!1,loading:C,rowKey:"id",filterColumns:[h.Name],btnCreate:!0,handleCreate:()=>{t(s.jsxDEV(y,{action:r.Create},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:150,columnNumber:21},this),{width:"40vw",onModalClose(n){n!=null&&n.success&&N()}})}},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:123,columnNumber:9},this)},void 0,!1,{fileName:"/workspace/cskt/CSKT/originaldb-gate-fe/src/modules/it-categories/pages/CountryCategories.tsx",lineNumber:122,columnNumber:12},this)}export{W as default};
